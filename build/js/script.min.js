"use strict";!function(e){"function"==typeof define&&define.amd?define(["../widgets/datepicker"],e):e(jQuery.datepicker)}((function(e){return e.regional.ru={closeText:"Закрыть",prevText:"&#x3C;Пред",nextText:"След&#x3E;",currentText:"Сегодня",monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthNamesShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],dayNames:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],dayNamesShort:["вск","пнд","втр","срд","чтв","птн","сбт"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],weekHeader:"Нед",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.setDefaults(e.regional.ru),e.regional.ru})),$(".dropdown:not(.dropdown-opened").select2({minimumResultsForSearch:1/0,dropdownCssClass:["calendar-dropdown"]}),$(".dropdown-opened").select2({minimumResultsForSearch:1/0,dropdownCssClass:["calendar-dropdown","calendar-dropdown-permanent"]}).on("select2:closing",(function(e){e.preventDefault()})).on("select2:closed",(function(e){list.select2("open")})),$(".dropdown").on("select2:close",(function(){$(this).next().find(".select2-selection").blur()})),$(".dropdown + .select2 .select2-selection__rendered").attr("tabindex","-1"),$(".dropdown-opened").select2("open"),function(){var e={minimumResultsForSearch:1/0,dropdownCssClass:"calendar-dropdown"};$(".input-date").datepicker({dateFormat:"dd.mm.yy",showOtherMonths:!0,regional:"ru",monthNamesShort:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],changeMonth:!0,changeYear:!0,yearRange:"1900:+10",beforeShow:function(){setTimeout((function(){$(".ui-datepicker-month").select2(e),$(".ui-datepicker-year").select2(e)}),0)},onChangeMonthYear:function(){setTimeout((function(){$(".ui-datepicker-month").select2(e),$(".ui-datepicker-year").select2(e)}),0)}}),$(".input-date-trigger").datepicker({dateFormat:"dd.mm.yy",showOtherMonths:!0,regional:"ru",monthNamesShort:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],changeMonth:!0,changeYear:!0,yearRange:"1900:+10",onChangeMonthYear:function(){setTimeout((function(){$(".ui-datepicker-month").select2(e),$(".ui-datepicker-year").select2(e)}),0)},onSelect:function(){setTimeout((function(){$(".ui-datepicker-month").select2(e),$(".ui-datepicker-year").select2(e)}),0)}}),$(".input-date-trigger-single").datepicker({dateFormat:"dd.mm.yy",showOtherMonths:!0,regional:"ru",monthNamesShort:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],changeMonth:!0,changeYear:!0,yearRange:"1900:+10",onChangeMonthYear:function(){setTimeout((function(){$(".ui-datepicker-month").select2(e),$(".ui-datepicker-year").select2(e)}),0)},onSelect:function(){setTimeout((function(){$(".ui-datepicker-month").select2(e),$(".ui-datepicker-year").select2(e)}),0)}}),$(".input-date-trigger-range").datepicker({range:"period",dateFormat:"dd.mm.yy",showOtherMonths:!0,regional:"ru",monthNamesShort:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],changeMonth:!0,changeYear:!0,yearRange:"1900:+10",onChangeMonthYear:function(){setTimeout((function(){$(".ui-datepicker-month").select2(e),$(".ui-datepicker-year").select2(e)}),0)},onSelect:function(t,n){console.log(n),setTimeout((function(){$(".input-date-trigger-range").find(".ui-datepicker-month").select2(e),$(".input-date-trigger-range").find(".ui-datepicker-year").select2(e)}),100)},beforeShow:function(e,t){console.log(t)}});var t=moment(),n=t.format("DD"),o=t.format("MM"),s=t.format("YYYY"),r="",a=[],c="";r="15"!==n?"15."+o+"."+s:"17."+o+"."+s,c="13"!==n?"13":"12",a=n>15?["02."+o+"."+s,"11."+o+"."+s]:["17."+o+"."+s,"26."+o+"."+s],$(".input-date-trigger").datepicker("setDate",r),$(".input-date-trigger-single").datepicker("setDate",r),$(".input-date-trigger-range").datepicker("setDate",a),$(".input-date-trigger-single .ui-datepicker-calendar td a").each((function(){$(this).text()===c&&$(this).addClass("hovered")})),$(".ui-datepicker-month").select2(e),$(".ui-datepicker-year").select2(e),$(".input-date").datepicker("refresh"),$(".input-date").inputmask("99.99.9999",{placeholder:"",showMaskOnHover:!1,showMaskOnFocus:!1,jitMasking:!0}),$(".input-date").on("focus",(function(e){var t=$(e.target);0===t.val().length&&t.parent().addClass("date-placeholder")})),$(".input-date").on("blur",(function(e){var t=$(e.target);t.val();t.parent().removeClass("date-placeholder")})),$(".input-date").on("input",(function(e){var t=$(e.target);t.val().length>0?t.parent().removeClass("date-placeholder"):t.parent().addClass("date-placeholder"),moment($(this).val(),"DD.MM.YYYY",!0).isValid()&&($(this).datepicker("hide"),$(this).datepicker("show"))})),$("#calendar-dropdown-month").select2({minimumResultsForSearch:1/0,dropdownCssClass:["calendar-dropdown","calendar-dropdown-permanent"],closeOnSelect:!1}).on("select2:closing",(function(e){e.preventDefault()})).on("select2:closed",(function(e){list.select2("open")})),$("#calendar-dropdown-month").select2("open"),$("#calendar-dropdown-year").select2({minimumResultsForSearch:1/0,dropdownCssClass:["calendar-dropdown","calendar-dropdown-permanent"],closeOnSelect:!1}).on("select2:closing",(function(e){e.preventDefault()})).on("select2:closed",(function(e){list.select2("open")})),$("#calendar-dropdown-year").select2("open")}(),$(".input-password-btn").on("click",(function(){var e=$(this),t=e.prev();e.toggleClass("shown"),e.hasClass("shown")?t.attr("type","text"):t.attr("type","password")})),$(".input-phone").inputmask("+7(999) 999-99-99"),function(){var e=document.querySelector(".scroll-to-top"),t=document.querySelector(".header");if(e){var n=function(){return t.getBoundingClientRect().height+50},o=window.pageYOffset>n(),s=function(){!e.classList.contains("active")&&e.classList.add("active")};o&&s(),document.addEventListener("scroll",(function(){!o&&window.pageYOffset>n()&&(s(),o=!0),o&&window.pageYOffset<n()&&(e.classList.contains("active")&&e.classList.remove("active"),o=!1)})),e.addEventListener("click",(function(e){e.preventDefault(),t.scrollIntoView({block:"start",behavior:"smooth"})}))}}(),function(){var e=document.querySelectorAll(".upload");if(e[0]){var t=function(e){if(e.files&&e.files[0]){var t=new FileReader;t.onloadstart=function(t){!function(e){$(e).parents(".upload__input-wrap").find(".upload__result").addClass("loader")}(e),function(e){a(e).find(".upload__name").text(e.files[0].name)}(e),function(e){a(e).addClass("show")}(e),function(e){$(e).parent().addClass("hidden")}(e)},t.onprogress=function(e){},t.onload=function(t){!function(e){$(e).parents(".upload__input-wrap").find(".upload__result").removeClass("loader")}(e);var l=a(e),i=l.parent(),d=l.clone(!0,!0);d.removeClass("show"),d.attr("data-result","1"),i.prepend(d);var u=$(e).parent().parent(),p=$(e).parent().clone(!0,!0);p.removeClass("hidden"),p.attr("data-input","1"),u.prepend(p),p.children("input")[0].addEventListener("change",n),["dragenter","dragover","dragleave","drop"].forEach((function(e){p[0].addEventListener(e,o,!1)})),["dragenter","dragover"].forEach((function(e){p[0].addEventListener(e,s,!1)})),["dragleave","drop"].forEach((function(e){p[0].addEventListener(e,r,!1)})),p[0].addEventListener("drop",c,!1)},t.readAsDataURL(e.files[0])}},n=function(e){t(e.currentTarget),console.log(e.currentTarget)};e.forEach((function(e){var t,a,l,i,d;t=e,a=0,l=$(t).find("[data-input='"+a+"']")[0],i=$(l).find("input")[0],d=$(t).find("[data-result='"+a+"']")[0],$(d).find(".upload__close")[0],["dragenter","dragover","dragleave","drop"].forEach((function(e){l.addEventListener(e,o,!1)})),["dragenter","dragover"].forEach((function(e){l.addEventListener(e,s,!1)})),["dragleave","drop"].forEach((function(e){l.addEventListener(e,r,!1)})),l.addEventListener("drop",c,!1),i.addEventListener("change",n)}))}function o(e){e.preventDefault(),e.stopPropagation()}function s(e){e.currentTarget.classList.add("highlight")}function r(e){e.currentTarget.classList.remove("highlight")}function a(e){var t=$(e).parent().attr("data-input");return $(e).parents(".upload").find("[data-result='"+t+"']")}function c(e){var n=e.dataTransfer.files,o=e.currentTarget.querySelector("input");o.files&&o.files[0]&&(o.value="",/safari/i.test(navigator.userAgent)||(o.type="",o.type="file")),o.files=n,function(e){t(e)}(o)}}(),function(){$("<div/>",{class:"preloader"}).css({position:"fixed",top:"0",left:"0",width:"100vw",height:"100vh","background-color":"#fff","z-index":"3000"}).appendTo("html");var e=function(e){e.target.value.length>0?$(e.target).addClass("inputed"):$(e.target).removeClass("inputed")};$(document).ready((function(){$(".js-select-combo").select2({placeholder:"Введите или выберите вариант",dropdownCssClass:"select-dropdown",language:{noResults:function(){return"Ничего не найдено"},searching:function(){return"Загрузка..."}}}),$(".js-select-combo").on("select2:open",(function(){$(".select2-search input").off("input",e),$(".select2-search input").on("input",e)})),$(".js-select-combo").on("select2:closing",(function(){$(".select2-search input").removeClass("inputed")})),$(".js-select-combo-open").select2({placeholder:"Введите или выберите вариант",dropdownCssClass:["select-dropdown","select-dropdown-multi","select-dropdown--opened"],language:{noResults:function(){return"Ничего не найдено"},searching:function(){return"Загрузка..."}}}).on("select2:closing",(function(e){e.preventDefault()})).on("select2:closed",(function(e){n.select2("open")})),$(".js-select-combo-open").select2("open"),$(".select-dropdown-multi input").on("input",e),$(".js-select-combo-searching").select2({placeholder:"Введите или выберите вариант",dropdownCssClass:["select-dropdown","select-dropdown--opened","select-dropdown--searching"],language:{noResults:function(){return"Ничего не найдено"},searching:function(){return"Загрузка..."}},ajax:{delay:5e8,url:"https://antibreez.github.io/select-data/select-data.json"}}).on("select2:closing",(function(e){e.preventDefault()})).on("select2:closed",(function(e){n.select2("open")}));var t=new Event("input",{bubbles:!0,cancelable:!0});$(".js-select-combo-searching").select2("open"),setTimeout((function(){$(".select-dropdown--searching input")[0].dispatchEvent(t)}),500),$(".js-select-combo-not-found").select2({dropdownCssClass:["select-dropdown","select-dropdown--opened","select-dropdown--not-found"],language:{noResults:function(){return"Ничего не найдено"},searching:function(){return"Загрузка..."}}}).on("select2:closing",(function(e){e.preventDefault()})).on("select2:closed",(function(e){n.select2("open")})),$(".js-select-combo-not-found").select2("open"),$(".select-dropdown--not-found input").val("фывапа"),$(".select-dropdown--not-found input")[0].dispatchEvent(t),$(".js-select-single").select2({placeholder:"Выберите вариант",minimumResultsForSearch:1/0,dropdownCssClass:["select-dropdown","select-dropdown--single"]});var n=$(".js-select-single-open").select2({placeholder:"Выберите вариант",minimumResultsForSearch:1/0,dropdownCssClass:["select-dropdown","select-dropdown--single","select-dropdown--opened"],closeOnSelect:!1}).on("select2:closing",(function(e){e.preventDefault()})).on("select2:closed",(function(e){n.select2("open")}));n.select2("open"),$(".js-select-multi").select2({placeholder:"Выберите варианты",dropdownCssClass:["select-dropdown","select-dropdown-multi"],language:{noResults:function(){return"Ничего не найдено"},searching:function(){return"Загрузка..."}}}),$(".js-select-multi").on("select2:open",(function(){$(".select2-search input").off("input",e),$(".select2-search input").on("input",e)})),$(".js-select-multi").on("select2:closing",(function(){$(".select2-search input").removeClass("inputed")})),$(".js-select-multi-open").select2({placeholder:"Выберите варианты",maximumSelectionLength:3,dropdownCssClass:["select-dropdown","select-dropdown--opened","select-dropdown-multi"],language:{noResults:function(){return"Ничего не найдено"},searching:function(){return"Загрузка..."},maximumSelected:function(e){return"Макс. количество вариантов - "+e.maximum}}}).on("select2:closing",(function(e){e.preventDefault()})).on("select2:closed",(function(e){n.select2("open")})),$(".js-select-multi-open").select2("open"),$(".js-select-multi-searching").select2({placeholder:"Выберите варианты",dropdownCssClass:["select-dropdown","select-dropdown--opened","select-dropdown--searching-multi"],language:{noResults:function(){return"Ничего не найдено"},searching:function(){return"Загрузка..."}},ajax:{delay:5e8,url:"https://antibreez.github.io/select-data/select-data.json"}}).on("select2:closing",(function(e){e.preventDefault()})).on("select2:closed",(function(e){n.select2("open")}));t=new Event("input",{bubbles:!0,cancelable:!0});$(".js-select-multi-searching").select2("open"),setTimeout((function(){$(".select-dropdown--searching-multi  input")[0].dispatchEvent(t)}),500),$(".js-select-multi-not-found").select2({dropdownCssClass:["select-dropdown","select-dropdown--opened","select-dropdown--not-found-multi"],language:{noResults:function(){return"Ничего не найдено"},searching:function(){return"Загрузка..."}}}).on("select2:closing",(function(e){e.preventDefault()})).on("select2:closed",(function(e){n.select2("open")})),$(".js-select-multi-not-found").select2("open"),$(".select-dropdown--not-found-multi input").val("фывапа"),$(".select-dropdown--not-found-multi input")[0].dispatchEvent(t)})),setTimeout((function(){window.scrollTo(0,0),$(".preloader").hide()}),500)}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyIsImRhdGVwaWNrZXItcnUuanMiLCJkcm9wZG93bi5qcyIsImlucHV0LWRhdGUuanMiLCJpbnB1dC5qcyIsInBob25lLW1hc2suanMiLCJzY3JvbGwuanMiLCJ1cGxvYWQuanMiLCJmb3Jtcy5qcyJdLCJuYW1lcyI6WyJmYWN0b3J5IiwiZGVmaW5lIiwiYW1kIiwialF1ZXJ5IiwiZGF0ZXBpY2tlciIsInJlZ2lvbmFsIiwicnUiLCJjbG9zZVRleHQiLCJwcmV2VGV4dCIsIm5leHRUZXh0IiwiY3VycmVudFRleHQiLCJtb250aE5hbWVzIiwibW9udGhOYW1lc1Nob3J0IiwiZGF5TmFtZXMiLCJkYXlOYW1lc1Nob3J0IiwiZGF5TmFtZXNNaW4iLCJ3ZWVrSGVhZGVyIiwiZGF0ZUZvcm1hdCIsImZpcnN0RGF5IiwiaXNSVEwiLCJzaG93TW9udGhBZnRlclllYXIiLCJ5ZWFyU3VmZml4Iiwic2V0RGVmYXVsdHMiLCIkIiwic2VsZWN0MiIsIm1pbmltdW1SZXN1bHRzRm9yU2VhcmNoIiwiSW5maW5pdHkiLCJkcm9wZG93bkNzc0NsYXNzIiwib24iLCJlIiwicHJldmVudERlZmF1bHQiLCJsaXN0IiwidGhpcyIsIm5leHQiLCJmaW5kIiwiYmx1ciIsImF0dHIiLCJzZWxlY3RPcHQiLCJzaG93T3RoZXJNb250aHMiLCJjaGFuZ2VNb250aCIsImNoYW5nZVllYXIiLCJ5ZWFyUmFuZ2UiLCJiZWZvcmVTaG93Iiwic2V0VGltZW91dCIsIm9uQ2hhbmdlTW9udGhZZWFyIiwib25TZWxlY3QiLCJyYW5nZSIsImlucHV0IiwiaW5zdCIsImNvbnNvbGUiLCJsb2ciLCJjdXJyZW50IiwibW9tZW50IiwiZGF5IiwiZm9ybWF0IiwibW9udGgiLCJ5ZWFyIiwicGlja2VkRGF0ZSIsInBpY2tlZFBlcmlvZCIsImhvdmVyRGF0ZSIsImVhY2giLCJ0ZXh0IiwiYWRkQ2xhc3MiLCJpbnB1dG1hc2siLCJwbGFjZWhvbGRlciIsInNob3dNYXNrT25Ib3ZlciIsInNob3dNYXNrT25Gb2N1cyIsImppdE1hc2tpbmciLCJ0YXJnZXQiLCJ2YWwiLCJsZW5ndGgiLCJwYXJlbnQiLCJyZW1vdmVDbGFzcyIsImlzVmFsaWQiLCJjbG9zZU9uU2VsZWN0IiwiJGJ0biIsIiRpbnB1dCIsInByZXYiLCJ0b2dnbGVDbGFzcyIsImhhc0NsYXNzIiwic2Nyb2xsQnRuIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaGVhZGVyIiwiZ2V0SGVhZGVySGVpZ2h0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiaGVpZ2h0IiwiaXNTY3JvbGxlZCIsIndpbmRvdyIsInBhZ2VZT2Zmc2V0Iiwic2hvd0J0biIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZSIsInNjcm9sbEludG9WaWV3IiwiYmxvY2siLCJiZWhhdmlvciIsInVwbG9hZHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmVhZFVybCIsImZpbGVzIiwicmVhZGVyIiwiRmlsZVJlYWRlciIsIm9ubG9hZHN0YXJ0IiwicGFyZW50cyIsImFkZExvYWRlciIsImdldFJlc3VsdEJsb2NrIiwibmFtZSIsImZpbGxSZXN1bHQiLCJzaG93UmVzdWx0IiwiaGlkZUxhYmVsIiwib25wcm9ncmVzcyIsIm9ubG9hZCIsInJlbW92ZUxvYWRlciIsIiRyZXN1bHQiLCIkcmVzdWx0V3JhcCIsIiRuZXdSZXN1bHQiLCJjbG9uZSIsInByZXBlbmQiLCIkbGFiZWxXcmFwIiwiJG5ld0xhYmVsIiwiY2hpbGRyZW4iLCJvbkZpbGVDaGFuZ2UiLCJmb3JFYWNoIiwiZXZlbnROYW1lIiwicHJldmVudERlZmF1bHRzIiwiaGlnaGxpZ2h0IiwidW5oaWdobGlnaHQiLCJoYW5kbGVEcm9wIiwicmVhZEFzRGF0YVVSTCIsImN1cnJlbnRUYXJnZXQiLCJ1cGxvYWQiLCJpZHgiLCJmaWxlTGFiZWwiLCJmaWxlSW5wdXQiLCJmaWxlUmVzdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwiJGlkeCIsImRhdGFUcmFuc2ZlciIsInZhbHVlIiwidGVzdCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInR5cGUiLCJvbkZpbGVEcm9wIiwiY2xhc3MiLCJjc3MiLCJwb3NpdGlvbiIsInRvcCIsImxlZnQiLCJ3aWR0aCIsImJhY2tncm91bmQtY29sb3IiLCJ6LWluZGV4IiwiYXBwZW5kVG8iLCJjaGVja0lucHV0IiwicmVhZHkiLCJsYW5ndWFnZSIsIm5vUmVzdWx0cyIsInNlYXJjaGluZyIsIm9mZiIsImFqYXgiLCJkZWxheSIsInVybCIsImV2ZW50IiwiRXZlbnQiLCJidWJibGVzIiwiY2FuY2VsYWJsZSIsImRpc3BhdGNoRXZlbnQiLCJtYXhpbXVtU2VsZWN0aW9uTGVuZ3RoIiwibWF4aW11bVNlbGVjdGVkIiwibWF4aW11bSIsInNjcm9sbFRvIiwiaGlkZSJdLCJtYXBwaW5ncyI6IkFBQUEsY0NFQSxTQUFBQSxHQUNBLG1CQUFBQyxRQUFBQSxPQUFBQyxJQUdBRCxPQUFBLENBQUEseUJBQUFELEdBSUFBLEVBQUFHLE9BQUFDLFlBUkEsRUFVQSxTQUFBQSxHQXNCQSxPQXBCQUEsRUFBQUMsU0FBQUMsR0FBQSxDQUNBQyxVQUFBLFVBQ0FDLFNBQUEsYUFDQUMsU0FBQSxhQUNBQyxZQUFBLFVBQ0FDLFdBQUEsQ0FBQSxTQUFBLFVBQUEsT0FBQSxTQUFBLE1BQUEsT0FDQSxPQUFBLFNBQUEsV0FBQSxVQUFBLFNBQUEsV0FDQUMsZ0JBQUEsQ0FBQSxNQUFBLE1BQUEsTUFBQSxNQUFBLE1BQUEsTUFDQSxNQUFBLE1BQUEsTUFBQSxNQUFBLE1BQUEsT0FDQUMsU0FBQSxDQUFBLGNBQUEsY0FBQSxVQUFBLFFBQUEsVUFBQSxVQUFBLFdBQ0FDLGNBQUEsQ0FBQSxNQUFBLE1BQUEsTUFBQSxNQUFBLE1BQUEsTUFBQSxPQUNBQyxZQUFBLENBQUEsS0FBQSxLQUFBLEtBQUEsS0FBQSxLQUFBLEtBQUEsTUFDQUMsV0FBQSxNQUNBQyxXQUFBLFdBQ0FDLFNBQUEsRUFDQUMsT0FBQSxFQUNBQyxvQkFBQSxFQUNBQyxXQUFBLElBQ0FqQixFQUFBa0IsWUFBQWxCLEVBQUFDLFNBQUFDLElBRUFGLEVBQUFDLFNBQUFDLE1DakNBaUIsRUFBQSxrQ0FBQUMsUUFBQSxDQUNBQyx3QkFBQUMsRUFBQUEsRUFDQUMsaUJBQUEsQ0FBQSx1QkFHQUosRUFBQSxvQkFBQUMsUUFBQSxDQUNBQyx3QkFBQUMsRUFBQUEsRUFDQUMsaUJBQUEsQ0FBQSxvQkFBQSxpQ0FDQUMsR0FBQSxtQkFBQSxTQUFBQyxHQUNBQSxFQUFBQyxvQkFDQUYsR0FBQSxrQkFBQSxTQUFBQyxHQUNBRSxLQUFBUCxRQUFBLFdBR0FELEVBQUEsYUFBQUssR0FBQSxpQkFBQSxXQUNBTCxFQUFBUyxNQUFBQyxPQUFBQyxLQUFBLHNCQUFBQyxVQUdBWixFQUFBLHFEQUFBYSxLQUFBLFdBQUEsTUFDQWIsRUFBQSxvQkFBQUMsUUFBQSxRQ3BCQSxXQUNBLElBQUFhLEVBQUEsQ0FDQVosd0JBQUFDLEVBQUFBLEVBQ0FDLGlCQUFBLHFCQUdBSixFQUFBLGVBQUFuQixXQUFBLENBQ0FhLFdBQUEsV0FDQXFCLGlCQUFBLEVBQ0FqQyxTQUFBLEtBQ0FPLGdCQUFBLENBQUEsU0FBQSxVQUFBLE9BQUEsU0FBQSxNQUFBLE9BQ0EsT0FBQSxTQUFBLFdBQUEsVUFBQSxTQUFBLFdBQ0EyQixhQUFBLEVBQ0FDLFlBQUEsRUFDQUMsVUFBQSxXQUNBQyxXQUFBLFdBQ0FDLFlBQUEsV0FDQXBCLEVBQUEsd0JBQUFDLFFBQUFhLEdBQ0FkLEVBQUEsdUJBQUFDLFFBQUFhLEtBQ0EsSUFHQU8sa0JBQUEsV0FDQUQsWUFBQSxXQUNBcEIsRUFBQSx3QkFBQUMsUUFBQWEsR0FDQWQsRUFBQSx1QkFBQUMsUUFBQWEsS0FDQSxNQUlBZCxFQUFBLHVCQUFBbkIsV0FBQSxDQUNBYSxXQUFBLFdBQ0FxQixpQkFBQSxFQUNBakMsU0FBQSxLQUNBTyxnQkFBQSxDQUFBLFNBQUEsVUFBQSxPQUFBLFNBQUEsTUFBQSxPQUNBLE9BQUEsU0FBQSxXQUFBLFVBQUEsU0FBQSxXQUNBMkIsYUFBQSxFQUNBQyxZQUFBLEVBQ0FDLFVBQUEsV0FFQUcsa0JBQUEsV0FDQUQsWUFBQSxXQUNBcEIsRUFBQSx3QkFBQUMsUUFBQWEsR0FDQWQsRUFBQSx1QkFBQUMsUUFBQWEsS0FDQSxJQUdBUSxTQUFBLFdBQ0FGLFlBQUEsV0FDQXBCLEVBQUEsd0JBQUFDLFFBQUFhLEdBQ0FkLEVBQUEsdUJBQUFDLFFBQUFhLEtBQ0EsTUFJQWQsRUFBQSw4QkFBQW5CLFdBQUEsQ0FDQWEsV0FBQSxXQUNBcUIsaUJBQUEsRUFDQWpDLFNBQUEsS0FDQU8sZ0JBQUEsQ0FBQSxTQUFBLFVBQUEsT0FBQSxTQUFBLE1BQUEsT0FDQSxPQUFBLFNBQUEsV0FBQSxVQUFBLFNBQUEsV0FDQTJCLGFBQUEsRUFDQUMsWUFBQSxFQUNBQyxVQUFBLFdBRUFHLGtCQUFBLFdBQ0FELFlBQUEsV0FDQXBCLEVBQUEsd0JBQUFDLFFBQUFhLEdBQ0FkLEVBQUEsdUJBQUFDLFFBQUFhLEtBQ0EsSUFHQVEsU0FBQSxXQUNBRixZQUFBLFdBQ0FwQixFQUFBLHdCQUFBQyxRQUFBYSxHQUNBZCxFQUFBLHVCQUFBQyxRQUFBYSxLQUNBLE1BSUFkLEVBQUEsNkJBQUFuQixXQUFBLENBQ0EwQyxNQUFBLFNBQ0E3QixXQUFBLFdBQ0FxQixpQkFBQSxFQUNBakMsU0FBQSxLQUNBTyxnQkFBQSxDQUFBLFNBQUEsVUFBQSxPQUFBLFNBQUEsTUFBQSxPQUNBLE9BQUEsU0FBQSxXQUFBLFVBQUEsU0FBQSxXQUNBMkIsYUFBQSxFQUNBQyxZQUFBLEVBQ0FDLFVBQUEsV0FFQUcsa0JBQUEsV0FDQUQsWUFBQSxXQUNBcEIsRUFBQSx3QkFBQUMsUUFBQWEsR0FDQWQsRUFBQSx1QkFBQUMsUUFBQWEsS0FDQSxJQUdBUSxTQUFBLFNBQUFFLEVBQUFDLEdBQ0FDLFFBQUFDLElBQUFGLEdBQ0FMLFlBQUEsV0FFQXBCLEVBQUEsNkJBQUFXLEtBQUEsd0JBQUFWLFFBQUFhLEdBQ0FkLEVBQUEsNkJBQUFXLEtBQUEsdUJBQUFWLFFBQUFhLEtBQ0EsTUFHQUssV0FBQSxTQUFBSyxFQUFBQyxHQUNBQyxRQUFBQyxJQUFBRixNQUlBLElBQUFHLEVBQUFDLFNBQ0FDLEVBQUFGLEVBQUFHLE9BQUEsTUFDQUMsRUFBQUosRUFBQUcsT0FBQSxNQUNBRSxFQUFBTCxFQUFBRyxPQUFBLFFBQ0FHLEVBQUEsR0FDQUMsRUFBQSxHQUNBQyxFQUFBLEdBR0FGLEVBREEsT0FBQUosRUFDQSxNQUFBRSxFQUFBLElBQUFDLEVBRUEsTUFBQUQsRUFBQSxJQUFBQyxFQUlBRyxFQURBLE9BQUFOLEVBQ0EsS0FFQSxLQUlBSyxFQURBTCxFQUFBLEdBQ0EsQ0FBQSxNQUFBRSxFQUFBLElBQUFDLEVBQUEsTUFBQUQsRUFBQSxJQUFBQyxHQUNBLENBQUEsTUFBQUQsRUFBQSxJQUFBQyxFQUFBLE1BQUFELEVBQUEsSUFBQUMsR0FFQWpDLEVBQUEsdUJBQUFuQixXQUFBLFVBQUFxRCxHQUNBbEMsRUFBQSw4QkFBQW5CLFdBQUEsVUFBQXFELEdBQ0FsQyxFQUFBLDZCQUFBbkIsV0FBQSxVQUFBc0QsR0FJQW5DLEVBQUEsMkRBQUFxQyxNQUFBLFdBQ0FyQyxFQUFBUyxNQUFBNkIsU0FBQUYsR0FDQXBDLEVBQUFTLE1BQUE4QixTQUFBLGNBTUF2QyxFQUFBLHdCQUFBQyxRQUFBYSxHQUNBZCxFQUFBLHVCQUFBQyxRQUFBYSxHQUVBZCxFQUFBLGVBQUFuQixXQUFBLFdBRUFtQixFQUFBLGVBQUF3QyxVQUFBLGFBQUEsQ0FFQUMsWUFBQSxHQUNBQyxpQkFBQSxFQUNBQyxpQkFBQSxFQUNBQyxZQUFBLElBSUE1QyxFQUFBLGVBQUFLLEdBQUEsU0FBQSxTQUFBQyxHQUNBLElBQUF1QyxFQUFBN0MsRUFBQU0sRUFBQXVDLFFBR0EsSUFGQUEsRUFBQUMsTUFFQUMsUUFDQUYsRUFBQUcsU0FBQVQsU0FBQSx1QkFJQXZDLEVBQUEsZUFBQUssR0FBQSxRQUFBLFNBQUFDLEdBQ0EsSUFBQXVDLEVBQUE3QyxFQUFBTSxFQUFBdUMsUUFDQUEsRUFBQUMsTUFFQUQsRUFBQUcsU0FBQUMsWUFBQSx1QkFHQWpELEVBQUEsZUFBQUssR0FBQSxTQUFBLFNBQUFDLEdBQ0EsSUFBQXVDLEVBQUE3QyxFQUFBTSxFQUFBdUMsUUFDQUEsRUFBQUMsTUFFQUMsT0FBQSxFQUNBRixFQUFBRyxTQUFBQyxZQUFBLG9CQUVBSixFQUFBRyxTQUFBVCxTQUFBLG9CQUdBVixPQUFBN0IsRUFBQVMsTUFBQXFDLE1BQUEsY0FBQSxHQUFBSSxZQUVBbEQsRUFBQVMsTUFBQTVCLFdBQUEsUUFDQW1CLEVBQUFTLE1BQUE1QixXQUFBLFlBeUJBbUIsRUFBQSw0QkFBQUMsUUFBQSxDQUNBQyx3QkFBQUMsRUFBQUEsRUFDQUMsaUJBQUEsQ0FBQSxvQkFBQSwrQkFDQStDLGVBQUEsSUFDQTlDLEdBQUEsbUJBQUEsU0FBQUMsR0FDQUEsRUFBQUMsb0JBQ0FGLEdBQUEsa0JBQUEsU0FBQUMsR0FDQUUsS0FBQVAsUUFBQSxXQUdBRCxFQUFBLDRCQUFBQyxRQUFBLFFBRUFELEVBQUEsMkJBQUFDLFFBQUEsQ0FDQUMsd0JBQUFDLEVBQUFBLEVBQ0FDLGlCQUFBLENBQUEsb0JBQUEsK0JBQ0ErQyxlQUFBLElBQ0E5QyxHQUFBLG1CQUFBLFNBQUFDLEdBQ0FBLEVBQUFDLG9CQUNBRixHQUFBLGtCQUFBLFNBQUFDLEdBQ0FFLEtBQUFQLFFBQUEsV0FHQUQsRUFBQSwyQkFBQUMsUUFBQSxRQWhQQSxHQ0NBRCxFQUFBLHVCQUFBSyxHQUFBLFNBQUEsV0FDQSxJQUFBK0MsRUFBQXBELEVBQUFTLE1BQ0E0QyxFQUFBRCxFQUFBRSxPQUVBRixFQUFBRyxZQUFBLFNBRUFILEVBQUFJLFNBQUEsU0FDQUgsRUFBQXhDLEtBQUEsT0FBQSxRQUVBd0MsRUFBQXhDLEtBQUEsT0FBQSxlQ0dBYixFQUFBLGdCQUFBd0MsVUFBQSxxQkNiQSxXQUNBLElBQUFpQixFQUFBQyxTQUFBQyxjQUFBLGtCQUNBQyxFQUFBRixTQUFBQyxjQUFBLFdBRUEsR0FBQUYsRUFBQSxDQUlBLElBQUFJLEVBQUEsV0FDQSxPQUFBRCxFQUFBRSx3QkFBQUMsT0FBQSxJQUdBQyxFQUFBQyxPQUFBQyxZQUFBTCxJQUVBTSxFQUFBLFlBQ0FWLEVBQUFXLFVBQUFDLFNBQUEsV0FDQVosRUFBQVcsVUFBQUUsSUFBQSxXQW9CQU4sR0FDQUcsSUFHQVQsU0FBQWEsaUJBQUEsVUFoQkEsWUFDQVAsR0FBQUMsT0FBQUMsWUFBQUwsTUFDQU0sSUFDQUgsR0FBQSxHQUdBQSxHQUFBQyxPQUFBQyxZQUFBTCxNQVZBSixFQUFBVyxVQUFBQyxTQUFBLFdBQ0FaLEVBQUFXLFVBQUFJLE9BQUEsVUFXQVIsR0FBQSxNQVNBUCxFQUFBYyxpQkFBQSxTQUFBLFNBQUFqRSxHQUNBQSxFQUFBQyxpQkFDQXFELEVBQUFhLGVBQUEsQ0FBQUMsTUFBQSxRQUFBQyxTQUFBLGVBM0NBLEdDQUEsV0FDQSxJQUFBQyxFQUFBbEIsU0FBQW1CLGlCQUFBLFdBRUEsR0FBQUQsRUFBQSxHQUFBLENBMERBLElBQUFFLEVBQUEsU0FBQXRELEdBQ0EsR0FBQUEsRUFBQXVELE9BQUF2RCxFQUFBdUQsTUFBQSxHQUFBLENBQ0EsSUFBQUMsRUFBQSxJQUFBQyxXQUVBRCxFQUFBRSxZQUFBLFNBQUE1RSxJQWRBLFNBQUFrQixHQUNBeEIsRUFBQXdCLEdBQUEyRCxRQUFBLHVCQUFBeEUsS0FBQSxtQkFDQTRCLFNBQUEsVUFlQTZDLENBQUE1RCxHQTNDQSxTQUFBQSxHQUNBNkQsRUFBQTdELEdBQ0FiLEtBQUEsaUJBQ0EyQixLQUFBZCxFQUFBdUQsTUFBQSxHQUFBTyxNQXlDQUMsQ0FBQS9ELEdBdENBLFNBQUFBLEdBQ0E2RCxFQUFBN0QsR0FDQWUsU0FBQSxRQXFDQWlELENBQUFoRSxHQXhCQSxTQUFBQSxHQUNBeEIsRUFBQXdCLEdBQUF3QixTQUNBVCxTQUFBLFVBdUJBa0QsQ0FBQWpFLElBR0F3RCxFQUFBVSxXQUFBLFNBQUFwRixLQUdBMEUsRUFBQVcsT0FBQSxTQUFBckYsSUFyQkEsU0FBQWtCLEdBQ0F4QixFQUFBd0IsR0FBQTJELFFBQUEsdUJBQUF4RSxLQUFBLG1CQUNBc0MsWUFBQSxVQTBCQTJDLENBQUFwRSxHQUVBLElBQUFxRSxFQUFBUixFQUFBN0QsR0FDQXNFLEVBQUFELEVBQUE3QyxTQUNBK0MsRUFBQUYsRUFBQUcsT0FBQSxHQUFBLEdBQ0FELEVBQUE5QyxZQUFBLFFBQ0E4QyxFQUFBbEYsS0FBQSxjQUFBLEtBQ0FpRixFQUFBRyxRQUFBRixHQUVBLElBQUFHLEVBQUFsRyxFQUFBd0IsR0FBQXdCLFNBQUFBLFNBRUFtRCxFQURBbkcsRUFBQXdCLEdBQUF3QixTQUNBZ0QsT0FBQSxHQUFBLEdBQ0FHLEVBQUFsRCxZQUFBLFVBQ0FrRCxFQUFBdEYsS0FBQSxhQUFBLEtBQ0FxRixFQUFBRCxRQUFBRSxHQUNBQSxFQUFBQyxTQUFBLFNBQUEsR0FBQTdCLGlCQUFBLFNBQUE4QixHQUlBLENBQUEsWUFBQSxXQUFBLFlBQUEsUUFBQUMsU0FBQSxTQUFBQyxHQUNBSixFQUFBLEdBQUE1QixpQkFBQWdDLEVBQUFDLEdBQUEsTUFHQSxDQUFBLFlBQUEsWUFBQUYsU0FBQSxTQUFBQyxHQUNBSixFQUFBLEdBQUE1QixpQkFBQWdDLEVBQUFFLEdBQUEsTUFHQSxDQUFBLFlBQUEsUUFBQUgsU0FBQSxTQUFBQyxHQUNBSixFQUFBLEdBQUE1QixpQkFBQWdDLEVBQUFHLEdBQUEsTUFFQVAsRUFBQSxHQUFBNUIsaUJBQUEsT0FBQW9DLEdBQUEsSUFHQTNCLEVBQUE0QixjQUFBcEYsRUFBQXVELE1BQUEsTUFJQXNCLEVBQUEsU0FBQS9GLEdBQ0F3RSxFQUFBeEUsRUFBQXVHLGVBQ0FuRixRQUFBQyxJQUFBckIsRUFBQXVHLGdCQW1GQWpDLEVBQUEwQixTQUFBLFNBQUFRLEdBRUEsSUEvQ0FwQyxFQUFBcUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFIQXhDLEVBaURBb0MsRUFqREFDLEVBK0NBLEVBOUNBQyxFQUFBaEgsRUFBQTBFLEdBQUEvRCxLQUFBLGdCQUFBb0csRUFBQSxNQUFBLEdBQ0FFLEVBQUFqSCxFQUFBZ0gsR0FBQXJHLEtBQUEsU0FBQSxHQUNBdUcsRUFBQWxILEVBQUEwRSxHQUFBL0QsS0FBQSxpQkFBQW9HLEVBQUEsTUFBQSxHQUNBL0csRUFBQWtILEdBQUF2RyxLQUFBLGtCQUFBLEdBRUEsQ0FBQSxZQUFBLFdBQUEsWUFBQSxRQUFBMkYsU0FBQSxTQUFBQyxHQUNBUyxFQUFBekMsaUJBQUFnQyxFQUFBQyxHQUFBLE1BR0EsQ0FBQSxZQUFBLFlBQUFGLFNBQUEsU0FBQUMsR0FDQVMsRUFBQXpDLGlCQUFBZ0MsRUFBQUUsR0FBQSxNQUdBLENBQUEsWUFBQSxRQUFBSCxTQUFBLFNBQUFDLEdBQ0FTLEVBQUF6QyxpQkFBQWdDLEVBQUFHLEdBQUEsTUFHQU0sRUFBQXpDLGlCQUFBLE9BQUFvQyxHQUFBLEdBQ0FNLEVBQUExQyxpQkFBQSxTQUFBOEIsTUE3S0EsU0FBQUcsRUFBQWxHLEdBQ0FBLEVBQUFDLGlCQUNBRCxFQUFBNkcsa0JBR0EsU0FBQVYsRUFBQW5HLEdBQ0FBLEVBQUF1RyxjQUFBekMsVUFBQUUsSUFBQSxhQUdBLFNBQUFvQyxFQUFBcEcsR0FDQUEsRUFBQXVHLGNBQUF6QyxVQUFBSSxPQUFBLGFBR0EsU0FBQWEsRUFBQTdELEdBQ0EsSUFBQTRGLEVBQUFwSCxFQUFBd0IsR0FBQXdCLFNBQUFuQyxLQUFBLGNBQ0EsT0FBQWIsRUFBQXdCLEdBQUEyRCxRQUFBLFdBQUF4RSxLQUFBLGlCQUFBeUcsRUFBQSxNQTRHQSxTQUFBVCxFQUFBckcsR0FDQSxJQUNBeUUsRUFEQXpFLEVBQUErRyxhQUNBdEMsTUFHQXZELEVBREFsQixFQUFBdUcsY0FDQWxELGNBQUEsU0FFQW5DLEVBQUF1RCxPQUFBdkQsRUFBQXVELE1BQUEsS0FDQXZELEVBQUE4RixNQUFBLEdBRUEsVUFBQUMsS0FBQUMsVUFBQUMsYUFDQWpHLEVBQUFrRyxLQUFBLEdBQ0FsRyxFQUFBa0csS0FBQSxTQVFBbEcsRUFBQXVELE1BQUFBLEVBeEJBLFNBQUF2RCxHQUNBc0QsRUFBQXRELEdBd0JBbUcsQ0FBQW5HLElBdkpBLEdDQUEsV0FxQkF4QixFQUFBLFNBQUEsQ0FDQTRILE1BQUEsY0FDQUMsSUFBQSxDQUNBQyxTQUFBLFFBQ0FDLElBQUEsSUFDQUMsS0FBQSxJQUNBQyxNQUFBLFFBQ0FsRSxPQUFBLFFBQ0FtRSxtQkFBQSxPQUNBQyxVQUFBLFNBQ0FDLFNBQUEsUUFHQSxJQUFBQyxFQUFBLFNBQUEvSCxHQUNBQSxFQUFBdUMsT0FBQXlFLE1BQUF2RSxPQUFBLEVBQ0EvQyxFQUFBTSxFQUFBdUMsUUFBQU4sU0FBQSxXQUVBdkMsRUFBQU0sRUFBQXVDLFFBQUFJLFlBQUEsWUFJQWpELEVBQUEwRCxVQUFBNEUsT0FBQSxXQUNBdEksRUFBQSxvQkFBQUMsUUFBQSxDQUVBd0MsWUFBQSwrQkFDQXJDLGlCQUFBLGtCQUNBbUksU0FBQSxDQUNBQyxVQUFBLFdBQ0EsTUFBQSxxQkFFQUMsVUFBQSxXQUNBLE1BQUEsa0JBTUF6SSxFQUFBLG9CQUFBSyxHQUFBLGdCQUFBLFdBQ0FMLEVBQUEseUJBQUEwSSxJQUFBLFFBQUFMLEdBQ0FySSxFQUFBLHlCQUFBSyxHQUFBLFFBQUFnSSxNQUdBckksRUFBQSxvQkFBQUssR0FBQSxtQkFBQSxXQUNBTCxFQUFBLHlCQUFBaUQsWUFBQSxjQU9BakQsRUFBQSx5QkFBQUMsUUFBQSxDQUVBd0MsWUFBQSwrQkFDQXJDLGlCQUFBLENBQUEsa0JBQUEsd0JBQUEsMkJBQ0FtSSxTQUFBLENBQ0FDLFVBQUEsV0FDQSxNQUFBLHFCQUVBQyxVQUFBLFdBQ0EsTUFBQSxrQkFJQXBJLEdBQUEsbUJBQUEsU0FBQUMsR0FDQUEsRUFBQUMsb0JBQ0FGLEdBQUEsa0JBQUEsU0FBQUMsR0FDQUUsRUFBQVAsUUFBQSxXQUdBRCxFQUFBLHlCQUFBQyxRQUFBLFFBQ0FELEVBQUEsZ0NBQUFLLEdBQUEsUUFBQWdJLEdBTUFySSxFQUFBLDhCQUFBQyxRQUFBLENBRUF3QyxZQUFBLCtCQUNBckMsaUJBQUEsQ0FDQSxrQkFDQSwwQkFDQSw4QkFFQW1JLFNBQUEsQ0FDQUMsVUFBQSxXQUNBLE1BQUEscUJBRUFDLFVBQUEsV0FDQSxNQUFBLGdCQUdBRSxLQUFBLENBQ0FDLE1BQUEsSUFDQUMsSUFBQSw4REFHQXhJLEdBQUEsbUJBQUEsU0FBQUMsR0FDQUEsRUFBQUMsb0JBQ0FGLEdBQUEsa0JBQUEsU0FBQUMsR0FDQUUsRUFBQVAsUUFBQSxXQUdBLElBQUE2SSxFQUFBLElBQUFDLE1BQUEsUUFBQSxDQUNBQyxTQUFBLEVBQ0FDLFlBQUEsSUFHQWpKLEVBQUEsOEJBQUFDLFFBQUEsUUFDQW1CLFlBQUEsV0FDQXBCLEVBQUEscUNBQUEsR0FBQWtKLGNBQUFKLEtBQ0EsS0FLQTlJLEVBQUEsOEJBQUFDLFFBQUEsQ0FFQUcsaUJBQUEsQ0FBQSxrQkFBQSwwQkFBQSw4QkFDQW1JLFNBQUEsQ0FDQUMsVUFBQSxXQUNBLE1BQUEscUJBRUFDLFVBQUEsV0FDQSxNQUFBLGtCQUlBcEksR0FBQSxtQkFBQSxTQUFBQyxHQUNBQSxFQUFBQyxvQkFDQUYsR0FBQSxrQkFBQSxTQUFBQyxHQUNBRSxFQUFBUCxRQUFBLFdBR0FELEVBQUEsOEJBQUFDLFFBQUEsUUFDQUQsRUFBQSxxQ0FBQThDLElBQUEsVUFDQTlDLEVBQUEscUNBQUEsR0FBQWtKLGNBQUFKLEdBSUE5SSxFQUFBLHFCQUFBQyxRQUFBLENBQ0F3QyxZQUFBLG1CQUNBdkMsd0JBQUFDLEVBQUFBLEVBQ0FDLGlCQUFBLENBQUEsa0JBQUEsNkJBR0EsSUFBQUksRUFBQVIsRUFBQSwwQkFBQUMsUUFBQSxDQUNBd0MsWUFBQSxtQkFDQXZDLHdCQUFBQyxFQUFBQSxFQUNBQyxpQkFBQSxDQUNBLGtCQUNBLDBCQUNBLDJCQUVBK0MsZUFBQSxJQUNBOUMsR0FBQSxtQkFBQSxTQUFBQyxHQUNBQSxFQUFBQyxvQkFDQUYsR0FBQSxrQkFBQSxTQUFBQyxHQUNBRSxFQUFBUCxRQUFBLFdBR0FPLEVBQUFQLFFBQUEsUUFRQUQsRUFBQSxvQkFBQUMsUUFBQSxDQUVBd0MsWUFBQSxvQkFDQXJDLGlCQUFBLENBQ0Esa0JBQ0EseUJBRUFtSSxTQUFBLENBQ0FDLFVBQUEsV0FDQSxNQUFBLHFCQUVBQyxVQUFBLFdBQ0EsTUFBQSxrQkFNQXpJLEVBQUEsb0JBQUFLLEdBQUEsZ0JBQUEsV0FDQUwsRUFBQSx5QkFBQTBJLElBQUEsUUFBQUwsR0FDQXJJLEVBQUEseUJBQUFLLEdBQUEsUUFBQWdJLE1BR0FySSxFQUFBLG9CQUFBSyxHQUFBLG1CQUFBLFdBQ0FMLEVBQUEseUJBQUFpRCxZQUFBLGNBSUFqRCxFQUFBLHlCQUFBQyxRQUFBLENBRUF3QyxZQUFBLG9CQUNBMEcsdUJBQUEsRUFDQS9JLGlCQUFBLENBQ0Esa0JBQ0EsMEJBQ0EseUJBRUFtSSxTQUFBLENBQ0FDLFVBQUEsV0FDQSxNQUFBLHFCQUVBQyxVQUFBLFdBQ0EsTUFBQSxlQUVBVyxnQkFBQSxTQUFBOUksR0FDQSxNQUFBLGdDQUFBQSxFQUFBK0ksWUFJQWhKLEdBQUEsbUJBQUEsU0FBQUMsR0FDQUEsRUFBQUMsb0JBQ0FGLEdBQUEsa0JBQUEsU0FBQUMsR0FDQUUsRUFBQVAsUUFBQSxXQUdBRCxFQUFBLHlCQUFBQyxRQUFBLFFBVUFELEVBQUEsOEJBQUFDLFFBQUEsQ0FFQXdDLFlBQUEsb0JBQ0FyQyxpQkFBQSxDQUNBLGtCQUNBLDBCQUNBLG9DQUVBbUksU0FBQSxDQUNBQyxVQUFBLFdBQ0EsTUFBQSxxQkFFQUMsVUFBQSxXQUNBLE1BQUEsZ0JBR0FFLEtBQUEsQ0FDQUMsTUFBQSxJQUNBQyxJQUFBLDhEQUdBeEksR0FBQSxtQkFBQSxTQUFBQyxHQUNBQSxFQUFBQyxvQkFDQUYsR0FBQSxrQkFBQSxTQUFBQyxHQUNBRSxFQUFBUCxRQUFBLFdBR0E2SSxFQUFBLElBQUFDLE1BQUEsUUFBQSxDQUNBQyxTQUFBLEVBQ0FDLFlBQUEsSUFHQWpKLEVBQUEsOEJBQUFDLFFBQUEsUUFDQW1CLFlBQUEsV0FDQXBCLEVBQUEsNENBQUEsR0FBQWtKLGNBQUFKLEtBQ0EsS0FVQTlJLEVBQUEsOEJBQUFDLFFBQUEsQ0FFQUcsaUJBQUEsQ0FDQSxrQkFDQSwwQkFDQSxvQ0FFQW1JLFNBQUEsQ0FDQUMsVUFBQSxXQUNBLE1BQUEscUJBRUFDLFVBQUEsV0FDQSxNQUFBLGtCQUlBcEksR0FBQSxtQkFBQSxTQUFBQyxHQUNBQSxFQUFBQyxvQkFDQUYsR0FBQSxrQkFBQSxTQUFBQyxHQUNBRSxFQUFBUCxRQUFBLFdBR0FELEVBQUEsOEJBQUFDLFFBQUEsUUFDQUQsRUFBQSwyQ0FBQThDLElBQUEsVUFDQTlDLEVBQUEsMkNBQUEsR0FBQWtKLGNBQUFKLE1BVUExSCxZQUFBLFdBQ0E2QyxPQUFBcUYsU0FBQSxFQUFBLEdBQ0F0SixFQUFBLGNBQUF1SixTQUNBLEtBalZBIiwiZmlsZSI6InNjcmlwdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuLyogUnVzc2lhbiAoVVRGLTgpIGluaXRpYWxpc2F0aW9uIGZvciB0aGUgalF1ZXJ5IFVJIGRhdGUgcGlja2VyIHBsdWdpbi4gKi9cblxuLyogV3JpdHRlbiBieSBBbmRyZXcgU3Ryb21ub3YgKHN0cm9tbm92QGdtYWlsLmNvbSkuICovXG4oZnVuY3Rpb24gKGZhY3RvcnkpIHtcbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG4gICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgIGRlZmluZShbXCIuLi93aWRnZXRzL2RhdGVwaWNrZXJcIl0sIGZhY3RvcnkpO1xuICB9IGVsc2Uge1xuICAgIC8vIEJyb3dzZXIgZ2xvYmFsc1xuICAgIGZhY3RvcnkoalF1ZXJ5LmRhdGVwaWNrZXIpO1xuICB9XG59KShmdW5jdGlvbiAoZGF0ZXBpY2tlcikge1xuICBkYXRlcGlja2VyLnJlZ2lvbmFsLnJ1ID0ge1xuICAgIGNsb3NlVGV4dDogXCLQl9Cw0LrRgNGL0YLRjFwiLFxuICAgIHByZXZUZXh0OiBcIiYjeDNDO9Cf0YDQtdC0XCIsXG4gICAgbmV4dFRleHQ6IFwi0KHQu9C10LQmI3gzRTtcIixcbiAgICBjdXJyZW50VGV4dDogXCLQodC10LPQvtC00L3Rj1wiLFxuICAgIG1vbnRoTmFtZXM6IFtcItCv0L3QstCw0YDRjFwiLCBcItCk0LXQstGA0LDQu9GMXCIsIFwi0JzQsNGA0YJcIiwgXCLQkNC/0YDQtdC70YxcIiwgXCLQnNCw0LlcIiwgXCLQmNGO0L3RjFwiLCBcItCY0Y7Qu9GMXCIsIFwi0JDQstCz0YPRgdGCXCIsIFwi0KHQtdC90YLRj9Cx0YDRjFwiLCBcItCe0LrRgtGP0LHRgNGMXCIsIFwi0J3QvtGP0LHRgNGMXCIsIFwi0JTQtdC60LDQsdGA0YxcIl0sXG4gICAgbW9udGhOYW1lc1Nob3J0OiBbXCLQr9C90LJcIiwgXCLQpNC10LJcIiwgXCLQnNCw0YBcIiwgXCLQkNC/0YBcIiwgXCLQnNCw0LlcIiwgXCLQmNGO0L1cIiwgXCLQmNGO0LtcIiwgXCLQkNCy0LNcIiwgXCLQodC10L1cIiwgXCLQntC60YJcIiwgXCLQndC+0Y9cIiwgXCLQlNC10LpcIl0sXG4gICAgZGF5TmFtZXM6IFtcItCy0L7RgdC60YDQtdGB0LXQvdGM0LVcIiwgXCLQv9C+0L3QtdC00LXQu9GM0L3QuNC6XCIsIFwi0LLRgtC+0YDQvdC40LpcIiwgXCLRgdGA0LXQtNCwXCIsIFwi0YfQtdGC0LLQtdGA0LNcIiwgXCLQv9GP0YLQvdC40YbQsFwiLCBcItGB0YPQsdCx0L7RgtCwXCJdLFxuICAgIGRheU5hbWVzU2hvcnQ6IFtcItCy0YHQulwiLCBcItC/0L3QtFwiLCBcItCy0YLRgFwiLCBcItGB0YDQtFwiLCBcItGH0YLQslwiLCBcItC/0YLQvVwiLCBcItGB0LHRglwiXSxcbiAgICBkYXlOYW1lc01pbjogW1wi0JLRgVwiLCBcItCf0L1cIiwgXCLQktGCXCIsIFwi0KHRgFwiLCBcItCn0YJcIiwgXCLQn9GCXCIsIFwi0KHQsVwiXSxcbiAgICB3ZWVrSGVhZGVyOiBcItCd0LXQtFwiLFxuICAgIGRhdGVGb3JtYXQ6IFwiZGQubW0ueXlcIixcbiAgICBmaXJzdERheTogMSxcbiAgICBpc1JUTDogZmFsc2UsXG4gICAgc2hvd01vbnRoQWZ0ZXJZZWFyOiBmYWxzZSxcbiAgICB5ZWFyU3VmZml4OiBcIlwiXG4gIH07XG4gIGRhdGVwaWNrZXIuc2V0RGVmYXVsdHMoZGF0ZXBpY2tlci5yZWdpb25hbC5ydSk7XG4gIHJldHVybiBkYXRlcGlja2VyLnJlZ2lvbmFsLnJ1O1xufSk7XG5cbihmdW5jdGlvbiAoKSB7XG4gICQoJy5kcm9wZG93bjpub3QoLmRyb3Bkb3duLW9wZW5lZCcpLnNlbGVjdDIoe1xuICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcbiAgICBkcm9wZG93bkNzc0NsYXNzOiBbJ2NhbGVuZGFyLWRyb3Bkb3duJ11cbiAgfSk7XG4gICQoJy5kcm9wZG93bi1vcGVuZWQnKS5zZWxlY3QyKHtcbiAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHksXG4gICAgZHJvcGRvd25Dc3NDbGFzczogWydjYWxlbmRhci1kcm9wZG93bicsICdjYWxlbmRhci1kcm9wZG93bi1wZXJtYW5lbnQnXVxuICB9KS5vbihcInNlbGVjdDI6Y2xvc2luZ1wiLCBmdW5jdGlvbiAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgfSkub24oXCJzZWxlY3QyOmNsb3NlZFwiLCBmdW5jdGlvbiAoZSkge1xuICAgIGxpc3Quc2VsZWN0MihcIm9wZW5cIik7XG4gIH0pO1xuICAkKCcuZHJvcGRvd24nKS5vbignc2VsZWN0MjpjbG9zZScsIGZ1bmN0aW9uICgpIHtcbiAgICAkKHRoaXMpLm5leHQoKS5maW5kKCcuc2VsZWN0Mi1zZWxlY3Rpb24nKS5ibHVyKCk7XG4gIH0pO1xuICAkKCcuZHJvcGRvd24gKyAuc2VsZWN0MiAuc2VsZWN0Mi1zZWxlY3Rpb25fX3JlbmRlcmVkJykuYXR0cigndGFiaW5kZXgnLCAnLTEnKTtcbiAgJCgnLmRyb3Bkb3duLW9wZW5lZCcpLnNlbGVjdDIoJ29wZW4nKTtcbn0pKCk7XG5cbihmdW5jdGlvbiAoKSB7XG4gIHZhciBzZWxlY3RPcHQgPSB7XG4gICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5LFxuICAgIGRyb3Bkb3duQ3NzQ2xhc3M6ICdjYWxlbmRhci1kcm9wZG93bidcbiAgfTtcbiAgJCgnLmlucHV0LWRhdGUnKS5kYXRlcGlja2VyKHtcbiAgICBkYXRlRm9ybWF0OiAnZGQubW0ueXknLFxuICAgIHNob3dPdGhlck1vbnRoczogdHJ1ZSxcbiAgICByZWdpb25hbDogJ3J1JyxcbiAgICBtb250aE5hbWVzU2hvcnQ6IFtcItCv0L3QstCw0YDRjFwiLCBcItCk0LXQstGA0LDQu9GMXCIsIFwi0JzQsNGA0YJcIiwgXCLQkNC/0YDQtdC70YxcIiwgXCLQnNCw0LlcIiwgXCLQmNGO0L3RjFwiLCBcItCY0Y7Qu9GMXCIsIFwi0JDQstCz0YPRgdGCXCIsIFwi0KHQtdC90YLRj9Cx0YDRjFwiLCBcItCe0LrRgtGP0LHRgNGMXCIsIFwi0J3QvtGP0LHRgNGMXCIsIFwi0JTQtdC60LDQsdGA0YxcIl0sXG4gICAgY2hhbmdlTW9udGg6IHRydWUsXG4gICAgY2hhbmdlWWVhcjogdHJ1ZSxcbiAgICB5ZWFyUmFuZ2U6ICcxOTAwOisxMCcsXG4gICAgYmVmb3JlU2hvdzogZnVuY3Rpb24gYmVmb3JlU2hvdygpIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcudWktZGF0ZXBpY2tlci1tb250aCcpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXIteWVhcicpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgIH0sIDApO1xuICAgIH0sXG4gICAgb25DaGFuZ2VNb250aFllYXI6IGZ1bmN0aW9uIG9uQ2hhbmdlTW9udGhZZWFyKCkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy51aS1kYXRlcGlja2VyLW1vbnRoJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgICAkKCcudWktZGF0ZXBpY2tlci15ZWFyJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgfSwgMCk7XG4gICAgfVxuICB9KTtcbiAgJCgnLmlucHV0LWRhdGUtdHJpZ2dlcicpLmRhdGVwaWNrZXIoe1xuICAgIGRhdGVGb3JtYXQ6ICdkZC5tbS55eScsXG4gICAgc2hvd090aGVyTW9udGhzOiB0cnVlLFxuICAgIHJlZ2lvbmFsOiAncnUnLFxuICAgIG1vbnRoTmFtZXNTaG9ydDogW1wi0K/QvdCy0LDRgNGMXCIsIFwi0KTQtdCy0YDQsNC70YxcIiwgXCLQnNCw0YDRglwiLCBcItCQ0L/RgNC10LvRjFwiLCBcItCc0LDQuVwiLCBcItCY0Y7QvdGMXCIsIFwi0JjRjtC70YxcIiwgXCLQkNCy0LPRg9GB0YJcIiwgXCLQodC10L3RgtGP0LHRgNGMXCIsIFwi0J7QutGC0Y/QsdGA0YxcIiwgXCLQndC+0Y/QsdGA0YxcIiwgXCLQlNC10LrQsNCx0YDRjFwiXSxcbiAgICBjaGFuZ2VNb250aDogdHJ1ZSxcbiAgICBjaGFuZ2VZZWFyOiB0cnVlLFxuICAgIHllYXJSYW5nZTogJzE5MDA6KzEwJyxcbiAgICBvbkNoYW5nZU1vbnRoWWVhcjogZnVuY3Rpb24gb25DaGFuZ2VNb250aFllYXIoKSB7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXItbW9udGgnKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICAgICAgICQoJy51aS1kYXRlcGlja2VyLXllYXInKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICAgICB9LCAwKTtcbiAgICB9LFxuICAgIG9uU2VsZWN0OiBmdW5jdGlvbiBvblNlbGVjdCgpIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcudWktZGF0ZXBpY2tlci1tb250aCcpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXIteWVhcicpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgIH0sIDApO1xuICAgIH1cbiAgfSk7XG4gICQoJy5pbnB1dC1kYXRlLXRyaWdnZXItc2luZ2xlJykuZGF0ZXBpY2tlcih7XG4gICAgZGF0ZUZvcm1hdDogJ2RkLm1tLnl5JyxcbiAgICBzaG93T3RoZXJNb250aHM6IHRydWUsXG4gICAgcmVnaW9uYWw6ICdydScsXG4gICAgbW9udGhOYW1lc1Nob3J0OiBbXCLQr9C90LLQsNGA0YxcIiwgXCLQpNC10LLRgNCw0LvRjFwiLCBcItCc0LDRgNGCXCIsIFwi0JDQv9GA0LXQu9GMXCIsIFwi0JzQsNC5XCIsIFwi0JjRjtC90YxcIiwgXCLQmNGO0LvRjFwiLCBcItCQ0LLQs9GD0YHRglwiLCBcItCh0LXQvdGC0Y/QsdGA0YxcIiwgXCLQntC60YLRj9Cx0YDRjFwiLCBcItCd0L7Rj9Cx0YDRjFwiLCBcItCU0LXQutCw0LHRgNGMXCJdLFxuICAgIGNoYW5nZU1vbnRoOiB0cnVlLFxuICAgIGNoYW5nZVllYXI6IHRydWUsXG4gICAgeWVhclJhbmdlOiAnMTkwMDorMTAnLFxuICAgIG9uQ2hhbmdlTW9udGhZZWFyOiBmdW5jdGlvbiBvbkNoYW5nZU1vbnRoWWVhcigpIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcudWktZGF0ZXBpY2tlci1tb250aCcpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXIteWVhcicpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgIH0sIDApO1xuICAgIH0sXG4gICAgb25TZWxlY3Q6IGZ1bmN0aW9uIG9uU2VsZWN0KCkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy51aS1kYXRlcGlja2VyLW1vbnRoJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgICAkKCcudWktZGF0ZXBpY2tlci15ZWFyJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgfSwgMCk7XG4gICAgfVxuICB9KTtcbiAgJCgnLmlucHV0LWRhdGUtdHJpZ2dlci1yYW5nZScpLmRhdGVwaWNrZXIoe1xuICAgIHJhbmdlOiAncGVyaW9kJyxcbiAgICBkYXRlRm9ybWF0OiAnZGQubW0ueXknLFxuICAgIHNob3dPdGhlck1vbnRoczogdHJ1ZSxcbiAgICByZWdpb25hbDogJ3J1JyxcbiAgICBtb250aE5hbWVzU2hvcnQ6IFtcItCv0L3QstCw0YDRjFwiLCBcItCk0LXQstGA0LDQu9GMXCIsIFwi0JzQsNGA0YJcIiwgXCLQkNC/0YDQtdC70YxcIiwgXCLQnNCw0LlcIiwgXCLQmNGO0L3RjFwiLCBcItCY0Y7Qu9GMXCIsIFwi0JDQstCz0YPRgdGCXCIsIFwi0KHQtdC90YLRj9Cx0YDRjFwiLCBcItCe0LrRgtGP0LHRgNGMXCIsIFwi0J3QvtGP0LHRgNGMXCIsIFwi0JTQtdC60LDQsdGA0YxcIl0sXG4gICAgY2hhbmdlTW9udGg6IHRydWUsXG4gICAgY2hhbmdlWWVhcjogdHJ1ZSxcbiAgICB5ZWFyUmFuZ2U6ICcxOTAwOisxMCcsXG4gICAgb25DaGFuZ2VNb250aFllYXI6IGZ1bmN0aW9uIG9uQ2hhbmdlTW9udGhZZWFyKCkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy51aS1kYXRlcGlja2VyLW1vbnRoJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgICAkKCcudWktZGF0ZXBpY2tlci15ZWFyJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgfSwgMCk7XG4gICAgfSxcbiAgICBvblNlbGVjdDogZnVuY3Rpb24gb25TZWxlY3QoaW5wdXQsIGluc3QpIHtcbiAgICAgIGNvbnNvbGUubG9nKGluc3QpO1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy5pbnB1dC1kYXRlLXRyaWdnZXItcmFuZ2UnKS5maW5kKCcudWktZGF0ZXBpY2tlci1tb250aCcpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgICAgJCgnLmlucHV0LWRhdGUtdHJpZ2dlci1yYW5nZScpLmZpbmQoJy51aS1kYXRlcGlja2VyLXllYXInKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICAgICB9LCAxMDApO1xuICAgIH0sXG4gICAgYmVmb3JlU2hvdzogZnVuY3Rpb24gYmVmb3JlU2hvdyhpbnB1dCwgaW5zdCkge1xuICAgICAgY29uc29sZS5sb2coaW5zdCk7XG4gICAgfVxuICB9KTtcbiAgdmFyIGN1cnJlbnQgPSBtb21lbnQoKTtcbiAgdmFyIGRheSA9IGN1cnJlbnQuZm9ybWF0KCdERCcpO1xuICB2YXIgbW9udGggPSBjdXJyZW50LmZvcm1hdCgnTU0nKTtcbiAgdmFyIHllYXIgPSBjdXJyZW50LmZvcm1hdCgnWVlZWScpO1xuICB2YXIgcGlja2VkRGF0ZSA9ICcnO1xuICB2YXIgcGlja2VkUGVyaW9kID0gW107XG4gIHZhciBob3ZlckRhdGUgPSAnJztcblxuICBpZiAoZGF5ICE9PSAnMTUnKSB7XG4gICAgcGlja2VkRGF0ZSA9IDE1ICsgJy4nICsgbW9udGggKyAnLicgKyB5ZWFyO1xuICB9IGVsc2Uge1xuICAgIHBpY2tlZERhdGUgPSAxNyArICcuJyArIG1vbnRoICsgJy4nICsgeWVhcjtcbiAgfVxuXG4gIGlmIChkYXkgIT09ICcxMycpIHtcbiAgICBob3ZlckRhdGUgPSAnMTMnO1xuICB9IGVsc2Uge1xuICAgIGhvdmVyRGF0ZSA9ICcxMic7XG4gIH1cblxuICBkYXkgPiAxNSA/IHBpY2tlZFBlcmlvZCA9IFsnMDIuJyArIG1vbnRoICsgJy4nICsgeWVhciwgJzExLicgKyBtb250aCArICcuJyArIHllYXJdIDogcGlja2VkUGVyaW9kID0gWycxNy4nICsgbW9udGggKyAnLicgKyB5ZWFyLCAnMjYuJyArIG1vbnRoICsgJy4nICsgeWVhcl07XG4gICQoJy5pbnB1dC1kYXRlLXRyaWdnZXInKS5kYXRlcGlja2VyKCdzZXREYXRlJywgcGlja2VkRGF0ZSk7XG4gICQoJy5pbnB1dC1kYXRlLXRyaWdnZXItc2luZ2xlJykuZGF0ZXBpY2tlcignc2V0RGF0ZScsIHBpY2tlZERhdGUpO1xuICAkKCcuaW5wdXQtZGF0ZS10cmlnZ2VyLXJhbmdlJykuZGF0ZXBpY2tlcignc2V0RGF0ZScsIHBpY2tlZFBlcmlvZCk7XG4gICQoJy5pbnB1dC1kYXRlLXRyaWdnZXItc2luZ2xlIC51aS1kYXRlcGlja2VyLWNhbGVuZGFyIHRkIGEnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoJCh0aGlzKS50ZXh0KCkgPT09IGhvdmVyRGF0ZSkge1xuICAgICAgJCh0aGlzKS5hZGRDbGFzcygnaG92ZXJlZCcpO1xuICAgIH1cbiAgfSk7XG4gICQoJy51aS1kYXRlcGlja2VyLW1vbnRoJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAkKCcudWktZGF0ZXBpY2tlci15ZWFyJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAkKCcuaW5wdXQtZGF0ZScpLmRhdGVwaWNrZXIoJ3JlZnJlc2gnKTtcbiAgJCgnLmlucHV0LWRhdGUnKS5pbnB1dG1hc2soXCI5OS45OS45OTk5XCIsIHtcbiAgICAvL21hc2s6ICdtbS9kZC95eXl5JyxcbiAgICBwbGFjZWhvbGRlcjogJycsXG4gICAgc2hvd01hc2tPbkhvdmVyOiBmYWxzZSxcbiAgICBzaG93TWFza09uRm9jdXM6IGZhbHNlLFxuICAgIGppdE1hc2tpbmc6IHRydWVcbiAgfSk7XG4gICQoJy5pbnB1dC1kYXRlJykub24oJ2ZvY3VzJywgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgdGFyZ2V0ID0gJChlLnRhcmdldCk7XG4gICAgdmFyIHZhbCA9IHRhcmdldC52YWwoKTtcblxuICAgIGlmICh2YWwubGVuZ3RoID09PSAwKSB7XG4gICAgICB0YXJnZXQucGFyZW50KCkuYWRkQ2xhc3MoJ2RhdGUtcGxhY2Vob2xkZXInKTtcbiAgICB9XG4gIH0pO1xuICAkKCcuaW5wdXQtZGF0ZScpLm9uKCdibHVyJywgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgdGFyZ2V0ID0gJChlLnRhcmdldCk7XG4gICAgdmFyIHZhbCA9IHRhcmdldC52YWwoKTtcbiAgICB0YXJnZXQucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ2RhdGUtcGxhY2Vob2xkZXInKTtcbiAgfSk7XG4gICQoJy5pbnB1dC1kYXRlJykub24oJ2lucHV0JywgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgdGFyZ2V0ID0gJChlLnRhcmdldCk7XG4gICAgdmFyIHZhbCA9IHRhcmdldC52YWwoKTtcblxuICAgIGlmICh2YWwubGVuZ3RoID4gMCkge1xuICAgICAgdGFyZ2V0LnBhcmVudCgpLnJlbW92ZUNsYXNzKCdkYXRlLXBsYWNlaG9sZGVyJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRhcmdldC5wYXJlbnQoKS5hZGRDbGFzcygnZGF0ZS1wbGFjZWhvbGRlcicpO1xuICAgIH1cblxuICAgIHZhciBpc1ZhbGlkID0gbW9tZW50KCQodGhpcykudmFsKCksICdERC5NTS5ZWVlZJywgdHJ1ZSkuaXNWYWxpZCgpO1xuXG4gICAgaWYgKGlzVmFsaWQpIHtcbiAgICAgICQodGhpcykuZGF0ZXBpY2tlcignaGlkZScpO1xuICAgICAgJCh0aGlzKS5kYXRlcGlja2VyKCdzaG93Jyk7XG4gICAgfVxuICB9KTsgLy8gJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gIC8vICAgZnVuY3Rpb24gZjEoKSB7XG4gIC8vICAgICAkKCcuaW5wdXQtZGF0ZScpLmRhdGVwaWNrZXIoJ3JlZnJlc2gnKTtcbiAgLy8gICB9O1xuICAvLyAgIGZ1bmN0aW9uIGYyKCkge1xuICAvLyAgICAgY29uc29sZS5sb2coJCgnLnVpLWRhdGVwaWNrZXItbW9udGgnKVswXSk7XG4gIC8vICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAvLyAgICAgICAkKCcudWktZGF0ZXBpY2tlci1tb250aCcpLnNlbGVjdDIoKTtcbiAgLy8gICAgIH0sIDUwMDApO1xuICAvLyAgICAgLy8kKCcudWktZGF0ZXBpY2tlci1tb250aCcpLnNlbGVjdDIoKTtcbiAgLy8gICB9O1xuICAvLyAgIHZhciBkZmQgPSAkLkRlZmVycmVkKCk7XG4gIC8vICAgZGZkLmRvbmUoZjEpLmRvbmUoZjIpO1xuICAvLyAgIGRmZC5yZXNvbHZlKCdhJyk7XG4gIC8vIH0pO1xuXG4gICQoJyNjYWxlbmRhci1kcm9wZG93bi1tb250aCcpLnNlbGVjdDIoe1xuICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcbiAgICBkcm9wZG93bkNzc0NsYXNzOiBbJ2NhbGVuZGFyLWRyb3Bkb3duJywgJ2NhbGVuZGFyLWRyb3Bkb3duLXBlcm1hbmVudCddLFxuICAgIGNsb3NlT25TZWxlY3Q6IGZhbHNlXG4gIH0pLm9uKFwic2VsZWN0MjpjbG9zaW5nXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9KS5vbihcInNlbGVjdDI6Y2xvc2VkXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgbGlzdC5zZWxlY3QyKFwib3BlblwiKTtcbiAgfSk7XG4gICQoJyNjYWxlbmRhci1kcm9wZG93bi1tb250aCcpLnNlbGVjdDIoJ29wZW4nKTtcbiAgJCgnI2NhbGVuZGFyLWRyb3Bkb3duLXllYXInKS5zZWxlY3QyKHtcbiAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHksXG4gICAgZHJvcGRvd25Dc3NDbGFzczogWydjYWxlbmRhci1kcm9wZG93bicsICdjYWxlbmRhci1kcm9wZG93bi1wZXJtYW5lbnQnXSxcbiAgICBjbG9zZU9uU2VsZWN0OiBmYWxzZVxuICB9KS5vbihcInNlbGVjdDI6Y2xvc2luZ1wiLCBmdW5jdGlvbiAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgfSkub24oXCJzZWxlY3QyOmNsb3NlZFwiLCBmdW5jdGlvbiAoZSkge1xuICAgIGxpc3Quc2VsZWN0MihcIm9wZW5cIik7XG4gIH0pO1xuICAkKCcjY2FsZW5kYXItZHJvcGRvd24teWVhcicpLnNlbGVjdDIoJ29wZW4nKTtcbn0pKCk7XG5cbihmdW5jdGlvbiAoKSB7XG4gICQoJy5pbnB1dC1wYXNzd29yZC1idG4nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyICRidG4gPSAkKHRoaXMpO1xuICAgIHZhciAkaW5wdXQgPSAkYnRuLnByZXYoKTtcbiAgICAkYnRuLnRvZ2dsZUNsYXNzKCdzaG93bicpO1xuXG4gICAgaWYgKCRidG4uaGFzQ2xhc3MoJ3Nob3duJykpIHtcbiAgICAgICRpbnB1dC5hdHRyKCd0eXBlJywgJ3RleHQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGlucHV0LmF0dHIoJ3R5cGUnLCAncGFzc3dvcmQnKTtcbiAgICB9XG4gIH0pO1xufSkoKTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgLy8gY29uc3QgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmlucHV0LXBob25lJyk7XG4gIC8vIGlmICghaW5wdXRzWzBdKSB7XG4gIC8vICAgcmV0dXJuO1xuICAvLyB9XG4gIC8vIGNvbnN0IGltID0gbmV3IElucHV0bWFzayhcIis3KDk5OSkgOTk5LTk5LTk5XCIpO1xuICAvLyBpbnB1dHMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gIC8vICAgaW0ubWFzayhpdGVtKTtcbiAgLy8gfSlcbiAgJCgnLmlucHV0LXBob25lJykuaW5wdXRtYXNrKCcrNyg5OTkpIDk5OS05OS05OScpO1xufSkoKTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIHNjcm9sbEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zY3JvbGwtdG8tdG9wJyk7XG4gIHZhciBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyJyk7XG5cbiAgaWYgKCFzY3JvbGxCdG4pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgZ2V0SGVhZGVySGVpZ2h0ID0gZnVuY3Rpb24gZ2V0SGVhZGVySGVpZ2h0KCkge1xuICAgIHJldHVybiBoZWFkZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0ICsgNTA7XG4gIH07XG5cbiAgdmFyIGlzU2Nyb2xsZWQgPSB3aW5kb3cucGFnZVlPZmZzZXQgPiBnZXRIZWFkZXJIZWlnaHQoKTtcblxuICB2YXIgc2hvd0J0biA9IGZ1bmN0aW9uIHNob3dCdG4oKSB7XG4gICAgIXNjcm9sbEJ0bi5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpICYmIHNjcm9sbEJ0bi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgfTtcblxuICB2YXIgaGlkZUhlYWRlciA9IGZ1bmN0aW9uIGhpZGVIZWFkZXIoKSB7XG4gICAgc2Nyb2xsQnRuLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykgJiYgc2Nyb2xsQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICB9O1xuXG4gIHZhciBvblNjcm9sbCA9IGZ1bmN0aW9uIG9uU2Nyb2xsKCkge1xuICAgIGlmICghaXNTY3JvbGxlZCAmJiB3aW5kb3cucGFnZVlPZmZzZXQgPiBnZXRIZWFkZXJIZWlnaHQoKSkge1xuICAgICAgc2hvd0J0bigpO1xuICAgICAgaXNTY3JvbGxlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKGlzU2Nyb2xsZWQgJiYgd2luZG93LnBhZ2VZT2Zmc2V0IDwgZ2V0SGVhZGVySGVpZ2h0KCkpIHtcbiAgICAgIGhpZGVIZWFkZXIoKTtcbiAgICAgIGlzU2Nyb2xsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgaWYgKGlzU2Nyb2xsZWQpIHtcbiAgICBzaG93QnRuKCk7XG4gIH1cblxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBvblNjcm9sbCk7XG4gIHNjcm9sbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGhlYWRlci5zY3JvbGxJbnRvVmlldyh7XG4gICAgICBibG9jazogXCJzdGFydFwiLFxuICAgICAgYmVoYXZpb3I6IFwic21vb3RoXCJcbiAgICB9KTtcbiAgfSk7XG59KSgpO1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgdXBsb2FkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy51cGxvYWQnKTtcblxuICBpZiAoIXVwbG9hZHNbMF0pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBmdW5jdGlvbiBwcmV2ZW50RGVmYXVsdHMoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICB9XG5cbiAgO1xuXG4gIGZ1bmN0aW9uIGhpZ2hsaWdodChlKSB7XG4gICAgZS5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZ2hsaWdodCcpO1xuICB9XG5cbiAgO1xuXG4gIGZ1bmN0aW9uIHVuaGlnaGxpZ2h0KGUpIHtcbiAgICBlLmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlnaGxpZ2h0Jyk7XG4gIH1cblxuICA7XG5cbiAgZnVuY3Rpb24gZ2V0UmVzdWx0QmxvY2soaW5wdXQpIHtcbiAgICB2YXIgJGlkeCA9ICQoaW5wdXQpLnBhcmVudCgpLmF0dHIoJ2RhdGEtaW5wdXQnKTtcbiAgICByZXR1cm4gJChpbnB1dCkucGFyZW50cygnLnVwbG9hZCcpLmZpbmQoXCJbZGF0YS1yZXN1bHQ9J1wiICsgJGlkeCArIFwiJ11cIik7XG4gIH1cblxuICA7XG5cbiAgZnVuY3Rpb24gZmlsbFJlc3VsdChpbnB1dCkge1xuICAgIHZhciAkcmVzdWx0ID0gZ2V0UmVzdWx0QmxvY2soaW5wdXQpO1xuICAgIHZhciAkbmFtZSA9ICRyZXN1bHQuZmluZCgnLnVwbG9hZF9fbmFtZScpO1xuICAgICRuYW1lLnRleHQoaW5wdXQuZmlsZXNbMF0ubmFtZSk7XG4gIH1cblxuICA7XG5cbiAgZnVuY3Rpb24gc2hvd1Jlc3VsdChpbnB1dCkge1xuICAgIHZhciAkcmVzdWx0ID0gZ2V0UmVzdWx0QmxvY2soaW5wdXQpO1xuICAgICRyZXN1bHQuYWRkQ2xhc3MoJ3Nob3cnKTtcbiAgfVxuXG4gIDtcblxuICBmdW5jdGlvbiBoaWRlUmVzdWx0KGlucHV0KSB7XG4gICAgdmFyICRyZXN1bHQgPSBnZXRSZXN1bHRCbG9jayhpbnB1dCk7XG4gICAgJHJlc3VsdC5yZW1vdmVDbGFzcygnc2hvdycpO1xuICB9XG5cbiAgO1xuXG4gIGZ1bmN0aW9uIHNob3dMYWJlbChpbnB1dCkge1xuICAgIHZhciAkbGFiZWwgPSAkKGlucHV0KS5wYXJlbnQoKTtcbiAgICAkbGFiZWwucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICB9XG5cbiAgO1xuXG4gIGZ1bmN0aW9uIGhpZGVMYWJlbChpbnB1dCkge1xuICAgIHZhciAkbGFiZWwgPSAkKGlucHV0KS5wYXJlbnQoKTtcbiAgICAkbGFiZWwuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICB9XG5cbiAgO1xuXG4gIGZ1bmN0aW9uIGFkZExvYWRlcihpbnB1dCkge1xuICAgIHZhciAkcmVzdWx0ID0gJChpbnB1dCkucGFyZW50cygnLnVwbG9hZF9faW5wdXQtd3JhcCcpLmZpbmQoJy51cGxvYWRfX3Jlc3VsdCcpO1xuICAgICRyZXN1bHQuYWRkQ2xhc3MoJ2xvYWRlcicpO1xuICB9XG5cbiAgO1xuXG4gIGZ1bmN0aW9uIHJlbW92ZUxvYWRlcihpbnB1dCkge1xuICAgIHZhciAkcmVzdWx0ID0gJChpbnB1dCkucGFyZW50cygnLnVwbG9hZF9faW5wdXQtd3JhcCcpLmZpbmQoJy51cGxvYWRfX3Jlc3VsdCcpO1xuICAgICRyZXN1bHQucmVtb3ZlQ2xhc3MoJ2xvYWRlcicpO1xuICB9XG5cbiAgO1xuXG4gIHZhciByZWFkVXJsID0gZnVuY3Rpb24gcmVhZFVybChpbnB1dCkge1xuICAgIGlmIChpbnB1dC5maWxlcyAmJiBpbnB1dC5maWxlc1swXSkge1xuICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG5cbiAgICAgIHJlYWRlci5vbmxvYWRzdGFydCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIC8vcHJvZ3Jlc3MuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuICAgICAgICBhZGRMb2FkZXIoaW5wdXQpO1xuICAgICAgICBmaWxsUmVzdWx0KGlucHV0KTtcbiAgICAgICAgc2hvd1Jlc3VsdChpbnB1dCk7XG4gICAgICAgIGhpZGVMYWJlbChpbnB1dCk7XG4gICAgICB9O1xuXG4gICAgICByZWFkZXIub25wcm9ncmVzcyA9IGZ1bmN0aW9uIChlKSB7fTtcblxuICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIC8vIGZpbGVJbWcuc2V0QXR0cmlidXRlKCdzcmMnLCBlLnRhcmdldC5yZXN1bHQpO1xuICAgICAgICAvLyBmaWxlTmFtZS50ZXh0Q29udGVudCA9IGlucHV0LmZpbGVzWzBdLm5hbWU7XG4gICAgICAgIC8vICFmaWxlUmVzdWx0LmNsYXNzTGlzdC5jb250YWlucygnc2hvdycpICYmIGZpbGVSZXN1bHQuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuICAgICAgICAvLyBwcm9ncmVzcy5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICAgIC8vIGJhci5zdHlsZS53aWR0aCA9IDA7XG4gICAgICAgIHJlbW92ZUxvYWRlcihpbnB1dCk7XG4gICAgICAgIHZhciAkcmVzdWx0ID0gZ2V0UmVzdWx0QmxvY2soaW5wdXQpO1xuICAgICAgICB2YXIgJHJlc3VsdFdyYXAgPSAkcmVzdWx0LnBhcmVudCgpO1xuICAgICAgICB2YXIgJG5ld1Jlc3VsdCA9ICRyZXN1bHQuY2xvbmUodHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICRuZXdSZXN1bHQucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcbiAgICAgICAgJG5ld1Jlc3VsdC5hdHRyKCdkYXRhLXJlc3VsdCcsICcxJyk7XG4gICAgICAgICRyZXN1bHRXcmFwLnByZXBlbmQoJG5ld1Jlc3VsdCk7XG4gICAgICAgIHZhciAkbGFiZWxXcmFwID0gJChpbnB1dCkucGFyZW50KCkucGFyZW50KCk7XG4gICAgICAgIHZhciAkbGFiZWwgPSAkKGlucHV0KS5wYXJlbnQoKTtcbiAgICAgICAgdmFyICRuZXdMYWJlbCA9ICRsYWJlbC5jbG9uZSh0cnVlLCB0cnVlKTtcbiAgICAgICAgJG5ld0xhYmVsLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgJG5ld0xhYmVsLmF0dHIoJ2RhdGEtaW5wdXQnLCAnMScpO1xuICAgICAgICAkbGFiZWxXcmFwLnByZXBlbmQoJG5ld0xhYmVsKTtcbiAgICAgICAgJG5ld0xhYmVsLmNoaWxkcmVuKCdpbnB1dCcpWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG9uRmlsZUNoYW5nZSk7XG4gICAgICAgIFsnZHJhZ2VudGVyJywgJ2RyYWdvdmVyJywgJ2RyYWdsZWF2ZScsICdkcm9wJ10uZm9yRWFjaChmdW5jdGlvbiAoZXZlbnROYW1lKSB7XG4gICAgICAgICAgJG5ld0xhYmVsWzBdLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBwcmV2ZW50RGVmYXVsdHMsIGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFsnZHJhZ2VudGVyJywgJ2RyYWdvdmVyJ10uZm9yRWFjaChmdW5jdGlvbiAoZXZlbnROYW1lKSB7XG4gICAgICAgICAgJG5ld0xhYmVsWzBdLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoaWdobGlnaHQsIGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFsnZHJhZ2xlYXZlJywgJ2Ryb3AnXS5mb3JFYWNoKGZ1bmN0aW9uIChldmVudE5hbWUpIHtcbiAgICAgICAgICAkbmV3TGFiZWxbMF0uYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIHVuaGlnaGxpZ2h0LCBmYWxzZSk7XG4gICAgICAgIH0pO1xuICAgICAgICAkbmV3TGFiZWxbMF0uYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGhhbmRsZURyb3AsIGZhbHNlKTtcbiAgICAgIH07XG5cbiAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGlucHV0LmZpbGVzWzBdKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIG9uRmlsZUNoYW5nZSA9IGZ1bmN0aW9uIG9uRmlsZUNoYW5nZShlKSB7XG4gICAgcmVhZFVybChlLmN1cnJlbnRUYXJnZXQpO1xuICAgIGNvbnNvbGUubG9nKGUuY3VycmVudFRhcmdldCk7XG4gIH07XG5cbiAgZnVuY3Rpb24gb25GaWxlRHJvcChpbnB1dCkge1xuICAgIHJlYWRVcmwoaW5wdXQpO1xuICB9XG5cbiAgO1xuXG4gIGZ1bmN0aW9uIGhhbmRsZURyb3AoZSkge1xuICAgIHZhciBkdCA9IGUuZGF0YVRyYW5zZmVyO1xuICAgIHZhciBmaWxlcyA9IGR0LmZpbGVzO1xuICAgIHZhciB0YXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gICAgdmFyIGlucHV0ID0gdGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0Jyk7XG5cbiAgICBpZiAoaW5wdXQuZmlsZXMgJiYgaW5wdXQuZmlsZXNbMF0pIHtcbiAgICAgIGlucHV0LnZhbHVlID0gJyc7XG5cbiAgICAgIGlmICghL3NhZmFyaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcbiAgICAgICAgaW5wdXQudHlwZSA9ICcnO1xuICAgICAgICBpbnB1dC50eXBlID0gJ2ZpbGUnO1xuICAgICAgfSAvLyBmaWxlUmVzdWx0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICAgIC8vIGZpbGVOYW1lLnRleHRDb250ZW50ID0gJyc7XG4gICAgICAvLyBmaWxlSW1nLnJlbW92ZUF0dHJpYnV0ZSgnc3JjJyk7XG5cbiAgICB9XG5cbiAgICBpbnB1dC5maWxlcyA9IGZpbGVzO1xuICAgIG9uRmlsZURyb3AoaW5wdXQpOyAvL2hhbmRsZUZpbGVzKGZpbGVzKVxuICB9XG5cbiAgO1xuXG4gIGZ1bmN0aW9uIG9uRmlsZUNsZWFyKGUpIHtcbiAgICB2YXIgJHRhcmdldCA9IGUuY3VycmVudFRhcmdldDtcbiAgICB2YXIgJGlkeCA9ICR0YXJnZXQucGFyZW50cygpO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcnMoYmxvY2ssIGlkeCkge1xuICAgIHZhciBmaWxlTGFiZWwgPSAkKGJsb2NrKS5maW5kKFwiW2RhdGEtaW5wdXQ9J1wiICsgaWR4ICsgXCInXVwiKVswXTtcbiAgICB2YXIgZmlsZUlucHV0ID0gJChmaWxlTGFiZWwpLmZpbmQoJ2lucHV0JylbMF07XG4gICAgdmFyIGZpbGVSZXN1bHQgPSAkKGJsb2NrKS5maW5kKFwiW2RhdGEtcmVzdWx0PSdcIiArIGlkeCArIFwiJ11cIilbMF07XG4gICAgdmFyIGZpbGVDbGVhckJ0biA9ICQoZmlsZVJlc3VsdCkuZmluZCgnLnVwbG9hZF9fY2xvc2UnKVswXTtcbiAgICBbJ2RyYWdlbnRlcicsICdkcmFnb3ZlcicsICdkcmFnbGVhdmUnLCAnZHJvcCddLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50TmFtZSkge1xuICAgICAgZmlsZUxhYmVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBwcmV2ZW50RGVmYXVsdHMsIGZhbHNlKTtcbiAgICB9KTtcbiAgICBbJ2RyYWdlbnRlcicsICdkcmFnb3ZlciddLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50TmFtZSkge1xuICAgICAgZmlsZUxhYmVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoaWdobGlnaHQsIGZhbHNlKTtcbiAgICB9KTtcbiAgICBbJ2RyYWdsZWF2ZScsICdkcm9wJ10uZm9yRWFjaChmdW5jdGlvbiAoZXZlbnROYW1lKSB7XG4gICAgICBmaWxlTGFiZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIHVuaGlnaGxpZ2h0LCBmYWxzZSk7XG4gICAgfSk7XG4gICAgZmlsZUxhYmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBoYW5kbGVEcm9wLCBmYWxzZSk7XG4gICAgZmlsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG9uRmlsZUNoYW5nZSk7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVycyhibG9jaywgaWR4KSB7XG4gICAgdmFyIGZpbGVMYWJlbCA9ICQoYmxvY2spLmZpbmQoXCJbZGF0YS1pbnB1dD0nXCIgKyBpZHggKyBcIiddXCIpWzBdO1xuICAgIHZhciBmaWxlSW5wdXQgPSAkKGZpbGVMYWJlbCkuZmluZCgnaW5wdXQnKVswXTtcbiAgICBbJ2RyYWdlbnRlcicsICdkcmFnb3ZlcicsICdkcmFnbGVhdmUnLCAnZHJvcCddLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50TmFtZSkge1xuICAgICAgZmlsZUxhYmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBwcmV2ZW50RGVmYXVsdHMsIGZhbHNlKTtcbiAgICB9KTtcbiAgICBbJ2RyYWdlbnRlcicsICdkcmFnb3ZlciddLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50TmFtZSkge1xuICAgICAgZmlsZUxhYmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoaWdobGlnaHQsIGZhbHNlKTtcbiAgICB9KTtcbiAgICBbJ2RyYWdsZWF2ZScsICdkcm9wJ10uZm9yRWFjaChmdW5jdGlvbiAoZXZlbnROYW1lKSB7XG4gICAgICBmaWxlTGFiZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIHVuaGlnaGxpZ2h0LCBmYWxzZSk7XG4gICAgfSk7XG4gICAgZmlsZUxhYmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBoYW5kbGVEcm9wLCBmYWxzZSk7XG4gICAgZmlsZUlucHV0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG9uRmlsZUNoYW5nZSk7XG4gIH1cblxuICB1cGxvYWRzLmZvckVhY2goZnVuY3Rpb24gKHVwbG9hZCkge1xuICAgIHZhciBudW0gPSAwO1xuICAgIGFkZEV2ZW50TGlzdGVuZXJzKHVwbG9hZCwgbnVtKTsgLy8gLy8g0KHQsdGA0LDRgdGL0LLQsNC10Lwg0YHRgtCw0L3QtNCw0YDRgtC90YvQtSDRgdC+0LHRi9GC0LjRjyDQv9GA0Lgg0L/QtdGA0LXRgtCw0YHQutC40LLQsNC90LjQuCDRhNCw0LnQu9CwXG4gICAgLy8gWydkcmFnZW50ZXInLCAnZHJhZ292ZXInLCAnZHJhZ2xlYXZlJywgJ2Ryb3AnXS5mb3JFYWNoKGV2ZW50TmFtZSA9PiB7XG4gICAgLy8gICBmaWxlTGFiZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIHByZXZlbnREZWZhdWx0cywgZmFsc2UpXG4gICAgLy8gfSk7XG4gICAgLy8gLy8g0JTQvtCx0LDQstC70Y/QtdC8INGB0YLQuNC70Lgg0L/RgNC4INC/0LXRgNC10YLQsNGB0LrQuNCy0LDQvdC40Lgg0YTQsNC50LvQsCDQvdCw0LQg0L3Rg9C20L3QvtC5INC+0LHQu9Cw0YHRgtGM0Y5cbiAgICAvLyBbJ2RyYWdlbnRlcicsICdkcmFnb3ZlciddLmZvckVhY2goZXZlbnROYW1lID0+IHtcbiAgICAvLyAgIGZpbGVMYWJlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGlnaGxpZ2h0LCBmYWxzZSlcbiAgICAvLyB9KTtcbiAgICAvLyBbJ2RyYWdsZWF2ZScsICdkcm9wJ10uZm9yRWFjaChldmVudE5hbWUgPT4ge1xuICAgIC8vICAgZmlsZUxhYmVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCB1bmhpZ2hsaWdodCwgZmFsc2UpXG4gICAgLy8gfSlcbiAgICAvLyAvL1xuICAgIC8vIGZpbGVMYWJlbC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgaGFuZGxlRHJvcCwgZmFsc2UpO1xuICAgIC8vIGZpbGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBvbkZpbGVDaGFuZ2UpO1xuICB9KTtcbn0pKCk7XG5cbihmdW5jdGlvbiAoKSB7XG4gIC8vIHZhciBEZWZhdWx0cyA9ICQuZm4uc2VsZWN0Mi5hbWQucmVxdWlyZSgnc2VsZWN0Mi9kZWZhdWx0cycpO1xuICAvLyAkLmV4dGVuZChEZWZhdWx0cy5kZWZhdWx0cywge1xuICAvLyAgICAgc2VhcmNoSW5wdXRQbGFjZWhvbGRlcjogJydcbiAgLy8gfSk7XG4gIC8vIHZhciBTZWFyY2hEcm9wZG93biA9ICQuZm4uc2VsZWN0Mi5hbWQucmVxdWlyZSgnc2VsZWN0Mi9kcm9wZG93bi9zZWFyY2gnKTtcbiAgLy8gdmFyIF9yZW5kZXJTZWFyY2hEcm9wZG93biA9IFNlYXJjaERyb3Bkb3duLnByb3RvdHlwZS5yZW5kZXI7XG4gIC8vIFNlYXJjaERyb3Bkb3duLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbihkZWNvcmF0ZWQpIHtcbiAgLy8gICAgIC8vIGludm9rZSBwYXJlbnQgbWV0aG9kXG4gIC8vICAgICB2YXIgJHJlbmRlcmVkID0gX3JlbmRlclNlYXJjaERyb3Bkb3duLmFwcGx5KHRoaXMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpKTtcbiAgLy8gICAgIHRoaXMuJHNlYXJjaC5hdHRyKCdwbGFjZWhvbGRlcicsIHRoaXMub3B0aW9ucy5nZXQoJ3NlYXJjaElucHV0UGxhY2Vob2xkZXInKSk7XG4gIC8vICAgICByZXR1cm4gJHJlbmRlcmVkO1xuICAvLyB9O1xuICAkKCc8ZGl2Lz4nLCB7XG4gICAgJ2NsYXNzJzogJ3ByZWxvYWRlcidcbiAgfSkuY3NzKHtcbiAgICAncG9zaXRpb24nOiAnZml4ZWQnLFxuICAgICd0b3AnOiAnMCcsXG4gICAgJ2xlZnQnOiAnMCcsXG4gICAgJ3dpZHRoJzogJzEwMHZ3JyxcbiAgICAnaGVpZ2h0JzogJzEwMHZoJyxcbiAgICAnYmFja2dyb3VuZC1jb2xvcic6ICcjZmZmJyxcbiAgICAnei1pbmRleCc6ICczMDAwJ1xuICB9KS5hcHBlbmRUbygnaHRtbCcpO1xuXG4gIHZhciBjaGVja0lucHV0ID0gZnVuY3Rpb24gY2hlY2tJbnB1dChlKSB7XG4gICAgaWYgKGUudGFyZ2V0LnZhbHVlLmxlbmd0aCA+IDApIHtcbiAgICAgICQoZS50YXJnZXQpLmFkZENsYXNzKCdpbnB1dGVkJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICQoZS50YXJnZXQpLnJlbW92ZUNsYXNzKCdpbnB1dGVkJyk7XG4gICAgfVxuICB9O1xuXG4gICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAkKCcuanMtc2VsZWN0LWNvbWJvJykuc2VsZWN0Mih7XG4gICAgICAvL21pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eVxuICAgICAgcGxhY2Vob2xkZXI6IFwi0JLQstC10LTQuNGC0LUg0LjQu9C4INCy0YvQsdC10YDQuNGC0LUg0LLQsNGA0LjQsNC90YJcIixcbiAgICAgIGRyb3Bkb3duQ3NzQ2xhc3M6ICdzZWxlY3QtZHJvcGRvd24nLFxuICAgICAgXCJsYW5ndWFnZVwiOiB7XG4gICAgICAgIFwibm9SZXN1bHRzXCI6IGZ1bmN0aW9uIG5vUmVzdWx0cygpIHtcbiAgICAgICAgICByZXR1cm4gJ9Cd0LjRh9C10LPQviDQvdC1INC90LDQudC00LXQvdC+JztcbiAgICAgICAgfSxcbiAgICAgICAgc2VhcmNoaW5nOiBmdW5jdGlvbiBzZWFyY2hpbmcoKSB7XG4gICAgICAgICAgcmV0dXJuIFwi0JfQsNCz0YDRg9C30LrQsC4uLlwiO1xuICAgICAgICB9XG4gICAgICB9IC8vc2VhcmNoSW5wdXRQbGFjZWhvbGRlcjogJ015IGN1c3RvbSBwbGFjZWhvbGRlci4uLidcblxuICAgIH0pO1xuICAgICQoJy5qcy1zZWxlY3QtY29tYm8nKS5vbignc2VsZWN0MjpvcGVuJywgZnVuY3Rpb24gKCkge1xuICAgICAgJCgnLnNlbGVjdDItc2VhcmNoIGlucHV0Jykub2ZmKCdpbnB1dCcsIGNoZWNrSW5wdXQpO1xuICAgICAgJCgnLnNlbGVjdDItc2VhcmNoIGlucHV0Jykub24oJ2lucHV0JywgY2hlY2tJbnB1dCk7XG4gICAgfSk7XG4gICAgJCgnLmpzLXNlbGVjdC1jb21ibycpLm9uKCdzZWxlY3QyOmNsb3NpbmcnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAkKCcuc2VsZWN0Mi1zZWFyY2ggaW5wdXQnKS5yZW1vdmVDbGFzcygnaW5wdXRlZCcpO1xuICAgIH0pO1xuICAgICQoJy5qcy1zZWxlY3QtY29tYm8tb3BlbicpLnNlbGVjdDIoe1xuICAgICAgLy9taW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHlcbiAgICAgIHBsYWNlaG9sZGVyOiBcItCS0LLQtdC00LjRgtC1INC40LvQuCDQstGL0LHQtdGA0LjRgtC1INCy0LDRgNC40LDQvdGCXCIsXG4gICAgICBkcm9wZG93bkNzc0NsYXNzOiBbJ3NlbGVjdC1kcm9wZG93bicsICdzZWxlY3QtZHJvcGRvd24tbXVsdGknLCAnc2VsZWN0LWRyb3Bkb3duLS1vcGVuZWQnXSxcbiAgICAgIFwibGFuZ3VhZ2VcIjoge1xuICAgICAgICBcIm5vUmVzdWx0c1wiOiBmdW5jdGlvbiBub1Jlc3VsdHMoKSB7XG4gICAgICAgICAgcmV0dXJuICfQndC40YfQtdCz0L4g0L3QtSDQvdCw0LnQtNC10L3Qvic7XG4gICAgICAgIH0sXG4gICAgICAgIHNlYXJjaGluZzogZnVuY3Rpb24gc2VhcmNoaW5nKCkge1xuICAgICAgICAgIHJldHVybiBcItCX0LDQs9GA0YPQt9C60LAuLi5cIjtcbiAgICAgICAgfVxuICAgICAgfSAvL3NlYXJjaElucHV0UGxhY2Vob2xkZXI6ICdNeSBjdXN0b20gcGxhY2Vob2xkZXIuLi4nXG5cbiAgICB9KS5vbihcInNlbGVjdDI6Y2xvc2luZ1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pLm9uKFwic2VsZWN0MjpjbG9zZWRcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGxpc3Quc2VsZWN0MihcIm9wZW5cIik7XG4gICAgfSk7XG4gICAgJCgnLmpzLXNlbGVjdC1jb21iby1vcGVuJykuc2VsZWN0Mignb3BlbicpO1xuICAgICQoJy5zZWxlY3QtZHJvcGRvd24tbXVsdGkgaW5wdXQnKS5vbignaW5wdXQnLCBjaGVja0lucHV0KTtcbiAgICAkKCcuanMtc2VsZWN0LWNvbWJvLXNlYXJjaGluZycpLnNlbGVjdDIoe1xuICAgICAgLy9taW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHlcbiAgICAgIHBsYWNlaG9sZGVyOiBcItCS0LLQtdC00LjRgtC1INC40LvQuCDQstGL0LHQtdGA0LjRgtC1INCy0LDRgNC40LDQvdGCXCIsXG4gICAgICBkcm9wZG93bkNzc0NsYXNzOiBbJ3NlbGVjdC1kcm9wZG93bicsICdzZWxlY3QtZHJvcGRvd24tLW9wZW5lZCcsICdzZWxlY3QtZHJvcGRvd24tLXNlYXJjaGluZyddLFxuICAgICAgXCJsYW5ndWFnZVwiOiB7XG4gICAgICAgIFwibm9SZXN1bHRzXCI6IGZ1bmN0aW9uIG5vUmVzdWx0cygpIHtcbiAgICAgICAgICByZXR1cm4gJ9Cd0LjRh9C10LPQviDQvdC1INC90LDQudC00LXQvdC+JztcbiAgICAgICAgfSxcbiAgICAgICAgc2VhcmNoaW5nOiBmdW5jdGlvbiBzZWFyY2hpbmcoKSB7XG4gICAgICAgICAgcmV0dXJuIFwi0JfQsNCz0YDRg9C30LrQsC4uLlwiO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgYWpheDoge1xuICAgICAgICBkZWxheTogNTAwMDAwMDAwLFxuICAgICAgICB1cmw6ICdodHRwczovL2FudGlicmVlei5naXRodWIuaW8vc2VsZWN0LWRhdGEvc2VsZWN0LWRhdGEuanNvbidcbiAgICAgIH0gLy9zZWFyY2hJbnB1dFBsYWNlaG9sZGVyOiAnTXkgY3VzdG9tIHBsYWNlaG9sZGVyLi4uJ1xuXG4gICAgfSkub24oXCJzZWxlY3QyOmNsb3NpbmdcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KS5vbihcInNlbGVjdDI6Y2xvc2VkXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBsaXN0LnNlbGVjdDIoXCJvcGVuXCIpO1xuICAgIH0pO1xuICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgnaW5wdXQnLCB7XG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgICQoJy5qcy1zZWxlY3QtY29tYm8tc2VhcmNoaW5nJykuc2VsZWN0Mignb3BlbicpO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgJCgnLnNlbGVjdC1kcm9wZG93bi0tc2VhcmNoaW5nIGlucHV0JylbMF0uZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgfSwgNTAwKTtcbiAgICAkKCcuanMtc2VsZWN0LWNvbWJvLW5vdC1mb3VuZCcpLnNlbGVjdDIoe1xuICAgICAgLy9taW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHlcbiAgICAgIGRyb3Bkb3duQ3NzQ2xhc3M6IFsnc2VsZWN0LWRyb3Bkb3duJywgJ3NlbGVjdC1kcm9wZG93bi0tb3BlbmVkJywgJ3NlbGVjdC1kcm9wZG93bi0tbm90LWZvdW5kJ10sXG4gICAgICBcImxhbmd1YWdlXCI6IHtcbiAgICAgICAgXCJub1Jlc3VsdHNcIjogZnVuY3Rpb24gbm9SZXN1bHRzKCkge1xuICAgICAgICAgIHJldHVybiAn0J3QuNGH0LXQs9C+INC90LUg0L3QsNC50LTQtdC90L4nO1xuICAgICAgICB9LFxuICAgICAgICBzZWFyY2hpbmc6IGZ1bmN0aW9uIHNlYXJjaGluZygpIHtcbiAgICAgICAgICByZXR1cm4gXCLQl9Cw0LPRgNGD0LfQutCwLi4uXCI7XG4gICAgICAgIH1cbiAgICAgIH0gLy9zZWFyY2hJbnB1dFBsYWNlaG9sZGVyOiAnTXkgY3VzdG9tIHBsYWNlaG9sZGVyLi4uJ1xuXG4gICAgfSkub24oXCJzZWxlY3QyOmNsb3NpbmdcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KS5vbihcInNlbGVjdDI6Y2xvc2VkXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBsaXN0LnNlbGVjdDIoXCJvcGVuXCIpO1xuICAgIH0pO1xuICAgICQoJy5qcy1zZWxlY3QtY29tYm8tbm90LWZvdW5kJykuc2VsZWN0Mignb3BlbicpO1xuICAgICQoJy5zZWxlY3QtZHJvcGRvd24tLW5vdC1mb3VuZCBpbnB1dCcpLnZhbCgn0YTRi9Cy0LDQv9CwJyk7XG4gICAgJCgnLnNlbGVjdC1kcm9wZG93bi0tbm90LWZvdW5kIGlucHV0JylbMF0uZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgJCgnLmpzLXNlbGVjdC1zaW5nbGUnKS5zZWxlY3QyKHtcbiAgICAgIHBsYWNlaG9sZGVyOiBcItCS0YvQsdC10YDQuNGC0LUg0LLQsNGA0LjQsNC90YJcIixcbiAgICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcbiAgICAgIGRyb3Bkb3duQ3NzQ2xhc3M6IFsnc2VsZWN0LWRyb3Bkb3duJywgJ3NlbGVjdC1kcm9wZG93bi0tc2luZ2xlJ11cbiAgICB9KTtcbiAgICB2YXIgbGlzdCA9ICQoXCIuanMtc2VsZWN0LXNpbmdsZS1vcGVuXCIpLnNlbGVjdDIoe1xuICAgICAgcGxhY2Vob2xkZXI6IFwi0JLRi9Cx0LXRgNC40YLQtSDQstCw0YDQuNCw0L3RglwiLFxuICAgICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5LFxuICAgICAgZHJvcGRvd25Dc3NDbGFzczogWydzZWxlY3QtZHJvcGRvd24nLCAnc2VsZWN0LWRyb3Bkb3duLS1zaW5nbGUnLCAnc2VsZWN0LWRyb3Bkb3duLS1vcGVuZWQnXSxcbiAgICAgIGNsb3NlT25TZWxlY3Q6IGZhbHNlXG4gICAgfSkub24oXCJzZWxlY3QyOmNsb3NpbmdcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KS5vbihcInNlbGVjdDI6Y2xvc2VkXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBsaXN0LnNlbGVjdDIoXCJvcGVuXCIpO1xuICAgIH0pO1xuICAgIGxpc3Quc2VsZWN0Mignb3BlbicpO1xuICAgICQoJy5qcy1zZWxlY3QtbXVsdGknKS5zZWxlY3QyKHtcbiAgICAgIC8vbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5XG4gICAgICBwbGFjZWhvbGRlcjogXCLQktGL0LHQtdGA0LjRgtC1INCy0LDRgNC40LDQvdGC0YtcIixcbiAgICAgIGRyb3Bkb3duQ3NzQ2xhc3M6IFsnc2VsZWN0LWRyb3Bkb3duJywgJ3NlbGVjdC1kcm9wZG93bi1tdWx0aSddLFxuICAgICAgXCJsYW5ndWFnZVwiOiB7XG4gICAgICAgIFwibm9SZXN1bHRzXCI6IGZ1bmN0aW9uIG5vUmVzdWx0cygpIHtcbiAgICAgICAgICByZXR1cm4gJ9Cd0LjRh9C10LPQviDQvdC1INC90LDQudC00LXQvdC+JztcbiAgICAgICAgfSxcbiAgICAgICAgc2VhcmNoaW5nOiBmdW5jdGlvbiBzZWFyY2hpbmcoKSB7XG4gICAgICAgICAgcmV0dXJuIFwi0JfQsNCz0YDRg9C30LrQsC4uLlwiO1xuICAgICAgICB9XG4gICAgICB9IC8vc2VhcmNoSW5wdXRQbGFjZWhvbGRlcjogJ015IGN1c3RvbSBwbGFjZWhvbGRlci4uLidcblxuICAgIH0pO1xuICAgICQoJy5qcy1zZWxlY3QtbXVsdGknKS5vbignc2VsZWN0MjpvcGVuJywgZnVuY3Rpb24gKCkge1xuICAgICAgJCgnLnNlbGVjdDItc2VhcmNoIGlucHV0Jykub2ZmKCdpbnB1dCcsIGNoZWNrSW5wdXQpO1xuICAgICAgJCgnLnNlbGVjdDItc2VhcmNoIGlucHV0Jykub24oJ2lucHV0JywgY2hlY2tJbnB1dCk7XG4gICAgfSk7XG4gICAgJCgnLmpzLXNlbGVjdC1tdWx0aScpLm9uKCdzZWxlY3QyOmNsb3NpbmcnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAkKCcuc2VsZWN0Mi1zZWFyY2ggaW5wdXQnKS5yZW1vdmVDbGFzcygnaW5wdXRlZCcpO1xuICAgIH0pO1xuICAgICQoJy5qcy1zZWxlY3QtbXVsdGktb3BlbicpLnNlbGVjdDIoe1xuICAgICAgLy9taW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHlcbiAgICAgIHBsYWNlaG9sZGVyOiBcItCS0YvQsdC10YDQuNGC0LUg0LLQsNGA0LjQsNC90YLRi1wiLFxuICAgICAgbWF4aW11bVNlbGVjdGlvbkxlbmd0aDogMyxcbiAgICAgIGRyb3Bkb3duQ3NzQ2xhc3M6IFsnc2VsZWN0LWRyb3Bkb3duJywgJ3NlbGVjdC1kcm9wZG93bi0tb3BlbmVkJywgJ3NlbGVjdC1kcm9wZG93bi1tdWx0aSddLFxuICAgICAgXCJsYW5ndWFnZVwiOiB7XG4gICAgICAgIFwibm9SZXN1bHRzXCI6IGZ1bmN0aW9uIG5vUmVzdWx0cygpIHtcbiAgICAgICAgICByZXR1cm4gJ9Cd0LjRh9C10LPQviDQvdC1INC90LDQudC00LXQvdC+JztcbiAgICAgICAgfSxcbiAgICAgICAgc2VhcmNoaW5nOiBmdW5jdGlvbiBzZWFyY2hpbmcoKSB7XG4gICAgICAgICAgcmV0dXJuIFwi0JfQsNCz0YDRg9C30LrQsC4uLlwiO1xuICAgICAgICB9LFxuICAgICAgICBtYXhpbXVtU2VsZWN0ZWQ6IGZ1bmN0aW9uIG1heGltdW1TZWxlY3RlZChlKSB7XG4gICAgICAgICAgcmV0dXJuIFwi0JzQsNC60YEuINC60L7Qu9C40YfQtdGB0YLQstC+INCy0LDRgNC40LDQvdGC0L7QsiAtIFwiICsgZS5tYXhpbXVtO1xuICAgICAgICB9XG4gICAgICB9IC8vc2VhcmNoSW5wdXRQbGFjZWhvbGRlcjogJ015IGN1c3RvbSBwbGFjZWhvbGRlci4uLidcblxuICAgIH0pLm9uKFwic2VsZWN0MjpjbG9zaW5nXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSkub24oXCJzZWxlY3QyOmNsb3NlZFwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgbGlzdC5zZWxlY3QyKFwib3BlblwiKTtcbiAgICB9KTtcbiAgICAkKCcuanMtc2VsZWN0LW11bHRpLW9wZW4nKS5zZWxlY3QyKCdvcGVuJyk7XG4gICAgJCgnLmpzLXNlbGVjdC1tdWx0aS1zZWFyY2hpbmcnKS5zZWxlY3QyKHtcbiAgICAgIC8vbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5XG4gICAgICBwbGFjZWhvbGRlcjogXCLQktGL0LHQtdGA0LjRgtC1INCy0LDRgNC40LDQvdGC0YtcIixcbiAgICAgIGRyb3Bkb3duQ3NzQ2xhc3M6IFsnc2VsZWN0LWRyb3Bkb3duJywgJ3NlbGVjdC1kcm9wZG93bi0tb3BlbmVkJywgJ3NlbGVjdC1kcm9wZG93bi0tc2VhcmNoaW5nLW11bHRpJ10sXG4gICAgICBcImxhbmd1YWdlXCI6IHtcbiAgICAgICAgXCJub1Jlc3VsdHNcIjogZnVuY3Rpb24gbm9SZXN1bHRzKCkge1xuICAgICAgICAgIHJldHVybiAn0J3QuNGH0LXQs9C+INC90LUg0L3QsNC50LTQtdC90L4nO1xuICAgICAgICB9LFxuICAgICAgICBzZWFyY2hpbmc6IGZ1bmN0aW9uIHNlYXJjaGluZygpIHtcbiAgICAgICAgICByZXR1cm4gXCLQl9Cw0LPRgNGD0LfQutCwLi4uXCI7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBhamF4OiB7XG4gICAgICAgIGRlbGF5OiA1MDAwMDAwMDAsXG4gICAgICAgIHVybDogJ2h0dHBzOi8vYW50aWJyZWV6LmdpdGh1Yi5pby9zZWxlY3QtZGF0YS9zZWxlY3QtZGF0YS5qc29uJ1xuICAgICAgfSAvL3NlYXJjaElucHV0UGxhY2Vob2xkZXI6ICdNeSBjdXN0b20gcGxhY2Vob2xkZXIuLi4nXG5cbiAgICB9KS5vbihcInNlbGVjdDI6Y2xvc2luZ1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pLm9uKFwic2VsZWN0MjpjbG9zZWRcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGxpc3Quc2VsZWN0MihcIm9wZW5cIik7XG4gICAgfSk7XG4gICAgdmFyIGV2ZW50ID0gbmV3IEV2ZW50KCdpbnB1dCcsIHtcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgJCgnLmpzLXNlbGVjdC1tdWx0aS1zZWFyY2hpbmcnKS5zZWxlY3QyKCdvcGVuJyk7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAkKCcuc2VsZWN0LWRyb3Bkb3duLS1zZWFyY2hpbmctbXVsdGkgIGlucHV0JylbMF0uZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgfSwgNTAwKTtcbiAgICAkKCcuanMtc2VsZWN0LW11bHRpLW5vdC1mb3VuZCcpLnNlbGVjdDIoe1xuICAgICAgLy9taW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHlcbiAgICAgIGRyb3Bkb3duQ3NzQ2xhc3M6IFsnc2VsZWN0LWRyb3Bkb3duJywgJ3NlbGVjdC1kcm9wZG93bi0tb3BlbmVkJywgJ3NlbGVjdC1kcm9wZG93bi0tbm90LWZvdW5kLW11bHRpJ10sXG4gICAgICBcImxhbmd1YWdlXCI6IHtcbiAgICAgICAgXCJub1Jlc3VsdHNcIjogZnVuY3Rpb24gbm9SZXN1bHRzKCkge1xuICAgICAgICAgIHJldHVybiAn0J3QuNGH0LXQs9C+INC90LUg0L3QsNC50LTQtdC90L4nO1xuICAgICAgICB9LFxuICAgICAgICBzZWFyY2hpbmc6IGZ1bmN0aW9uIHNlYXJjaGluZygpIHtcbiAgICAgICAgICByZXR1cm4gXCLQl9Cw0LPRgNGD0LfQutCwLi4uXCI7XG4gICAgICAgIH1cbiAgICAgIH0gLy9zZWFyY2hJbnB1dFBsYWNlaG9sZGVyOiAnTXkgY3VzdG9tIHBsYWNlaG9sZGVyLi4uJ1xuXG4gICAgfSkub24oXCJzZWxlY3QyOmNsb3NpbmdcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KS5vbihcInNlbGVjdDI6Y2xvc2VkXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBsaXN0LnNlbGVjdDIoXCJvcGVuXCIpO1xuICAgIH0pO1xuICAgICQoJy5qcy1zZWxlY3QtbXVsdGktbm90LWZvdW5kJykuc2VsZWN0Mignb3BlbicpO1xuICAgICQoJy5zZWxlY3QtZHJvcGRvd24tLW5vdC1mb3VuZC1tdWx0aSBpbnB1dCcpLnZhbCgn0YTRi9Cy0LDQv9CwJyk7XG4gICAgJCgnLnNlbGVjdC1kcm9wZG93bi0tbm90LWZvdW5kLW11bHRpIGlucHV0JylbMF0uZGlzcGF0Y2hFdmVudChldmVudCk7XG4gIH0pO1xuICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XG4gICAgJCgnLnByZWxvYWRlcicpLmhpZGUoKTtcbiAgfSwgNTAwKTsgLy8gJCgnI3lvdXItc2VsZWN0LWlkJykub25lKCdzZWxlY3QyOm9wZW4nLCBmdW5jdGlvbihlKSB7XG4gIC8vICAgJCgnaW5wdXQuc2VsZWN0Mi1zZWFyY2hfX2ZpZWxkJykucHJvcCgncGxhY2Vob2xkZXInLCAnZW50ZXIgdXNlcm5hbWUgb3IgY2l0eScpO1xuICAvLyB9KTtcbn0pKCk7IiwiLyogUnVzc2lhbiAoVVRGLTgpIGluaXRpYWxpc2F0aW9uIGZvciB0aGUgalF1ZXJ5IFVJIGRhdGUgcGlja2VyIHBsdWdpbi4gKi9cbi8qIFdyaXR0ZW4gYnkgQW5kcmV3IFN0cm9tbm92IChzdHJvbW5vdkBnbWFpbC5jb20pLiAqL1xuKCBmdW5jdGlvbiggZmFjdG9yeSApIHtcblx0aWYgKCB0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCApIHtcblxuXHRcdC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cblx0XHRkZWZpbmUoIFsgXCIuLi93aWRnZXRzL2RhdGVwaWNrZXJcIiBdLCBmYWN0b3J5ICk7XG5cdH0gZWxzZSB7XG5cblx0XHQvLyBCcm93c2VyIGdsb2JhbHNcblx0XHRmYWN0b3J5KCBqUXVlcnkuZGF0ZXBpY2tlciApO1xuXHR9XG59KCBmdW5jdGlvbiggZGF0ZXBpY2tlciApIHtcblxuZGF0ZXBpY2tlci5yZWdpb25hbC5ydSA9IHtcblx0Y2xvc2VUZXh0OiBcItCX0LDQutGA0YvRgtGMXCIsXG5cdHByZXZUZXh0OiBcIiYjeDNDO9Cf0YDQtdC0XCIsXG5cdG5leHRUZXh0OiBcItCh0LvQtdC0JiN4M0U7XCIsXG5cdGN1cnJlbnRUZXh0OiBcItCh0LXQs9C+0LTQvdGPXCIsXG5cdG1vbnRoTmFtZXM6IFsgXCLQr9C90LLQsNGA0YxcIixcItCk0LXQstGA0LDQu9GMXCIsXCLQnNCw0YDRglwiLFwi0JDQv9GA0LXQu9GMXCIsXCLQnNCw0LlcIixcItCY0Y7QvdGMXCIsXG5cdFwi0JjRjtC70YxcIixcItCQ0LLQs9GD0YHRglwiLFwi0KHQtdC90YLRj9Cx0YDRjFwiLFwi0J7QutGC0Y/QsdGA0YxcIixcItCd0L7Rj9Cx0YDRjFwiLFwi0JTQtdC60LDQsdGA0YxcIiBdLFxuXHRtb250aE5hbWVzU2hvcnQ6IFsgXCLQr9C90LJcIixcItCk0LXQslwiLFwi0JzQsNGAXCIsXCLQkNC/0YBcIixcItCc0LDQuVwiLFwi0JjRjtC9XCIsXG5cdFwi0JjRjtC7XCIsXCLQkNCy0LNcIixcItCh0LXQvVwiLFwi0J7QutGCXCIsXCLQndC+0Y9cIixcItCU0LXQulwiIF0sXG5cdGRheU5hbWVzOiBbIFwi0LLQvtGB0LrRgNC10YHQtdC90YzQtVwiLFwi0L/QvtC90LXQtNC10LvRjNC90LjQulwiLFwi0LLRgtC+0YDQvdC40LpcIixcItGB0YDQtdC00LBcIixcItGH0LXRgtCy0LXRgNCzXCIsXCLQv9GP0YLQvdC40YbQsFwiLFwi0YHRg9Cx0LHQvtGC0LBcIiBdLFxuXHRkYXlOYW1lc1Nob3J0OiBbIFwi0LLRgdC6XCIsXCLQv9C90LRcIixcItCy0YLRgFwiLFwi0YHRgNC0XCIsXCLRh9GC0LJcIixcItC/0YLQvVwiLFwi0YHQsdGCXCIgXSxcblx0ZGF5TmFtZXNNaW46IFsgXCLQktGBXCIsXCLQn9C9XCIsXCLQktGCXCIsXCLQodGAXCIsXCLQp9GCXCIsXCLQn9GCXCIsXCLQodCxXCIgXSxcblx0d2Vla0hlYWRlcjogXCLQndC10LRcIixcblx0ZGF0ZUZvcm1hdDogXCJkZC5tbS55eVwiLFxuXHRmaXJzdERheTogMSxcblx0aXNSVEw6IGZhbHNlLFxuXHRzaG93TW9udGhBZnRlclllYXI6IGZhbHNlLFxuXHR5ZWFyU3VmZml4OiBcIlwiIH07XG5kYXRlcGlja2VyLnNldERlZmF1bHRzKCBkYXRlcGlja2VyLnJlZ2lvbmFsLnJ1ICk7XG5cbnJldHVybiBkYXRlcGlja2VyLnJlZ2lvbmFsLnJ1O1xuXG59ICkgKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICQoJy5kcm9wZG93bjpub3QoLmRyb3Bkb3duLW9wZW5lZCcpLnNlbGVjdDIoe1xuICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcbiAgICBkcm9wZG93bkNzc0NsYXNzOiBbJ2NhbGVuZGFyLWRyb3Bkb3duJ10sXG4gIH0pO1xuXG4gICQoJy5kcm9wZG93bi1vcGVuZWQnKS5zZWxlY3QyKHtcbiAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHksXG4gICAgZHJvcGRvd25Dc3NDbGFzczogWydjYWxlbmRhci1kcm9wZG93bicsICdjYWxlbmRhci1kcm9wZG93bi1wZXJtYW5lbnQnXSxcbiAgfSkub24oXCJzZWxlY3QyOmNsb3NpbmdcIiwgZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgfSkub24oXCJzZWxlY3QyOmNsb3NlZFwiLCBmdW5jdGlvbihlKSB7XG4gICAgbGlzdC5zZWxlY3QyKFwib3BlblwiKTtcbiAgfSk7XG5cbiAgJCgnLmRyb3Bkb3duJykub24oJ3NlbGVjdDI6Y2xvc2UnLCBmdW5jdGlvbigpIHtcbiAgICAkKHRoaXMpLm5leHQoKS5maW5kKCcuc2VsZWN0Mi1zZWxlY3Rpb24nKS5ibHVyKCk7XG4gIH0pO1xuXG4gICQoJy5kcm9wZG93biArIC5zZWxlY3QyIC5zZWxlY3QyLXNlbGVjdGlvbl9fcmVuZGVyZWQnKS5hdHRyKCd0YWJpbmRleCcsICctMScpO1xuICAkKCcuZHJvcGRvd24tb3BlbmVkJykuc2VsZWN0Mignb3BlbicpXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICBjb25zdCBzZWxlY3RPcHQgPSB7XG4gICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5LFxuICAgIGRyb3Bkb3duQ3NzQ2xhc3M6ICdjYWxlbmRhci1kcm9wZG93bidcbiAgfTtcblxuICAkKCcuaW5wdXQtZGF0ZScpLmRhdGVwaWNrZXIoe1xuICAgIGRhdGVGb3JtYXQ6ICdkZC5tbS55eScsXG4gICAgc2hvd090aGVyTW9udGhzOiB0cnVlLFxuICAgIHJlZ2lvbmFsOiAncnUnLFxuICAgIG1vbnRoTmFtZXNTaG9ydDogWyBcItCv0L3QstCw0YDRjFwiLFwi0KTQtdCy0YDQsNC70YxcIixcItCc0LDRgNGCXCIsXCLQkNC/0YDQtdC70YxcIixcItCc0LDQuVwiLFwi0JjRjtC90YxcIixcbiAgICBcItCY0Y7Qu9GMXCIsXCLQkNCy0LPRg9GB0YJcIixcItCh0LXQvdGC0Y/QsdGA0YxcIixcItCe0LrRgtGP0LHRgNGMXCIsXCLQndC+0Y/QsdGA0YxcIixcItCU0LXQutCw0LHRgNGMXCIgXSxcbiAgICBjaGFuZ2VNb250aDogdHJ1ZSxcbiAgICBjaGFuZ2VZZWFyOiB0cnVlLFxuICAgIHllYXJSYW5nZTogJzE5MDA6KzEwJyxcbiAgICBiZWZvcmVTaG93OiBmdW5jdGlvbigpIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICQoJy51aS1kYXRlcGlja2VyLW1vbnRoJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgICAkKCcudWktZGF0ZXBpY2tlci15ZWFyJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgfSwgMCk7XG4gICAgfSxcblxuICAgIG9uQ2hhbmdlTW9udGhZZWFyOiBmdW5jdGlvbigpIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICQoJy51aS1kYXRlcGlja2VyLW1vbnRoJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgICAkKCcudWktZGF0ZXBpY2tlci15ZWFyJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgfSwgMCk7XG4gICAgfSxcbiAgfSk7XG5cbiAgJCgnLmlucHV0LWRhdGUtdHJpZ2dlcicpLmRhdGVwaWNrZXIoe1xuICAgIGRhdGVGb3JtYXQ6ICdkZC5tbS55eScsXG4gICAgc2hvd090aGVyTW9udGhzOiB0cnVlLFxuICAgIHJlZ2lvbmFsOiAncnUnLFxuICAgIG1vbnRoTmFtZXNTaG9ydDogWyBcItCv0L3QstCw0YDRjFwiLFwi0KTQtdCy0YDQsNC70YxcIixcItCc0LDRgNGCXCIsXCLQkNC/0YDQtdC70YxcIixcItCc0LDQuVwiLFwi0JjRjtC90YxcIixcbiAgICBcItCY0Y7Qu9GMXCIsXCLQkNCy0LPRg9GB0YJcIixcItCh0LXQvdGC0Y/QsdGA0YxcIixcItCe0LrRgtGP0LHRgNGMXCIsXCLQndC+0Y/QsdGA0YxcIixcItCU0LXQutCw0LHRgNGMXCIgXSxcbiAgICBjaGFuZ2VNb250aDogdHJ1ZSxcbiAgICBjaGFuZ2VZZWFyOiB0cnVlLFxuICAgIHllYXJSYW5nZTogJzE5MDA6KzEwJyxcblxuICAgIG9uQ2hhbmdlTW9udGhZZWFyOiBmdW5jdGlvbigpIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICQoJy51aS1kYXRlcGlja2VyLW1vbnRoJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgICAkKCcudWktZGF0ZXBpY2tlci15ZWFyJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgfSwgMCk7XG4gICAgfSxcblxuICAgIG9uU2VsZWN0OiBmdW5jdGlvbigpIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICQoJy51aS1kYXRlcGlja2VyLW1vbnRoJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgICAkKCcudWktZGF0ZXBpY2tlci15ZWFyJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgfSwgMCk7XG4gICAgfSxcbiAgfSk7XG5cbiAgJCgnLmlucHV0LWRhdGUtdHJpZ2dlci1zaW5nbGUnKS5kYXRlcGlja2VyKHtcbiAgICBkYXRlRm9ybWF0OiAnZGQubW0ueXknLFxuICAgIHNob3dPdGhlck1vbnRoczogdHJ1ZSxcbiAgICByZWdpb25hbDogJ3J1JyxcbiAgICBtb250aE5hbWVzU2hvcnQ6IFsgXCLQr9C90LLQsNGA0YxcIixcItCk0LXQstGA0LDQu9GMXCIsXCLQnNCw0YDRglwiLFwi0JDQv9GA0LXQu9GMXCIsXCLQnNCw0LlcIixcItCY0Y7QvdGMXCIsXG4gICAgXCLQmNGO0LvRjFwiLFwi0JDQstCz0YPRgdGCXCIsXCLQodC10L3RgtGP0LHRgNGMXCIsXCLQntC60YLRj9Cx0YDRjFwiLFwi0J3QvtGP0LHRgNGMXCIsXCLQlNC10LrQsNCx0YDRjFwiIF0sXG4gICAgY2hhbmdlTW9udGg6IHRydWUsXG4gICAgY2hhbmdlWWVhcjogdHJ1ZSxcbiAgICB5ZWFyUmFuZ2U6ICcxOTAwOisxMCcsXG5cbiAgICBvbkNoYW5nZU1vbnRoWWVhcjogZnVuY3Rpb24oKSB7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcudWktZGF0ZXBpY2tlci1tb250aCcpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXIteWVhcicpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgIH0sIDApO1xuICAgIH0sXG5cbiAgICBvblNlbGVjdDogZnVuY3Rpb24oKSB7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcudWktZGF0ZXBpY2tlci1tb250aCcpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXIteWVhcicpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgIH0sIDApO1xuICAgIH0sXG4gIH0pO1xuXG4gICQoJy5pbnB1dC1kYXRlLXRyaWdnZXItcmFuZ2UnKS5kYXRlcGlja2VyKHtcbiAgICByYW5nZTogJ3BlcmlvZCcsXG4gICAgZGF0ZUZvcm1hdDogJ2RkLm1tLnl5JyxcbiAgICBzaG93T3RoZXJNb250aHM6IHRydWUsXG4gICAgcmVnaW9uYWw6ICdydScsXG4gICAgbW9udGhOYW1lc1Nob3J0OiBbIFwi0K/QvdCy0LDRgNGMXCIsXCLQpNC10LLRgNCw0LvRjFwiLFwi0JzQsNGA0YJcIixcItCQ0L/RgNC10LvRjFwiLFwi0JzQsNC5XCIsXCLQmNGO0L3RjFwiLFxuICAgIFwi0JjRjtC70YxcIixcItCQ0LLQs9GD0YHRglwiLFwi0KHQtdC90YLRj9Cx0YDRjFwiLFwi0J7QutGC0Y/QsdGA0YxcIixcItCd0L7Rj9Cx0YDRjFwiLFwi0JTQtdC60LDQsdGA0YxcIiBdLFxuICAgIGNoYW5nZU1vbnRoOiB0cnVlLFxuICAgIGNoYW5nZVllYXI6IHRydWUsXG4gICAgeWVhclJhbmdlOiAnMTkwMDorMTAnLFxuXG4gICAgb25DaGFuZ2VNb250aFllYXI6IGZ1bmN0aW9uKCkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXItbW9udGgnKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICAgICAgICQoJy51aS1kYXRlcGlja2VyLXllYXInKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICAgICB9LCAwKTtcbiAgICB9LFxuXG4gICAgb25TZWxlY3Q6IGZ1bmN0aW9uKGlucHV0LCBpbnN0KSB7XG4gICAgICBjb25zb2xlLmxvZyhpbnN0KTtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgJCgnLmlucHV0LWRhdGUtdHJpZ2dlci1yYW5nZScpLmZpbmQoJy51aS1kYXRlcGlja2VyLW1vbnRoJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgICAkKCcuaW5wdXQtZGF0ZS10cmlnZ2VyLXJhbmdlJykuZmluZCgnLnVpLWRhdGVwaWNrZXIteWVhcicpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgIH0sIDEwMCk7XG4gICAgfSxcblxuICAgIGJlZm9yZVNob3c6IGZ1bmN0aW9uKGlucHV0LCBpbnN0KSB7XG4gICAgICBjb25zb2xlLmxvZyhpbnN0KTtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IGN1cnJlbnQgPSBtb21lbnQoKTtcbiAgY29uc3QgZGF5ID0gY3VycmVudC5mb3JtYXQoJ0REJyk7XG4gIGNvbnN0IG1vbnRoID0gY3VycmVudC5mb3JtYXQoJ01NJyk7XG4gIGNvbnN0IHllYXIgPSBjdXJyZW50LmZvcm1hdCgnWVlZWScpO1xuICBsZXQgcGlja2VkRGF0ZSA9ICcnO1xuICBsZXQgcGlja2VkUGVyaW9kID0gW107XG4gIGxldCBob3ZlckRhdGUgPSAnJztcblxuICBpZiAoZGF5ICE9PSAnMTUnKSB7XG4gICAgcGlja2VkRGF0ZSA9IDE1ICsgJy4nICsgbW9udGggKyAnLicgKyB5ZWFyO1xuICB9IGVsc2Uge1xuICAgIHBpY2tlZERhdGUgPSAxNyArICcuJyArIG1vbnRoICsgJy4nICsgeWVhcjtcbiAgfVxuXG4gIGlmIChkYXkgIT09ICcxMycpIHtcbiAgICBob3ZlckRhdGUgPSAnMTMnO1xuICB9IGVsc2Uge1xuICAgIGhvdmVyRGF0ZSA9ICcxMic7XG4gIH1cblxuICBkYXkgPiAxNVxuICAgID8gcGlja2VkUGVyaW9kID0gWycwMi4nICsgbW9udGggKyAnLicgKyB5ZWFyLCAnMTEuJyArIG1vbnRoICsgJy4nICsgeWVhcl1cbiAgICA6IHBpY2tlZFBlcmlvZCA9IFsnMTcuJyArIG1vbnRoICsgJy4nICsgeWVhciwgJzI2LicgKyBtb250aCArICcuJyArIHllYXJdXG5cbiAgJCgnLmlucHV0LWRhdGUtdHJpZ2dlcicpLmRhdGVwaWNrZXIoJ3NldERhdGUnLCBwaWNrZWREYXRlKTtcbiAgJCgnLmlucHV0LWRhdGUtdHJpZ2dlci1zaW5nbGUnKS5kYXRlcGlja2VyKCdzZXREYXRlJywgcGlja2VkRGF0ZSk7XG4gICQoJy5pbnB1dC1kYXRlLXRyaWdnZXItcmFuZ2UnKS5kYXRlcGlja2VyKCdzZXREYXRlJywgcGlja2VkUGVyaW9kKTtcblxuXG5cbiAgJCgnLmlucHV0LWRhdGUtdHJpZ2dlci1zaW5nbGUgLnVpLWRhdGVwaWNrZXItY2FsZW5kYXIgdGQgYScpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgaWYgKCQodGhpcykudGV4dCgpID09PSBob3ZlckRhdGUpIHtcbiAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2hvdmVyZWQnKTtcbiAgICB9XG4gIH0pO1xuXG5cblxuICAkKCcudWktZGF0ZXBpY2tlci1tb250aCcpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgJCgnLnVpLWRhdGVwaWNrZXIteWVhcicpLnNlbGVjdDIoc2VsZWN0T3B0KTtcblxuICAkKCcuaW5wdXQtZGF0ZScpLmRhdGVwaWNrZXIoJ3JlZnJlc2gnKTtcblxuICAkKCcuaW5wdXQtZGF0ZScpLmlucHV0bWFzayhcIjk5Ljk5Ljk5OTlcIiwge1xuICAgIC8vbWFzazogJ21tL2RkL3l5eXknLFxuICAgIHBsYWNlaG9sZGVyOiAnJyxcbiAgICBzaG93TWFza09uSG92ZXI6IGZhbHNlLFxuICAgIHNob3dNYXNrT25Gb2N1czogZmFsc2UsXG4gICAgaml0TWFza2luZzogdHJ1ZVxuICB9KTtcblxuXG4gICQoJy5pbnB1dC1kYXRlJykub24oJ2ZvY3VzJywgZnVuY3Rpb24oZSkge1xuICAgIGNvbnN0IHRhcmdldCA9ICQoZS50YXJnZXQpO1xuICAgIGNvbnN0IHZhbCA9IHRhcmdldC52YWwoKTtcblxuICAgIGlmICh2YWwubGVuZ3RoID09PSAwKSB7XG4gICAgICB0YXJnZXQucGFyZW50KCkuYWRkQ2xhc3MoJ2RhdGUtcGxhY2Vob2xkZXInKTtcbiAgICB9XG4gIH0pO1xuXG4gICQoJy5pbnB1dC1kYXRlJykub24oJ2JsdXInLCBmdW5jdGlvbihlKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gJChlLnRhcmdldCk7XG4gICAgY29uc3QgdmFsID0gdGFyZ2V0LnZhbCgpO1xuXG4gICAgdGFyZ2V0LnBhcmVudCgpLnJlbW92ZUNsYXNzKCdkYXRlLXBsYWNlaG9sZGVyJyk7XG4gIH0pO1xuXG4gICQoJy5pbnB1dC1kYXRlJykub24oJ2lucHV0JywgZnVuY3Rpb24oZSkge1xuICAgIGNvbnN0IHRhcmdldCA9ICQoZS50YXJnZXQpO1xuICAgIGNvbnN0IHZhbCA9IHRhcmdldC52YWwoKTtcblxuICAgIGlmICh2YWwubGVuZ3RoID4gMCkge1xuICAgICAgdGFyZ2V0LnBhcmVudCgpLnJlbW92ZUNsYXNzKCdkYXRlLXBsYWNlaG9sZGVyJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRhcmdldC5wYXJlbnQoKS5hZGRDbGFzcygnZGF0ZS1wbGFjZWhvbGRlcicpO1xuICAgIH1cblxuICAgIGNvbnN0IGlzVmFsaWQgPSBtb21lbnQoJCh0aGlzKS52YWwoKSwgJ0RELk1NLllZWVknLCB0cnVlKS5pc1ZhbGlkKCk7XG4gICAgaWYgKGlzVmFsaWQpIHtcbiAgICAgICQodGhpcykuZGF0ZXBpY2tlcignaGlkZScpO1xuICAgICAgJCh0aGlzKS5kYXRlcGlja2VyKCdzaG93Jyk7XG4gICAgfVxuICB9KTtcblxuICAvLyAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgLy8gICBmdW5jdGlvbiBmMSgpIHtcbiAgLy8gICAgICQoJy5pbnB1dC1kYXRlJykuZGF0ZXBpY2tlcigncmVmcmVzaCcpO1xuICAvLyAgIH07XG5cbiAgLy8gICBmdW5jdGlvbiBmMigpIHtcbiAgLy8gICAgIGNvbnNvbGUubG9nKCQoJy51aS1kYXRlcGlja2VyLW1vbnRoJylbMF0pO1xuICAvLyAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgLy8gICAgICAgJCgnLnVpLWRhdGVwaWNrZXItbW9udGgnKS5zZWxlY3QyKCk7XG4gIC8vICAgICB9LCA1MDAwKTtcbiAgLy8gICAgIC8vJCgnLnVpLWRhdGVwaWNrZXItbW9udGgnKS5zZWxlY3QyKCk7XG4gIC8vICAgfTtcblxuICAvLyAgIHZhciBkZmQgPSAkLkRlZmVycmVkKCk7XG5cbiAgLy8gICBkZmQuZG9uZShmMSkuZG9uZShmMik7XG5cbiAgLy8gICBkZmQucmVzb2x2ZSgnYScpO1xuXG4gIC8vIH0pO1xuXG4gICQoJyNjYWxlbmRhci1kcm9wZG93bi1tb250aCcpLnNlbGVjdDIoe1xuICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcbiAgICBkcm9wZG93bkNzc0NsYXNzOiBbJ2NhbGVuZGFyLWRyb3Bkb3duJywgJ2NhbGVuZGFyLWRyb3Bkb3duLXBlcm1hbmVudCddLFxuICAgIGNsb3NlT25TZWxlY3Q6IGZhbHNlXG4gIH0pLm9uKFwic2VsZWN0MjpjbG9zaW5nXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIH0pLm9uKFwic2VsZWN0MjpjbG9zZWRcIiwgZnVuY3Rpb24oZSkge1xuICAgIGxpc3Quc2VsZWN0MihcIm9wZW5cIik7XG4gIH0pO1xuXG4gICQoJyNjYWxlbmRhci1kcm9wZG93bi1tb250aCcpLnNlbGVjdDIoJ29wZW4nKTtcblxuICAkKCcjY2FsZW5kYXItZHJvcGRvd24teWVhcicpLnNlbGVjdDIoe1xuICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcbiAgICBkcm9wZG93bkNzc0NsYXNzOiBbJ2NhbGVuZGFyLWRyb3Bkb3duJywgJ2NhbGVuZGFyLWRyb3Bkb3duLXBlcm1hbmVudCddLFxuICAgIGNsb3NlT25TZWxlY3Q6IGZhbHNlXG4gIH0pLm9uKFwic2VsZWN0MjpjbG9zaW5nXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIH0pLm9uKFwic2VsZWN0MjpjbG9zZWRcIiwgZnVuY3Rpb24oZSkge1xuICAgIGxpc3Quc2VsZWN0MihcIm9wZW5cIik7XG4gIH0pO1xuXG4gICQoJyNjYWxlbmRhci1kcm9wZG93bi15ZWFyJykuc2VsZWN0Mignb3BlbicpO1xufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgJCgnLmlucHV0LXBhc3N3b3JkLWJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0ICRidG4gPSAkKHRoaXMpO1xuICAgIGNvbnN0ICRpbnB1dCA9ICRidG4ucHJldigpO1xuXG4gICAgJGJ0bi50b2dnbGVDbGFzcygnc2hvd24nKTtcblxuICAgIGlmICgkYnRuLmhhc0NsYXNzKCdzaG93bicpKSB7XG4gICAgICAkaW5wdXQuYXR0cigndHlwZScsICd0ZXh0Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRpbnB1dC5hdHRyKCd0eXBlJywgJ3Bhc3N3b3JkJyk7XG4gICAgfVxuICB9KVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgLy8gY29uc3QgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmlucHV0LXBob25lJyk7XG5cbiAgLy8gaWYgKCFpbnB1dHNbMF0pIHtcbiAgLy8gICByZXR1cm47XG4gIC8vIH1cblxuICAvLyBjb25zdCBpbSA9IG5ldyBJbnB1dG1hc2soXCIrNyg5OTkpIDk5OS05OS05OVwiKTtcblxuICAvLyBpbnB1dHMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gIC8vICAgaW0ubWFzayhpdGVtKTtcbiAgLy8gfSlcblxuICAkKCcuaW5wdXQtcGhvbmUnKS5pbnB1dG1hc2soJys3KDk5OSkgOTk5LTk5LTk5Jyk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICBjb25zdCBzY3JvbGxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2Nyb2xsLXRvLXRvcCcpO1xuICBjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyJyk7XG5cbiAgaWYgKCFzY3JvbGxCdG4pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBnZXRIZWFkZXJIZWlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gaGVhZGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCArIDUwO1xuICB9O1xuXG4gIGxldCBpc1Njcm9sbGVkID0gd2luZG93LnBhZ2VZT2Zmc2V0ID4gZ2V0SGVhZGVySGVpZ2h0KCk7XG5cbiAgY29uc3Qgc2hvd0J0biA9IGZ1bmN0aW9uKCkge1xuICAgICFzY3JvbGxCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKVxuICAgICYmIHNjcm9sbEJ0bi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgfVxuXG4gIGNvbnN0IGhpZGVIZWFkZXIgPSBmdW5jdGlvbigpIHtcbiAgICBzY3JvbGxCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKVxuICAgICYmIHNjcm9sbEJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgfVxuXG4gIGNvbnN0IG9uU2Nyb2xsID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCFpc1Njcm9sbGVkICYmIHdpbmRvdy5wYWdlWU9mZnNldCA+IGdldEhlYWRlckhlaWdodCgpKSB7XG4gICAgICBzaG93QnRuKCk7XG4gICAgICBpc1Njcm9sbGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoaXNTY3JvbGxlZCAmJiB3aW5kb3cucGFnZVlPZmZzZXQgPCBnZXRIZWFkZXJIZWlnaHQoKSkge1xuICAgICAgaGlkZUhlYWRlcigpO1xuICAgICAgaXNTY3JvbGxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGlmIChpc1Njcm9sbGVkKSB7XG4gICAgc2hvd0J0bigpO1xuICB9XG5cbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgb25TY3JvbGwpO1xuICBzY3JvbGxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGhlYWRlci5zY3JvbGxJbnRvVmlldyh7YmxvY2s6IGBzdGFydGAsIGJlaGF2aW9yOiBgc21vb3RoYH0pO1xuICB9KVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgY29uc3QgdXBsb2FkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy51cGxvYWQnKTtcblxuICBpZiAoIXVwbG9hZHNbMF0pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBmdW5jdGlvbiBwcmV2ZW50RGVmYXVsdHMgKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfTtcblxuICBmdW5jdGlvbiBoaWdobGlnaHQoZSkge1xuICAgIGUuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWdobGlnaHQnKTtcbiAgfTtcblxuICBmdW5jdGlvbiB1bmhpZ2hsaWdodChlKSB7XG4gICAgZS5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZ2hsaWdodCcpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGdldFJlc3VsdEJsb2NrKGlucHV0KSB7XG4gICAgY29uc3QgJGlkeCA9ICQoaW5wdXQpLnBhcmVudCgpLmF0dHIoJ2RhdGEtaW5wdXQnKTtcbiAgICByZXR1cm4gJChpbnB1dCkucGFyZW50cygnLnVwbG9hZCcpLmZpbmQoXCJbZGF0YS1yZXN1bHQ9J1wiICsgJGlkeCArXCInXVwiKTtcbiAgfTtcblxuICBmdW5jdGlvbiBmaWxsUmVzdWx0KGlucHV0KSB7XG4gICAgY29uc3QgJHJlc3VsdCA9IGdldFJlc3VsdEJsb2NrKGlucHV0KTtcbiAgICBjb25zdCAkbmFtZSA9ICRyZXN1bHQuZmluZCgnLnVwbG9hZF9fbmFtZScpO1xuICAgICRuYW1lLnRleHQoaW5wdXQuZmlsZXNbMF0ubmFtZSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gc2hvd1Jlc3VsdChpbnB1dCkge1xuICAgIGNvbnN0ICRyZXN1bHQgPSBnZXRSZXN1bHRCbG9jayhpbnB1dCk7XG4gICAgJHJlc3VsdC5hZGRDbGFzcygnc2hvdycpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGhpZGVSZXN1bHQoaW5wdXQpIHtcbiAgICBjb25zdCAkcmVzdWx0ID0gZ2V0UmVzdWx0QmxvY2soaW5wdXQpO1xuICAgICRyZXN1bHQucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcbiAgfTtcblxuICBmdW5jdGlvbiBzaG93TGFiZWwoaW5wdXQpIHtcbiAgICBjb25zdCAkbGFiZWwgPSAkKGlucHV0KS5wYXJlbnQoKTtcbiAgICAkbGFiZWwucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGhpZGVMYWJlbChpbnB1dCkge1xuICAgIGNvbnN0ICRsYWJlbCA9ICQoaW5wdXQpLnBhcmVudCgpO1xuICAgICRsYWJlbC5hZGRDbGFzcygnaGlkZGVuJyk7XG4gIH07XG5cbiAgZnVuY3Rpb24gYWRkTG9hZGVyKGlucHV0KSB7XG4gICAgY29uc3QgJHJlc3VsdCA9ICQoaW5wdXQpLnBhcmVudHMoJy51cGxvYWRfX2lucHV0LXdyYXAnKS5maW5kKCcudXBsb2FkX19yZXN1bHQnKTtcbiAgICAkcmVzdWx0LmFkZENsYXNzKCdsb2FkZXInKTtcbiAgfTtcblxuICBmdW5jdGlvbiByZW1vdmVMb2FkZXIoaW5wdXQpIHtcbiAgICBjb25zdCAkcmVzdWx0ID0gJChpbnB1dCkucGFyZW50cygnLnVwbG9hZF9faW5wdXQtd3JhcCcpLmZpbmQoJy51cGxvYWRfX3Jlc3VsdCcpO1xuICAgICRyZXN1bHQucmVtb3ZlQ2xhc3MoJ2xvYWRlcicpO1xuICB9O1xuXG4gIGNvbnN0IHJlYWRVcmwgPSAoaW5wdXQpID0+IHtcbiAgICBpZiAoaW5wdXQuZmlsZXMgJiYgaW5wdXQuZmlsZXNbMF0pIHtcbiAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuXG4gICAgICByZWFkZXIub25sb2Fkc3RhcnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAvL3Byb2dyZXNzLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcblxuICAgICAgICBhZGRMb2FkZXIoaW5wdXQpO1xuICAgICAgICBmaWxsUmVzdWx0KGlucHV0KTtcbiAgICAgICAgc2hvd1Jlc3VsdChpbnB1dCk7XG4gICAgICAgIGhpZGVMYWJlbChpbnB1dCk7XG4gICAgICB9O1xuXG4gICAgICByZWFkZXIub25wcm9ncmVzcyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB9XG5cbiAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAvLyBmaWxlSW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgZS50YXJnZXQucmVzdWx0KTtcbiAgICAgICAgLy8gZmlsZU5hbWUudGV4dENvbnRlbnQgPSBpbnB1dC5maWxlc1swXS5uYW1lO1xuICAgICAgICAvLyAhZmlsZVJlc3VsdC5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3cnKSAmJiBmaWxlUmVzdWx0LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcblxuICAgICAgICAvLyBwcm9ncmVzcy5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICAgIC8vIGJhci5zdHlsZS53aWR0aCA9IDA7XG4gICAgICAgIHJlbW92ZUxvYWRlcihpbnB1dCk7XG5cbiAgICAgICAgY29uc3QgJHJlc3VsdCA9IGdldFJlc3VsdEJsb2NrKGlucHV0KTtcbiAgICAgICAgY29uc3QgJHJlc3VsdFdyYXAgPSAkcmVzdWx0LnBhcmVudCgpO1xuICAgICAgICBjb25zdCAkbmV3UmVzdWx0ID0gJHJlc3VsdC5jbG9uZSh0cnVlLCB0cnVlKTtcbiAgICAgICAgJG5ld1Jlc3VsdC5yZW1vdmVDbGFzcygnc2hvdycpO1xuICAgICAgICAkbmV3UmVzdWx0LmF0dHIoJ2RhdGEtcmVzdWx0JywgJzEnKTtcbiAgICAgICAgJHJlc3VsdFdyYXAucHJlcGVuZCgkbmV3UmVzdWx0KTtcblxuICAgICAgICBjb25zdCAkbGFiZWxXcmFwID0gJChpbnB1dCkucGFyZW50KCkucGFyZW50KCk7XG4gICAgICAgIGNvbnN0ICRsYWJlbCA9ICQoaW5wdXQpLnBhcmVudCgpO1xuICAgICAgICBjb25zdCAkbmV3TGFiZWwgPSAkbGFiZWwuY2xvbmUodHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICRuZXdMYWJlbC5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICRuZXdMYWJlbC5hdHRyKCdkYXRhLWlucHV0JywgJzEnKTtcbiAgICAgICAgJGxhYmVsV3JhcC5wcmVwZW5kKCRuZXdMYWJlbCk7XG4gICAgICAgICRuZXdMYWJlbC5jaGlsZHJlbignaW5wdXQnKVswXS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBvbkZpbGVDaGFuZ2UpO1xuXG5cblxuICAgICAgICBbJ2RyYWdlbnRlcicsICdkcmFnb3ZlcicsICdkcmFnbGVhdmUnLCAnZHJvcCddLmZvckVhY2goZXZlbnROYW1lID0+IHtcbiAgICAgICAgICAkbmV3TGFiZWxbMF0uYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIHByZXZlbnREZWZhdWx0cywgZmFsc2UpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIFsnZHJhZ2VudGVyJywgJ2RyYWdvdmVyJ10uZm9yRWFjaChldmVudE5hbWUgPT4ge1xuICAgICAgICAgICRuZXdMYWJlbFswXS5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGlnaGxpZ2h0LCBmYWxzZSlcbiAgICAgICAgfSk7XG5cbiAgICAgICAgWydkcmFnbGVhdmUnLCAnZHJvcCddLmZvckVhY2goZXZlbnROYW1lID0+IHtcbiAgICAgICAgICAkbmV3TGFiZWxbMF0uYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIHVuaGlnaGxpZ2h0LCBmYWxzZSlcbiAgICAgICAgfSk7XG4gICAgICAgICRuZXdMYWJlbFswXS5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgaGFuZGxlRHJvcCwgZmFsc2UpO1xuICAgICAgfVxuXG4gICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChpbnB1dC5maWxlc1swXSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3Qgb25GaWxlQ2hhbmdlID0gKGUpID0+IHtcbiAgICByZWFkVXJsKGUuY3VycmVudFRhcmdldCk7XG4gICAgY29uc29sZS5sb2coZS5jdXJyZW50VGFyZ2V0KTtcbiAgfTtcblxuICBmdW5jdGlvbiBvbkZpbGVEcm9wKGlucHV0KSB7XG4gICAgcmVhZFVybChpbnB1dCk7XG4gIH07XG5cbiAgZnVuY3Rpb24gaGFuZGxlRHJvcChlKSB7XG4gICAgbGV0IGR0ID0gZS5kYXRhVHJhbnNmZXJcbiAgICBsZXQgZmlsZXMgPSBkdC5maWxlc1xuXG4gICAgY29uc3QgdGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0O1xuICAgIGNvbnN0IGlucHV0ID0gdGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0Jyk7XG5cbiAgICBpZiAoaW5wdXQuZmlsZXMgJiYgaW5wdXQuZmlsZXNbMF0pIHtcbiAgICAgIGlucHV0LnZhbHVlID0gJyc7XG5cbiAgICAgIGlmKCEvc2FmYXJpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSl7XG4gICAgICAgIGlucHV0LnR5cGUgPSAnJztcbiAgICAgICAgaW5wdXQudHlwZSA9ICdmaWxlJztcbiAgICAgIH1cblxuICAgICAgLy8gZmlsZVJlc3VsdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICAvLyBmaWxlTmFtZS50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgLy8gZmlsZUltZy5yZW1vdmVBdHRyaWJ1dGUoJ3NyYycpO1xuICAgIH1cblxuICAgIGlucHV0LmZpbGVzID0gZmlsZXM7XG4gICAgb25GaWxlRHJvcChpbnB1dCk7XG5cbiAgICAvL2hhbmRsZUZpbGVzKGZpbGVzKVxuICB9O1xuXG4gIGZ1bmN0aW9uIG9uRmlsZUNsZWFyKGUpIHtcbiAgICBjb25zdCAkdGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0O1xuICAgIGNvbnN0ICRpZHggPSAkdGFyZ2V0LnBhcmVudHMoKVxuICB9XG5cbiAgZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcnMoYmxvY2ssIGlkeCkge1xuICAgIGNvbnN0IGZpbGVMYWJlbCA9ICQoYmxvY2spLmZpbmQoXCJbZGF0YS1pbnB1dD0nXCIgKyBpZHggK1wiJ11cIilbMF07XG4gICAgY29uc3QgZmlsZUlucHV0ID0gJChmaWxlTGFiZWwpLmZpbmQoJ2lucHV0JylbMF07XG4gICAgY29uc3QgZmlsZVJlc3VsdCA9ICQoYmxvY2spLmZpbmQoXCJbZGF0YS1yZXN1bHQ9J1wiICsgaWR4ICtcIiddXCIpWzBdO1xuICAgIGNvbnN0IGZpbGVDbGVhckJ0biA9ICQoZmlsZVJlc3VsdCkuZmluZCgnLnVwbG9hZF9fY2xvc2UnKVswXTtcblxuICAgIFsnZHJhZ2VudGVyJywgJ2RyYWdvdmVyJywgJ2RyYWdsZWF2ZScsICdkcm9wJ10uZm9yRWFjaChldmVudE5hbWUgPT4ge1xuICAgICAgZmlsZUxhYmVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBwcmV2ZW50RGVmYXVsdHMsIGZhbHNlKVxuICAgIH0pO1xuXG4gICAgWydkcmFnZW50ZXInLCAnZHJhZ292ZXInXS5mb3JFYWNoKGV2ZW50TmFtZSA9PiB7XG4gICAgICBmaWxlTGFiZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGhpZ2hsaWdodCwgZmFsc2UpXG4gICAgfSk7XG5cbiAgICBbJ2RyYWdsZWF2ZScsICdkcm9wJ10uZm9yRWFjaChldmVudE5hbWUgPT4ge1xuICAgICAgZmlsZUxhYmVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCB1bmhpZ2hsaWdodCwgZmFsc2UpXG4gICAgfSlcblxuICAgIGZpbGVMYWJlbC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgaGFuZGxlRHJvcCwgZmFsc2UpO1xuICAgIGZpbGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBvbkZpbGVDaGFuZ2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoYmxvY2ssIGlkeCkge1xuICAgIGNvbnN0IGZpbGVMYWJlbCA9ICQoYmxvY2spLmZpbmQoXCJbZGF0YS1pbnB1dD0nXCIgKyBpZHggK1wiJ11cIilbMF07XG4gICAgY29uc3QgZmlsZUlucHV0ID0gJChmaWxlTGFiZWwpLmZpbmQoJ2lucHV0JylbMF07XG5cbiAgICBbJ2RyYWdlbnRlcicsICdkcmFnb3ZlcicsICdkcmFnbGVhdmUnLCAnZHJvcCddLmZvckVhY2goZXZlbnROYW1lID0+IHtcbiAgICAgIGZpbGVMYWJlbC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgcHJldmVudERlZmF1bHRzLCBmYWxzZSlcbiAgICB9KTtcblxuICAgIFsnZHJhZ2VudGVyJywgJ2RyYWdvdmVyJ10uZm9yRWFjaChldmVudE5hbWUgPT4ge1xuICAgICAgZmlsZUxhYmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoaWdobGlnaHQsIGZhbHNlKVxuICAgIH0pO1xuXG4gICAgWydkcmFnbGVhdmUnLCAnZHJvcCddLmZvckVhY2goZXZlbnROYW1lID0+IHtcbiAgICAgIGZpbGVMYWJlbC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgdW5oaWdobGlnaHQsIGZhbHNlKVxuICAgIH0pXG5cbiAgICBmaWxlTGFiZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJvcCcsIGhhbmRsZURyb3AsIGZhbHNlKTtcbiAgICBmaWxlSW5wdXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgb25GaWxlQ2hhbmdlKTtcbiAgfVxuXG5cblxuXG4gIHVwbG9hZHMuZm9yRWFjaChmdW5jdGlvbih1cGxvYWQpIHtcblxuICAgIGxldCBudW0gPSAwO1xuXG4gICAgYWRkRXZlbnRMaXN0ZW5lcnModXBsb2FkLCBudW0pO1xuXG4gICAgLy8gLy8g0KHQsdGA0LDRgdGL0LLQsNC10Lwg0YHRgtCw0L3QtNCw0YDRgtC90YvQtSDRgdC+0LHRi9GC0LjRjyDQv9GA0Lgg0L/QtdGA0LXRgtCw0YHQutC40LLQsNC90LjQuCDRhNCw0LnQu9CwXG5cbiAgICAvLyBbJ2RyYWdlbnRlcicsICdkcmFnb3ZlcicsICdkcmFnbGVhdmUnLCAnZHJvcCddLmZvckVhY2goZXZlbnROYW1lID0+IHtcbiAgICAvLyAgIGZpbGVMYWJlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgcHJldmVudERlZmF1bHRzLCBmYWxzZSlcbiAgICAvLyB9KTtcblxuICAgIC8vIC8vINCU0L7QsdCw0LLQu9GP0LXQvCDRgdGC0LjQu9C4INC/0YDQuCDQv9C10YDQtdGC0LDRgdC60LjQstCw0L3QuNC4INGE0LDQudC70LAg0L3QsNC0INC90YPQttC90L7QuSDQvtCx0LvQsNGB0YLRjNGOXG5cbiAgICAvLyBbJ2RyYWdlbnRlcicsICdkcmFnb3ZlciddLmZvckVhY2goZXZlbnROYW1lID0+IHtcbiAgICAvLyAgIGZpbGVMYWJlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGlnaGxpZ2h0LCBmYWxzZSlcbiAgICAvLyB9KTtcblxuICAgIC8vIFsnZHJhZ2xlYXZlJywgJ2Ryb3AnXS5mb3JFYWNoKGV2ZW50TmFtZSA9PiB7XG4gICAgLy8gICBmaWxlTGFiZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIHVuaGlnaGxpZ2h0LCBmYWxzZSlcbiAgICAvLyB9KVxuXG4gICAgLy8gLy9cblxuXG4gICAgLy8gZmlsZUxhYmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBoYW5kbGVEcm9wLCBmYWxzZSk7XG4gICAgLy8gZmlsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG9uRmlsZUNoYW5nZSk7XG4gIH0pO1xuXG5cblxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgLy8gdmFyIERlZmF1bHRzID0gJC5mbi5zZWxlY3QyLmFtZC5yZXF1aXJlKCdzZWxlY3QyL2RlZmF1bHRzJyk7XG5cbiAgLy8gJC5leHRlbmQoRGVmYXVsdHMuZGVmYXVsdHMsIHtcbiAgLy8gICAgIHNlYXJjaElucHV0UGxhY2Vob2xkZXI6ICcnXG4gIC8vIH0pO1xuXG4gIC8vIHZhciBTZWFyY2hEcm9wZG93biA9ICQuZm4uc2VsZWN0Mi5hbWQucmVxdWlyZSgnc2VsZWN0Mi9kcm9wZG93bi9zZWFyY2gnKTtcblxuICAvLyB2YXIgX3JlbmRlclNlYXJjaERyb3Bkb3duID0gU2VhcmNoRHJvcGRvd24ucHJvdG90eXBlLnJlbmRlcjtcblxuICAvLyBTZWFyY2hEcm9wZG93bi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24oZGVjb3JhdGVkKSB7XG5cbiAgLy8gICAgIC8vIGludm9rZSBwYXJlbnQgbWV0aG9kXG4gIC8vICAgICB2YXIgJHJlbmRlcmVkID0gX3JlbmRlclNlYXJjaERyb3Bkb3duLmFwcGx5KHRoaXMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpKTtcblxuICAvLyAgICAgdGhpcy4kc2VhcmNoLmF0dHIoJ3BsYWNlaG9sZGVyJywgdGhpcy5vcHRpb25zLmdldCgnc2VhcmNoSW5wdXRQbGFjZWhvbGRlcicpKTtcblxuICAvLyAgICAgcmV0dXJuICRyZW5kZXJlZDtcbiAgLy8gfTtcblxuICAkKCc8ZGl2Lz4nLCB7XG4gICAgJ2NsYXNzJzogJ3ByZWxvYWRlcidcbiAgfSkuY3NzKHtcbiAgICAncG9zaXRpb24nOiAnZml4ZWQnLFxuICAgICd0b3AnOiAnMCcsXG4gICAgJ2xlZnQnOiAnMCcsXG4gICAgJ3dpZHRoJzogJzEwMHZ3JyxcbiAgICAnaGVpZ2h0JzogJzEwMHZoJyxcbiAgICAnYmFja2dyb3VuZC1jb2xvcic6ICcjZmZmJyxcbiAgICAnei1pbmRleCc6ICczMDAwJ1xuICB9KS5hcHBlbmRUbygnaHRtbCcpO1xuXG5cbiAgY29uc3QgY2hlY2tJbnB1dCA9IGZ1bmN0aW9uKGUpIHtcbiAgICBpZiAoZS50YXJnZXQudmFsdWUubGVuZ3RoID4gMCkge1xuICAgICAgJChlLnRhcmdldCkuYWRkQ2xhc3MoJ2lucHV0ZWQnKVxuICAgIH0gZWxzZSB7XG4gICAgICAkKGUudGFyZ2V0KS5yZW1vdmVDbGFzcygnaW5wdXRlZCcpXG4gICAgfVxuICB9O1xuXG4gICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICQoJy5qcy1zZWxlY3QtY29tYm8nKS5zZWxlY3QyKHtcbiAgICAgIC8vbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5XG4gICAgICBwbGFjZWhvbGRlcjogXCLQktCy0LXQtNC40YLQtSDQuNC70Lgg0LLRi9Cx0LXRgNC40YLQtSDQstCw0YDQuNCw0L3RglwiLFxuICAgICAgZHJvcGRvd25Dc3NDbGFzczogJ3NlbGVjdC1kcm9wZG93bicsXG4gICAgICBcImxhbmd1YWdlXCI6IHtcbiAgICAgICAgXCJub1Jlc3VsdHNcIjogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHJldHVybiAn0J3QuNGH0LXQs9C+INC90LUg0L3QsNC50LTQtdC90L4nO1xuICAgICAgICB9LFxuICAgICAgICBzZWFyY2hpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBcItCX0LDQs9GA0YPQt9C60LAuLi5cIjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy9zZWFyY2hJbnB1dFBsYWNlaG9sZGVyOiAnTXkgY3VzdG9tIHBsYWNlaG9sZGVyLi4uJ1xuICAgIH0pO1xuXG4gICAgJCgnLmpzLXNlbGVjdC1jb21ibycpLm9uKCdzZWxlY3QyOm9wZW4nLCBmdW5jdGlvbigpIHtcbiAgICAgICQoJy5zZWxlY3QyLXNlYXJjaCBpbnB1dCcpLm9mZignaW5wdXQnLCBjaGVja0lucHV0KTtcbiAgICAgICQoJy5zZWxlY3QyLXNlYXJjaCBpbnB1dCcpLm9uKCdpbnB1dCcsIGNoZWNrSW5wdXQpO1xuICAgIH0pO1xuXG4gICAgJCgnLmpzLXNlbGVjdC1jb21ibycpLm9uKCdzZWxlY3QyOmNsb3NpbmcnLCBmdW5jdGlvbigpIHtcbiAgICAgICQoJy5zZWxlY3QyLXNlYXJjaCBpbnB1dCcpLnJlbW92ZUNsYXNzKCdpbnB1dGVkJyk7XG4gICAgfSk7XG5cblxuXG5cblxuICAgICQoJy5qcy1zZWxlY3QtY29tYm8tb3BlbicpLnNlbGVjdDIoe1xuICAgICAgLy9taW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHlcbiAgICAgIHBsYWNlaG9sZGVyOiBcItCS0LLQtdC00LjRgtC1INC40LvQuCDQstGL0LHQtdGA0LjRgtC1INCy0LDRgNC40LDQvdGCXCIsXG4gICAgICBkcm9wZG93bkNzc0NsYXNzOiBbJ3NlbGVjdC1kcm9wZG93bicsICdzZWxlY3QtZHJvcGRvd24tbXVsdGknLCAnc2VsZWN0LWRyb3Bkb3duLS1vcGVuZWQnXSxcbiAgICAgIFwibGFuZ3VhZ2VcIjoge1xuICAgICAgICBcIm5vUmVzdWx0c1wiOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgcmV0dXJuICfQndC40YfQtdCz0L4g0L3QtSDQvdCw0LnQtNC10L3Qvic7XG4gICAgICAgIH0sXG4gICAgICAgIHNlYXJjaGluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIFwi0JfQsNCz0YDRg9C30LrQsC4uLlwiO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgLy9zZWFyY2hJbnB1dFBsYWNlaG9sZGVyOiAnTXkgY3VzdG9tIHBsYWNlaG9sZGVyLi4uJ1xuICAgIH0pLm9uKFwic2VsZWN0MjpjbG9zaW5nXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KS5vbihcInNlbGVjdDI6Y2xvc2VkXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgbGlzdC5zZWxlY3QyKFwib3BlblwiKTtcbiAgICB9KTtcblxuICAgICQoJy5qcy1zZWxlY3QtY29tYm8tb3BlbicpLnNlbGVjdDIoJ29wZW4nKTtcbiAgICAkKCcuc2VsZWN0LWRyb3Bkb3duLW11bHRpIGlucHV0Jykub24oJ2lucHV0JywgY2hlY2tJbnB1dCk7XG5cblxuXG5cblxuICAgICQoJy5qcy1zZWxlY3QtY29tYm8tc2VhcmNoaW5nJykuc2VsZWN0Mih7XG4gICAgICAvL21pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eVxuICAgICAgcGxhY2Vob2xkZXI6IFwi0JLQstC10LTQuNGC0LUg0LjQu9C4INCy0YvQsdC10YDQuNGC0LUg0LLQsNGA0LjQsNC90YJcIixcbiAgICAgIGRyb3Bkb3duQ3NzQ2xhc3M6IFtcbiAgICAgICAgJ3NlbGVjdC1kcm9wZG93bicsXG4gICAgICAgICdzZWxlY3QtZHJvcGRvd24tLW9wZW5lZCcsXG4gICAgICAgICdzZWxlY3QtZHJvcGRvd24tLXNlYXJjaGluZydcbiAgICAgIF0sXG4gICAgICBcImxhbmd1YWdlXCI6IHtcbiAgICAgICAgXCJub1Jlc3VsdHNcIjogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHJldHVybiAn0J3QuNGH0LXQs9C+INC90LUg0L3QsNC50LTQtdC90L4nO1xuICAgICAgICB9LFxuICAgICAgICBzZWFyY2hpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBcItCX0LDQs9GA0YPQt9C60LAuLi5cIjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGFqYXg6IHtcbiAgICAgICAgZGVsYXk6IDUwMDAwMDAwMCxcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9hbnRpYnJlZXouZ2l0aHViLmlvL3NlbGVjdC1kYXRhL3NlbGVjdC1kYXRhLmpzb24nLFxuICAgICAgfVxuICAgICAgLy9zZWFyY2hJbnB1dFBsYWNlaG9sZGVyOiAnTXkgY3VzdG9tIHBsYWNlaG9sZGVyLi4uJ1xuICAgIH0pLm9uKFwic2VsZWN0MjpjbG9zaW5nXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KS5vbihcInNlbGVjdDI6Y2xvc2VkXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgbGlzdC5zZWxlY3QyKFwib3BlblwiKTtcbiAgICB9KTtcblxuICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgnaW5wdXQnLCB7XG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICB9KTtcblxuICAgICQoJy5qcy1zZWxlY3QtY29tYm8tc2VhcmNoaW5nJykuc2VsZWN0Mignb3BlbicpO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAkKCcuc2VsZWN0LWRyb3Bkb3duLS1zZWFyY2hpbmcgaW5wdXQnKVswXS5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICB9LCA1MDApO1xuXG5cblxuXG4gICAgJCgnLmpzLXNlbGVjdC1jb21iby1ub3QtZm91bmQnKS5zZWxlY3QyKHtcbiAgICAgIC8vbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5XG4gICAgICBkcm9wZG93bkNzc0NsYXNzOiBbJ3NlbGVjdC1kcm9wZG93bicsICdzZWxlY3QtZHJvcGRvd24tLW9wZW5lZCcsICdzZWxlY3QtZHJvcGRvd24tLW5vdC1mb3VuZCddLFxuICAgICAgXCJsYW5ndWFnZVwiOiB7XG4gICAgICAgIFwibm9SZXN1bHRzXCI6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICByZXR1cm4gJ9Cd0LjRh9C10LPQviDQvdC1INC90LDQudC00LXQvdC+JztcbiAgICAgICAgfSxcbiAgICAgICAgc2VhcmNoaW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gXCLQl9Cw0LPRgNGD0LfQutCwLi4uXCI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vc2VhcmNoSW5wdXRQbGFjZWhvbGRlcjogJ015IGN1c3RvbSBwbGFjZWhvbGRlci4uLidcbiAgICB9KS5vbihcInNlbGVjdDI6Y2xvc2luZ1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSkub24oXCJzZWxlY3QyOmNsb3NlZFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGxpc3Quc2VsZWN0MihcIm9wZW5cIik7XG4gICAgfSk7XG5cbiAgICAkKCcuanMtc2VsZWN0LWNvbWJvLW5vdC1mb3VuZCcpLnNlbGVjdDIoJ29wZW4nKTtcbiAgICAkKCcuc2VsZWN0LWRyb3Bkb3duLS1ub3QtZm91bmQgaW5wdXQnKS52YWwoJ9GE0YvQstCw0L/QsCcpO1xuICAgICQoJy5zZWxlY3QtZHJvcGRvd24tLW5vdC1mb3VuZCBpbnB1dCcpWzBdLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuXG5cblxuICAgICQoJy5qcy1zZWxlY3Qtc2luZ2xlJykuc2VsZWN0Mih7XG4gICAgICBwbGFjZWhvbGRlcjogXCLQktGL0LHQtdGA0LjRgtC1INCy0LDRgNC40LDQvdGCXCIsXG4gICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHksXG4gICAgICBkcm9wZG93bkNzc0NsYXNzOiBbJ3NlbGVjdC1kcm9wZG93bicsJ3NlbGVjdC1kcm9wZG93bi0tc2luZ2xlJ11cbiAgICB9KVxuXG4gICAgdmFyIGxpc3QgPSAkKFwiLmpzLXNlbGVjdC1zaW5nbGUtb3BlblwiKS5zZWxlY3QyKHtcbiAgICAgIHBsYWNlaG9sZGVyOiBcItCS0YvQsdC10YDQuNGC0LUg0LLQsNGA0LjQsNC90YJcIixcbiAgICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcbiAgICAgIGRyb3Bkb3duQ3NzQ2xhc3M6IFtcbiAgICAgICAgJ3NlbGVjdC1kcm9wZG93bicsXG4gICAgICAgICdzZWxlY3QtZHJvcGRvd24tLXNpbmdsZScsXG4gICAgICAgICdzZWxlY3QtZHJvcGRvd24tLW9wZW5lZCdcbiAgICAgIF0sXG4gICAgICBjbG9zZU9uU2VsZWN0OiBmYWxzZVxuICAgIH0pLm9uKFwic2VsZWN0MjpjbG9zaW5nXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pLm9uKFwic2VsZWN0MjpjbG9zZWRcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBsaXN0LnNlbGVjdDIoXCJvcGVuXCIpO1xuICAgIH0pO1xuXG4gICAgbGlzdC5zZWxlY3QyKCdvcGVuJyk7XG5cblxuXG5cblxuXG5cbiAgICAkKCcuanMtc2VsZWN0LW11bHRpJykuc2VsZWN0Mih7XG4gICAgICAvL21pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eVxuICAgICAgcGxhY2Vob2xkZXI6IFwi0JLRi9Cx0LXRgNC40YLQtSDQstCw0YDQuNCw0L3RgtGLXCIsXG4gICAgICBkcm9wZG93bkNzc0NsYXNzOiBbXG4gICAgICAgICdzZWxlY3QtZHJvcGRvd24nLFxuICAgICAgICAnc2VsZWN0LWRyb3Bkb3duLW11bHRpJ1xuICAgICAgXSxcbiAgICAgIFwibGFuZ3VhZ2VcIjoge1xuICAgICAgICBcIm5vUmVzdWx0c1wiOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgcmV0dXJuICfQndC40YfQtdCz0L4g0L3QtSDQvdCw0LnQtNC10L3Qvic7XG4gICAgICAgIH0sXG4gICAgICAgIHNlYXJjaGluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIFwi0JfQsNCz0YDRg9C30LrQsC4uLlwiO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvL3NlYXJjaElucHV0UGxhY2Vob2xkZXI6ICdNeSBjdXN0b20gcGxhY2Vob2xkZXIuLi4nXG4gICAgfSk7XG5cbiAgICAkKCcuanMtc2VsZWN0LW11bHRpJykub24oJ3NlbGVjdDI6b3BlbicsIGZ1bmN0aW9uKCkge1xuICAgICAgJCgnLnNlbGVjdDItc2VhcmNoIGlucHV0Jykub2ZmKCdpbnB1dCcsIGNoZWNrSW5wdXQpO1xuICAgICAgJCgnLnNlbGVjdDItc2VhcmNoIGlucHV0Jykub24oJ2lucHV0JywgY2hlY2tJbnB1dCk7XG4gICAgfSk7XG5cbiAgICAkKCcuanMtc2VsZWN0LW11bHRpJykub24oJ3NlbGVjdDI6Y2xvc2luZycsIGZ1bmN0aW9uKCkge1xuICAgICAgJCgnLnNlbGVjdDItc2VhcmNoIGlucHV0JykucmVtb3ZlQ2xhc3MoJ2lucHV0ZWQnKTtcbiAgICB9KTtcblxuXG4gICAgJCgnLmpzLXNlbGVjdC1tdWx0aS1vcGVuJykuc2VsZWN0Mih7XG4gICAgICAvL21pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eVxuICAgICAgcGxhY2Vob2xkZXI6IFwi0JLRi9Cx0LXRgNC40YLQtSDQstCw0YDQuNCw0L3RgtGLXCIsXG4gICAgICBtYXhpbXVtU2VsZWN0aW9uTGVuZ3RoOiAzLFxuICAgICAgZHJvcGRvd25Dc3NDbGFzczogW1xuICAgICAgICAnc2VsZWN0LWRyb3Bkb3duJyxcbiAgICAgICAgJ3NlbGVjdC1kcm9wZG93bi0tb3BlbmVkJyxcbiAgICAgICAgJ3NlbGVjdC1kcm9wZG93bi1tdWx0aSdcbiAgICAgIF0sXG4gICAgICBcImxhbmd1YWdlXCI6IHtcbiAgICAgICAgXCJub1Jlc3VsdHNcIjogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHJldHVybiAn0J3QuNGH0LXQs9C+INC90LUg0L3QsNC50LTQtdC90L4nO1xuICAgICAgICB9LFxuICAgICAgICBzZWFyY2hpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBcItCX0LDQs9GA0YPQt9C60LAuLi5cIjtcbiAgICAgICAgfSxcbiAgICAgICAgbWF4aW11bVNlbGVjdGVkOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHJldHVybiBcItCc0LDQutGBLiDQutC+0LvQuNGH0LXRgdGC0LLQviDQstCw0YDQuNCw0L3RgtC+0LIgLSBcIiArIGUubWF4aW11bTtcbiAgICAgICAgfSxcbiAgICAgIH1cbiAgICAgIC8vc2VhcmNoSW5wdXRQbGFjZWhvbGRlcjogJ015IGN1c3RvbSBwbGFjZWhvbGRlci4uLidcbiAgICB9KS5vbihcInNlbGVjdDI6Y2xvc2luZ1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pLm9uKFwic2VsZWN0MjpjbG9zZWRcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBsaXN0LnNlbGVjdDIoXCJvcGVuXCIpO1xuICAgIH0pO1xuXG4gICAgJCgnLmpzLXNlbGVjdC1tdWx0aS1vcGVuJykuc2VsZWN0Mignb3BlbicpO1xuXG5cblxuXG5cblxuXG5cblxuICAgICQoJy5qcy1zZWxlY3QtbXVsdGktc2VhcmNoaW5nJykuc2VsZWN0Mih7XG4gICAgICAvL21pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eVxuICAgICAgcGxhY2Vob2xkZXI6IFwi0JLRi9Cx0LXRgNC40YLQtSDQstCw0YDQuNCw0L3RgtGLXCIsXG4gICAgICBkcm9wZG93bkNzc0NsYXNzOiBbXG4gICAgICAgICdzZWxlY3QtZHJvcGRvd24nLFxuICAgICAgICAnc2VsZWN0LWRyb3Bkb3duLS1vcGVuZWQnLFxuICAgICAgICAnc2VsZWN0LWRyb3Bkb3duLS1zZWFyY2hpbmctbXVsdGknXG4gICAgICBdLFxuICAgICAgXCJsYW5ndWFnZVwiOiB7XG4gICAgICAgIFwibm9SZXN1bHRzXCI6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICByZXR1cm4gJ9Cd0LjRh9C10LPQviDQvdC1INC90LDQudC00LXQvdC+JztcbiAgICAgICAgfSxcbiAgICAgICAgc2VhcmNoaW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gXCLQl9Cw0LPRgNGD0LfQutCwLi4uXCI7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBhamF4OiB7XG4gICAgICAgIGRlbGF5OiA1MDAwMDAwMDAsXG4gICAgICAgIHVybDogJ2h0dHBzOi8vYW50aWJyZWV6LmdpdGh1Yi5pby9zZWxlY3QtZGF0YS9zZWxlY3QtZGF0YS5qc29uJyxcbiAgICAgIH1cbiAgICAgIC8vc2VhcmNoSW5wdXRQbGFjZWhvbGRlcjogJ015IGN1c3RvbSBwbGFjZWhvbGRlci4uLidcbiAgICB9KS5vbihcInNlbGVjdDI6Y2xvc2luZ1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSkub24oXCJzZWxlY3QyOmNsb3NlZFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGxpc3Quc2VsZWN0MihcIm9wZW5cIik7XG4gICAgfSk7XG5cbiAgICB2YXIgZXZlbnQgPSBuZXcgRXZlbnQoJ2lucHV0Jywge1xuICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWUsXG4gICAgfSk7XG5cbiAgICAkKCcuanMtc2VsZWN0LW11bHRpLXNlYXJjaGluZycpLnNlbGVjdDIoJ29wZW4nKTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgJCgnLnNlbGVjdC1kcm9wZG93bi0tc2VhcmNoaW5nLW11bHRpICBpbnB1dCcpWzBdLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgIH0sIDUwMCk7XG5cblxuXG5cblxuXG5cblxuXG4gICAgJCgnLmpzLXNlbGVjdC1tdWx0aS1ub3QtZm91bmQnKS5zZWxlY3QyKHtcbiAgICAgIC8vbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5XG4gICAgICBkcm9wZG93bkNzc0NsYXNzOiBbXG4gICAgICAgICdzZWxlY3QtZHJvcGRvd24nLFxuICAgICAgICAnc2VsZWN0LWRyb3Bkb3duLS1vcGVuZWQnLFxuICAgICAgICAnc2VsZWN0LWRyb3Bkb3duLS1ub3QtZm91bmQtbXVsdGknXG4gICAgICBdLFxuICAgICAgXCJsYW5ndWFnZVwiOiB7XG4gICAgICAgIFwibm9SZXN1bHRzXCI6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICByZXR1cm4gJ9Cd0LjRh9C10LPQviDQvdC1INC90LDQudC00LXQvdC+JztcbiAgICAgICAgfSxcbiAgICAgICAgc2VhcmNoaW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gXCLQl9Cw0LPRgNGD0LfQutCwLi4uXCI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vc2VhcmNoSW5wdXRQbGFjZWhvbGRlcjogJ015IGN1c3RvbSBwbGFjZWhvbGRlci4uLidcbiAgICB9KS5vbihcInNlbGVjdDI6Y2xvc2luZ1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSkub24oXCJzZWxlY3QyOmNsb3NlZFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGxpc3Quc2VsZWN0MihcIm9wZW5cIik7XG4gICAgfSk7XG5cbiAgICAkKCcuanMtc2VsZWN0LW11bHRpLW5vdC1mb3VuZCcpLnNlbGVjdDIoJ29wZW4nKTtcbiAgICAkKCcuc2VsZWN0LWRyb3Bkb3duLS1ub3QtZm91bmQtbXVsdGkgaW5wdXQnKS52YWwoJ9GE0YvQstCw0L/QsCcpO1xuICAgICQoJy5zZWxlY3QtZHJvcGRvd24tLW5vdC1mb3VuZC1tdWx0aSBpbnB1dCcpWzBdLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuXG4gIH0pO1xuXG5cblxuXG5cblxuXG4gIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgd2luZG93LnNjcm9sbFRvKDAsMCk7XG4gICAgJCgnLnByZWxvYWRlcicpLmhpZGUoKTtcbiAgfSwgNTAwKVxuICAvLyAkKCcjeW91ci1zZWxlY3QtaWQnKS5vbmUoJ3NlbGVjdDI6b3BlbicsIGZ1bmN0aW9uKGUpIHtcbiAgLy8gICAkKCdpbnB1dC5zZWxlY3QyLXNlYXJjaF9fZmllbGQnKS5wcm9wKCdwbGFjZWhvbGRlcicsICdlbnRlciB1c2VybmFtZSBvciBjaXR5Jyk7XG4gIC8vIH0pO1xufSkoKTtcbiJdfQ==
