"use strict";$(".forms__button-item--example .forms__btn").on("click",(function(){var e=$(this);e.addClass("loading"),e.attr("disabled","true"),setTimeout((function(){e.removeClass("loading"),e.addClass("success")}),2e3),setTimeout((function(){e.removeClass("success"),e.removeAttr("disabled")}),4e3)})),function(){var e=!1;$(".checkbox").mouseup((function(t){e=!0,$(this).find(".checkbox__input").removeClass("focused")})),$(".checkbox__input").focus((function(t){e||$(this).addClass("focused"),e=!1})),$(".checkbox__input").blur((function(e){$(this).removeClass("focused")}))}(),function(e){"function"==typeof define&&define.amd?define(["../widgets/datepicker"],e):e(jQuery.datepicker)}((function(e){return e.regional.ru={closeText:"Закрыть",prevText:"&#x3C;Пред",nextText:"След&#x3E;",currentText:"Сегодня",monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthNamesShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],dayNames:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],dayNamesShort:["вск","пнд","втр","срд","чтв","птн","сбт"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],weekHeader:"Нед",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.setDefaults(e.regional.ru),e.regional.ru})),$(".dropdown:not(.dropdown-opened").select2({minimumResultsForSearch:1/0,dropdownCssClass:["calendar-dropdown"]}),$(".dropdown-opened").select2({minimumResultsForSearch:1/0,dropdownCssClass:["calendar-dropdown","calendar-dropdown-permanent"]}).on("select2:closing",(function(e){e.preventDefault()})).on("select2:closed",(function(e){list.select2("open")})),$(".dropdown").on("select2:close",(function(){$(this).next().find(".select2-selection").blur()})),$(".dropdown + .select2 .select2-selection__rendered").attr("tabindex","-1"),$(".dropdown-opened").select2("open"),function(){var e={minimumResultsForSearch:1/0,dropdownCssClass:"calendar-dropdown"};$(".input-date").datepicker({dateFormat:"dd.mm.yy",showOtherMonths:!0,regional:"ru",monthNamesShort:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],changeMonth:!0,changeYear:!0,yearRange:"1900:+10",beforeShow:function(){setTimeout((function(){$(".ui-datepicker-month").select2(e),$(".ui-datepicker-year").select2(e)}),0)},onChangeMonthYear:function(){setTimeout((function(){$(".ui-datepicker-month").select2(e),$(".ui-datepicker-year").select2(e)}),0)}}),$(".input-date-trigger").datepicker({dateFormat:"dd.mm.yy",showOtherMonths:!0,regional:"ru",monthNamesShort:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],changeMonth:!0,changeYear:!0,yearRange:"1900:+10",onChangeMonthYear:function(){setTimeout((function(){$(".ui-datepicker-month").select2(e),$(".ui-datepicker-year").select2(e)}),0)},onSelect:function(){setTimeout((function(){$(".ui-datepicker-month").select2(e),$(".ui-datepicker-year").select2(e)}),0)}}),$(".input-date-trigger-single").datepicker({dateFormat:"dd.mm.yy",showOtherMonths:!0,regional:"ru",monthNamesShort:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],changeMonth:!0,changeYear:!0,yearRange:"1900:+10",onChangeMonthYear:function(){setTimeout((function(){$(".ui-datepicker-month").select2(e),$(".ui-datepicker-year").select2(e)}),0)},onSelect:function(){setTimeout((function(){$(".ui-datepicker-month").select2(e),$(".ui-datepicker-year").select2(e)}),0)}}),$(".input-date-trigger-range").datepicker({range:"period",dateFormat:"dd.mm.yy",showOtherMonths:!0,regional:"ru",monthNamesShort:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],changeMonth:!0,changeYear:!0,yearRange:"1900:+10",onChangeMonthYear:function(){setTimeout((function(){$(".ui-datepicker-month").select2(e),$(".ui-datepicker-year").select2(e)}),0)},onSelect:function(t,n){console.log(n),setTimeout((function(){$(".input-date-trigger-range").find(".ui-datepicker-month").select2(e),$(".input-date-trigger-range").find(".ui-datepicker-year").select2(e)}),100)},beforeShow:function(e,t){console.log(t)}});var t=moment(),n=t.format("DD"),o=t.format("MM"),s=t.format("YYYY"),a="",r=[],c="";a="15"!==n?"15."+o+"."+s:"17."+o+"."+s,c="13"!==n?"13":"12",r=n>15?["02."+o+"."+s,"11."+o+"."+s]:["17."+o+"."+s,"26."+o+"."+s],$(".input-date-trigger").datepicker("setDate",a),$(".input-date-trigger-single").datepicker("setDate",a),$(".input-date-trigger-range").datepicker("setDate",r),$(".input-date-trigger-single .ui-datepicker-calendar td a").each((function(){$(this).text()===c&&$(this).addClass("hovered")})),$(".ui-datepicker-month").select2(e),$(".ui-datepicker-year").select2(e),$(".input-date").datepicker("refresh"),$(".input-date").inputmask("99.99.9999",{placeholder:"",showMaskOnHover:!1,showMaskOnFocus:!1,jitMasking:!0}),$(".input-date").on("focus",(function(e){var t=$(e.target);0===t.val().length&&t.parent().addClass("date-placeholder")})),$(".input-date").on("blur",(function(e){var t=$(e.target);t.val();t.parent().removeClass("date-placeholder")})),$(".input-date").on("input",(function(e){var t=$(e.target);t.val().length>0?t.parent().removeClass("date-placeholder"):t.parent().addClass("date-placeholder"),moment($(this).val(),"DD.MM.YYYY",!0).isValid()&&($(this).datepicker("hide"),$(this).datepicker("show"))})),$("#calendar-dropdown-month").select2({minimumResultsForSearch:1/0,dropdownCssClass:["calendar-dropdown","calendar-dropdown-permanent"],closeOnSelect:!1}).on("select2:closing",(function(e){e.preventDefault()})).on("select2:closed",(function(e){list.select2("open")})),$("#calendar-dropdown-month").select2("open"),$("#calendar-dropdown-year").select2({minimumResultsForSearch:1/0,dropdownCssClass:["calendar-dropdown","calendar-dropdown-permanent"],closeOnSelect:!1}).on("select2:closing",(function(e){e.preventDefault()})).on("select2:closed",(function(e){list.select2("open")})),$("#calendar-dropdown-year").select2("open")}(),$(".input-password-btn").on("click",(function(){var e=$(this),t=e.prev();e.toggleClass("shown"),e.hasClass("shown")?t.attr("type","text"):t.attr("type","password")})),$('.link[tabindex="-1"]').on("click",(function(e){e.preventDefault()})),$(".input-phone").inputmask("+7(999) 999-99-99"),function(){var e=document.querySelector(".scroll-to-top"),t=document.querySelector(".header");if(e){var n=function(){return t.getBoundingClientRect().height+50},o=window.pageYOffset>n(),s=function(){!e.classList.contains("active")&&e.classList.add("active")};o&&s(),document.addEventListener("scroll",(function(){!o&&window.pageYOffset>n()&&(s(),o=!0),o&&window.pageYOffset<n()&&(e.classList.contains("active")&&e.classList.remove("active"),o=!1)})),e.addEventListener("click",(function(e){e.preventDefault(),t.scrollIntoView({block:"start",behavior:"smooth"})}))}}(),function(){var e=!1;$(".switcher__label").mouseup((function(t){e=!0,$(this).removeClass("focused")})),$(".switcher__input").focus((function(t){e||$(this).parent().addClass("focused"),e=!1})),$(".switcher__input").blur((function(e){$(this).parent().removeClass("focused")})),$(".switcher-text__label").mouseup((function(t){e=!0,$(this).removeClass("focused")})),$(".switcher-text__input").focus((function(t){e||$(this).parent().addClass("focused"),e=!1})),$(".switcher-text__input").blur((function(e){$(this).parent().removeClass("focused")})),$(".switcher-icon__label").mouseup((function(t){e=!0,$(this).removeClass("focused")}))}(),$(".tabs__button").on("click",(function(){$(this).hasClass("active")||$(this).hasClass("disabled")||($(this).parents(".tabs").find(".tabs__button").removeClass("active"),$(this).addClass("active"))})),function(){var e=!1;$(".toggle").mouseup((function(t){e=!0,$(this).removeClass("focused")})),$(".toggle__input").focus((function(t){e||$(this).parent().addClass("focused"),e=!1})),$(".toggle__input").blur((function(e){$(this).parent().removeClass("focused")}))}(),function(){var e=document.querySelectorAll(".upload");if(e[0]){var t=function(e){if(e.files&&e.files[0]){var t=new FileReader;t.onloadstart=function(t){!function(e){r(e).addClass("loader")}(e),function(e){r(e).find(".upload__name").text(e.files[0].name)}(e),function(e){r(e).addClass("show")}(e)},t.onprogress=function(e){},t.onload=function(t){if(function(e){r(e).removeClass("loader")}(e),function(e){$(e).parent().addClass("hidden")}(e),$(e).parents(".upload").hasClass("multi")){$(".upload__input-wrap .upload__label").length;var n=r(e),o=n.parent(),s=n.clone(!0,!0);s.removeClass("show"),o.prepend(s),n.parents(".upload__input-results").find(".upload__result").each((function(e,t){$(this).attr("data-result",e)}));var a=$(e).parent().parent(),c=$(e).parent(),i=c.clone(!0,!0);i.removeClass("hidden"),a.prepend(i),c.parents(".upload__input-wrap").find(".upload__label").each((function(e,t){$(this).attr("data-input",e),$(this).children("input").attr("name","file-"+e)})),l(i,s)}},t.readAsDataURL(e.files[0])}},n=function(e){t(e.currentTarget),console.log(e.currentTarget)};e.forEach((function(e){var t=$(e).find(".upload__label"),n=$(e).find(".upload__result");$(e).hasClass("disabled")||l(t,n)}))}function o(e){e.preventDefault(),e.stopPropagation()}function s(e){e.currentTarget.classList.add("highlight")}function a(e){e.currentTarget.classList.remove("highlight")}function r(e){var t=$(e).parent().attr("data-input");return $(e).parents(".upload").find("[data-result='"+t+"']")}function c(e){var n=e.dataTransfer.files,o=e.currentTarget.querySelector("input");o.files&&o.files[0]&&(o.value="",/safari/i.test(navigator.userAgent)||(o.type="",o.type="file")),o.files=n,function(e){t(e)}(o)}function i(e){var t,n,o=$(e.currentTarget),s=o.parents(".upload__result"),a=s.attr("data-result"),r=s.parents(".upload").find("[data-input='"+a+"']"),c=r.children("input")[0];o.parents(".upload").hasClass("multi")?(n=a,(t=s).parents(".upload").find(".upload__label").each((function(e,t){if(e>n){var o=e-1;$(this).attr("data-input",o),$(this).children("input").attr("name","file-"+o)}else $(this).attr("data-input",e),$(this).children("input").attr("name","file-"+e)})),t.parents(".upload").find(".upload__result").each((function(e,t){e>n?$(this).attr("data-result",e-1):$(this).attr("data-result",e)})),s.remove(),r.remove()):(c.value="",/safari/i.test(navigator.userAgent)||(c.type="",c.type="file"),r.removeClass("hidden"),s.removeClass("show"))}function l(e,t){var r=e.children("input")[0],l=e[0],d=t.find(".upload__close")[0];["dragenter","dragover","dragleave","drop"].forEach((function(e){l.addEventListener(e,o,!1)})),["dragenter","dragover"].forEach((function(e){l.addEventListener(e,s,!1)})),["dragleave","drop"].forEach((function(e){l.addEventListener(e,a,!1)})),l.addEventListener("drop",c,!1),r.addEventListener("change",n),d.addEventListener("click",i)}}(),function(){$("<div/>",{class:"preloader"}).css({position:"fixed",top:"0",left:"0",width:"100vw",height:"100vh","background-color":"#fff","z-index":"3000"}).appendTo("html");var e=function(e){e.target.value.length>0?$(e.target).addClass("inputed"):$(e.target).removeClass("inputed")};$(document).ready((function(){$(".js-select-combo").select2({placeholder:"Введите или выберите вариант",dropdownCssClass:"select-dropdown",language:{noResults:function(){return"Ничего не найдено"},searching:function(){return"Загрузка..."}}}),$(".js-select-combo").on("select2:open",(function(){$(".select2-search input").off("input",e),$(".select2-search input").on("input",e)})),$(".js-select-combo").on("select2:closing",(function(){$(".select2-search input").removeClass("inputed")})),$(".js-select-combo-open").select2({placeholder:"Введите или выберите вариант",dropdownCssClass:["select-dropdown","select-dropdown-multi","select-dropdown--opened"],language:{noResults:function(){return"Ничего не найдено"},searching:function(){return"Загрузка..."}}}).on("select2:closing",(function(e){e.preventDefault()})).on("select2:closed",(function(e){n.select2("open")})),$(".js-select-combo-open").select2("open"),$(".select-dropdown-multi input").on("input",e),$(".js-select-combo-searching").select2({placeholder:"Введите или выберите вариант",dropdownCssClass:["select-dropdown","select-dropdown--opened","select-dropdown--searching"],language:{noResults:function(){return"Ничего не найдено"},searching:function(){return"Загрузка..."}},ajax:{delay:5e8,url:"https://antibreez.github.io/select-data/select-data.json"}}).on("select2:closing",(function(e){e.preventDefault()})).on("select2:closed",(function(e){n.select2("open")}));var t=new Event("input",{bubbles:!0,cancelable:!0});$(".js-select-combo-searching").select2("open"),setTimeout((function(){$(".select-dropdown--searching input")[0]&&$(".select-dropdown--searching input")[0].dispatchEvent(t)}),500),$(".js-select-combo-not-found").select2({dropdownCssClass:["select-dropdown","select-dropdown--opened","select-dropdown--not-found"],language:{noResults:function(){return"Ничего не найдено"},searching:function(){return"Загрузка..."}}}).on("select2:closing",(function(e){e.preventDefault()})).on("select2:closed",(function(e){n.select2("open")})),$(".js-select-combo-not-found").select2("open"),$(".select-dropdown--not-found input").val("фывапа"),$(".select-dropdown--not-found input")[0]&&$(".select-dropdown--not-found input")[0].dispatchEvent(t),$(".js-select-single").select2({placeholder:"Выберите вариант",minimumResultsForSearch:1/0,dropdownCssClass:["select-dropdown","select-dropdown--single"]});var n=$(".js-select-single-open").select2({placeholder:"Выберите вариант",minimumResultsForSearch:1/0,dropdownCssClass:["select-dropdown","select-dropdown--single","select-dropdown--opened"],closeOnSelect:!1}).on("select2:closing",(function(e){e.preventDefault()})).on("select2:closed",(function(e){n.select2("open")}));n.select2("open"),$(".js-select-multi").select2({placeholder:"Выберите варианты",dropdownCssClass:["select-dropdown","select-dropdown-multi"],language:{noResults:function(){return"Ничего не найдено"},searching:function(){return"Загрузка..."}}}),$(".js-select-multi").on("select2:open",(function(){$(".select2-search input").off("input",e),$(".select2-search input").on("input",e)})),$(".js-select-multi").on("select2:closing",(function(){$(".select2-search input").removeClass("inputed")})),$(".js-select-multi-open").select2({placeholder:"Выберите варианты",maximumSelectionLength:3,dropdownCssClass:["select-dropdown","select-dropdown--opened","select-dropdown-multi"],language:{noResults:function(){return"Ничего не найдено"},searching:function(){return"Загрузка..."},maximumSelected:function(e){return"Макс. количество вариантов - "+e.maximum}}}).on("select2:closing",(function(e){e.preventDefault()})).on("select2:closed",(function(e){n.select2("open")})),$(".js-select-multi-open").select2("open"),$(".js-select-multi-searching").select2({placeholder:"Выберите варианты",dropdownCssClass:["select-dropdown","select-dropdown--opened","select-dropdown--searching-multi"],language:{noResults:function(){return"Ничего не найдено"},searching:function(){return"Загрузка..."}},ajax:{delay:5e8,url:"https://antibreez.github.io/select-data/select-data.json"}}).on("select2:closing",(function(e){e.preventDefault()})).on("select2:closed",(function(e){n.select2("open")}));t=new Event("input",{bubbles:!0,cancelable:!0});$(".js-select-multi-searching").select2("open"),setTimeout((function(){$(".select-dropdown--searching-multi  input")[0]&&$(".select-dropdown--searching-multi  input")[0].dispatchEvent(t)}),500),$(".js-select-multi-not-found").select2({dropdownCssClass:["select-dropdown","select-dropdown--opened","select-dropdown--not-found-multi"],language:{noResults:function(){return"Ничего не найдено"},searching:function(){return"Загрузка..."}}}).on("select2:closing",(function(e){e.preventDefault()})).on("select2:closed",(function(e){n.select2("open")})),$(".js-select-multi-not-found").select2("open"),$(".select-dropdown--not-found-multi input").val("фывапа"),$(".select-dropdown--not-found-multi input")[0]&&$(".select-dropdown--not-found-multi input")[0].dispatchEvent(t)})),setTimeout((function(){window.scrollTo(0,0),$(".preloader").hide()}),500)}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyIsImJ1dHRvbi5qcyIsImNoZWNrYm94LmpzIiwiZGF0ZXBpY2tlci1ydS5qcyIsImRyb3Bkb3duLmpzIiwiaW5wdXQtZGF0ZS5qcyIsImlucHV0LmpzIiwibGluay5qcyIsInBob25lLW1hc2suanMiLCJzY3JvbGwuanMiLCJzd2l0Y2hlci5qcyIsInRhYnMuanMiLCJ0b2dnbGUuanMiLCJ1cGxvYWQuanMiLCJmb3Jtcy5qcyJdLCJuYW1lcyI6WyIkIiwib24iLCIkYnRuIiwidGhpcyIsImFkZENsYXNzIiwiYXR0ciIsInNldFRpbWVvdXQiLCJyZW1vdmVDbGFzcyIsInJlbW92ZUF0dHIiLCJtb3VzZXVwIiwiZSIsImZpbmQiLCJmb2N1cyIsImJsdXIiLCJmYWN0b3J5IiwiZGVmaW5lIiwiYW1kIiwialF1ZXJ5IiwiZGF0ZXBpY2tlciIsInJlZ2lvbmFsIiwicnUiLCJjbG9zZVRleHQiLCJwcmV2VGV4dCIsIm5leHRUZXh0IiwiY3VycmVudFRleHQiLCJtb250aE5hbWVzIiwibW9udGhOYW1lc1Nob3J0IiwiZGF5TmFtZXMiLCJkYXlOYW1lc1Nob3J0IiwiZGF5TmFtZXNNaW4iLCJ3ZWVrSGVhZGVyIiwiZGF0ZUZvcm1hdCIsImZpcnN0RGF5IiwiaXNSVEwiLCJzaG93TW9udGhBZnRlclllYXIiLCJ5ZWFyU3VmZml4Iiwic2V0RGVmYXVsdHMiLCJzZWxlY3QyIiwibWluaW11bVJlc3VsdHNGb3JTZWFyY2giLCJJbmZpbml0eSIsImRyb3Bkb3duQ3NzQ2xhc3MiLCJwcmV2ZW50RGVmYXVsdCIsImxpc3QiLCJuZXh0Iiwic2VsZWN0T3B0Iiwic2hvd090aGVyTW9udGhzIiwiY2hhbmdlTW9udGgiLCJjaGFuZ2VZZWFyIiwieWVhclJhbmdlIiwiYmVmb3JlU2hvdyIsIm9uQ2hhbmdlTW9udGhZZWFyIiwib25TZWxlY3QiLCJyYW5nZSIsImlucHV0IiwiaW5zdCIsImNvbnNvbGUiLCJsb2ciLCJjdXJyZW50IiwibW9tZW50IiwiZGF5IiwiZm9ybWF0IiwibW9udGgiLCJ5ZWFyIiwicGlja2VkRGF0ZSIsInBpY2tlZFBlcmlvZCIsImhvdmVyRGF0ZSIsImVhY2giLCJ0ZXh0IiwiaW5wdXRtYXNrIiwicGxhY2Vob2xkZXIiLCJzaG93TWFza09uSG92ZXIiLCJzaG93TWFza09uRm9jdXMiLCJqaXRNYXNraW5nIiwidGFyZ2V0IiwidmFsIiwibGVuZ3RoIiwicGFyZW50IiwiaXNWYWxpZCIsImNsb3NlT25TZWxlY3QiLCIkaW5wdXQiLCJwcmV2IiwidG9nZ2xlQ2xhc3MiLCJoYXNDbGFzcyIsInNjcm9sbEJ0biIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImhlYWRlciIsImdldEhlYWRlckhlaWdodCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImhlaWdodCIsImlzU2Nyb2xsZWQiLCJ3aW5kb3ciLCJwYWdlWU9mZnNldCIsInNob3dCdG4iLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmUiLCJzY3JvbGxJbnRvVmlldyIsImJsb2NrIiwiYmVoYXZpb3IiLCJwYXJlbnRzIiwidXBsb2FkcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJyZWFkVXJsIiwiZmlsZXMiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2Fkc3RhcnQiLCJnZXRSZXN1bHRCbG9jayIsImFkZExvYWRlciIsIm5hbWUiLCJmaWxsUmVzdWx0Iiwic2hvd1Jlc3VsdCIsIm9ucHJvZ3Jlc3MiLCJvbmxvYWQiLCJyZW1vdmVMb2FkZXIiLCJoaWRlTGFiZWwiLCIkcmVzdWx0IiwiJHJlc3VsdFdyYXAiLCIkbmV3UmVzdWx0IiwiY2xvbmUiLCJwcmVwZW5kIiwiaWQiLCJlbGVtZW50IiwiJGxhYmVsV3JhcCIsIiRsYWJlbCIsIiRuZXdMYWJlbCIsImNoaWxkcmVuIiwiYWRkRXZlbnRMaXN0ZW5lcnMiLCJyZWFkQXNEYXRhVVJMIiwib25GaWxlQ2hhbmdlIiwiY3VycmVudFRhcmdldCIsImZvckVhY2giLCJ1cGxvYWQiLCIkaW5wdXRMYWJlbCIsInByZXZlbnREZWZhdWx0cyIsInN0b3BQcm9wYWdhdGlvbiIsImhpZ2hsaWdodCIsInVuaGlnaGxpZ2h0IiwiJGlkeCIsImhhbmRsZURyb3AiLCJkYXRhVHJhbnNmZXIiLCJ2YWx1ZSIsInRlc3QiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ0eXBlIiwib25GaWxlRHJvcCIsIm9uRmlsZUNsZWFyIiwicmVzdWx0IiwiaWR4IiwiJHRhcmdldCIsIm5ld0lkIiwiaW5wdXRMYWJlbCIsImZpbGVDbGVhckJ0biIsImV2ZW50TmFtZSIsImNsYXNzIiwiY3NzIiwicG9zaXRpb24iLCJ0b3AiLCJsZWZ0Iiwid2lkdGgiLCJiYWNrZ3JvdW5kLWNvbG9yIiwiei1pbmRleCIsImFwcGVuZFRvIiwiY2hlY2tJbnB1dCIsInJlYWR5IiwibGFuZ3VhZ2UiLCJub1Jlc3VsdHMiLCJzZWFyY2hpbmciLCJvZmYiLCJhamF4IiwiZGVsYXkiLCJ1cmwiLCJldmVudCIsIkV2ZW50IiwiYnViYmxlcyIsImNhbmNlbGFibGUiLCJkaXNwYXRjaEV2ZW50IiwibWF4aW11bVNlbGVjdGlvbkxlbmd0aCIsIm1heGltdW1TZWxlY3RlZCIsIm1heGltdW0iLCJzY3JvbGxUbyIsImhpZGUiXSwibWFwcGluZ3MiOiJBQUFBLGFDQ0FBLEVBQUEsNENBRUFDLEdBQUEsU0FBQSxXQUNBLElBQUFDLEVBQUFGLEVBQUFHLE1BQ0FELEVBQUFFLFNBQUEsV0FDQUYsRUFBQUcsS0FBQSxXQUFBLFFBRUFDLFlBQUEsV0FDQUosRUFBQUssWUFBQSxXQUNBTCxFQUFBRSxTQUFBLGFBQ0EsS0FFQUUsWUFBQSxXQUNBSixFQUFBSyxZQUFBLFdBQ0FMLEVBQUFNLFdBQUEsY0FDQSxRQ2hCQSxXQUNBLElBQUFDLEdBQUEsRUFHQVQsRUFBQSxhQUFBUyxTQUFBLFNBQUFDLEdBQ0FELEdBQUEsRUFDQVQsRUFBQUcsTUFBQVEsS0FBQSxvQkFBQUosWUFBQSxjQUdBUCxFQUFBLG9CQUFBWSxPQUFBLFNBQUFGLEdBQ0FELEdBQ0FULEVBQUFHLE1BQUFD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LFFBVUFyQyxFQUFBLDhCQUFBcUMsUUFBQSxDQUVBZ0MsWUFBQSxvQkFDQTdCLGlCQUFBLENBQ0Esa0JBQ0EsMEJBQ0Esb0NBRUFpSSxTQUFBLENBQ0FDLFVBQUEsV0FDQSxNQUFBLHFCQUVBQyxVQUFBLFdBQ0EsTUFBQSxnQkFHQUUsS0FBQSxDQUNBQyxNQUFBLElBQ0FDLElBQUEsOERBR0E5SyxHQUFBLG1CQUFBLFNBQUFTLEdBQ0FBLEVBQUErQixvQkFDQXhDLEdBQUEsa0JBQUEsU0FBQVMsR0FDQWdDLEVBQUFMLFFBQUEsV0FHQTJJLEVBQUEsSUFBQUMsTUFBQSxRQUFBLENBQ0FDLFNBQUEsRUFDQUMsWUFBQSxJQUdBbkwsRUFBQSw4QkFBQXFDLFFBQUEsUUFDQS9CLFlBQUEsV0FDQU4sRUFBQSw0Q0FBQSxJQUNBQSxFQUFBLDRDQUFBLEdBQUFvTCxjQUFBSixLQUVBLEtBVUFoTCxFQUFBLDhCQUFBcUMsUUFBQSxDQUVBRyxpQkFBQSxDQUNBLGtCQUNBLDBCQUNBLG9DQUVBaUksU0FBQSxDQUNBQyxVQUFBLFdBQ0EsTUFBQSxxQkFFQUMsVUFBQSxXQUNBLE1BQUEsa0JBSUExSyxHQUFBLG1CQUFBLFNBQUFTLEdBQ0FBLEVBQUErQixvQkFDQXhDLEdBQUEsa0JBQUEsU0FBQVMsR0FDQWdDLEVBQUFMLFFBQUEsV0FHQXJDLEVBQUEsOEJBQUFxQyxRQUFBLFFBQ0FyQyxFQUFBLDJDQUFBMEUsSUFBQSxVQUVBMUUsRUFBQSwyQ0FBQSxJQUNBQSxFQUFBLDJDQUFBLEdBQUFvTCxjQUFBSixNQVVBMUssWUFBQSxXQUNBcUYsT0FBQTZGLFNBQUEsRUFBQSxHQUNBeEwsRUFBQSxjQUFBeUwsU0FDQSxLQTFWQSIsImZpbGUiOiJzY3JpcHQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoKSB7XG4gIHZhciAkYnRuID0gJCgnLmZvcm1zX19idXR0b24taXRlbS0tZXhhbXBsZSAuZm9ybXNfX2J0bicpO1xuICAkYnRuLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgJGJ0biA9ICQodGhpcyk7XG4gICAgJGJ0bi5hZGRDbGFzcygnbG9hZGluZycpO1xuICAgICRidG4uYXR0cignZGlzYWJsZWQnLCAndHJ1ZScpO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgJGJ0bi5yZW1vdmVDbGFzcygnbG9hZGluZycpO1xuICAgICAgJGJ0bi5hZGRDbGFzcygnc3VjY2VzcycpO1xuICAgIH0sIDIwMDApO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgJGJ0bi5yZW1vdmVDbGFzcygnc3VjY2VzcycpO1xuICAgICAgJGJ0bi5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuICAgIH0sIDQwMDApO1xuICB9KTtcbn0pKCk7XG5cbihmdW5jdGlvbiAoKSB7XG4gIHZhciBtb3VzZXVwID0gZmFsc2U7XG4gICQoJy5jaGVja2JveCcpLm1vdXNldXAoZnVuY3Rpb24gKGUpIHtcbiAgICBtb3VzZXVwID0gdHJ1ZTtcbiAgICAkKHRoaXMpLmZpbmQoJy5jaGVja2JveF9faW5wdXQnKS5yZW1vdmVDbGFzcygnZm9jdXNlZCcpO1xuICB9KTtcbiAgJCgnLmNoZWNrYm94X19pbnB1dCcpLmZvY3VzKGZ1bmN0aW9uIChlKSB7XG4gICAgaWYgKCFtb3VzZXVwKSB7XG4gICAgICAkKHRoaXMpLmFkZENsYXNzKCdmb2N1c2VkJyk7XG4gICAgfVxuXG4gICAgbW91c2V1cCA9IGZhbHNlO1xuICB9KTtcbiAgJCgnLmNoZWNrYm94X19pbnB1dCcpLmJsdXIoZnVuY3Rpb24gKGUpIHtcbiAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdmb2N1c2VkJyk7XG4gIH0pO1xufSkoKTtcbi8qIFJ1c3NpYW4gKFVURi04KSBpbml0aWFsaXNhdGlvbiBmb3IgdGhlIGpRdWVyeSBVSSBkYXRlIHBpY2tlciBwbHVnaW4uICovXG5cbi8qIFdyaXR0ZW4gYnkgQW5kcmV3IFN0cm9tbm92IChzdHJvbW5vdkBnbWFpbC5jb20pLiAqL1xuXG5cbihmdW5jdGlvbiAoZmFjdG9yeSkge1xuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXG4gICAgZGVmaW5lKFtcIi4uL3dpZGdldHMvZGF0ZXBpY2tlclwiXSwgZmFjdG9yeSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gQnJvd3NlciBnbG9iYWxzXG4gICAgZmFjdG9yeShqUXVlcnkuZGF0ZXBpY2tlcik7XG4gIH1cbn0pKGZ1bmN0aW9uIChkYXRlcGlja2VyKSB7XG4gIGRhdGVwaWNrZXIucmVnaW9uYWwucnUgPSB7XG4gICAgY2xvc2VUZXh0OiBcItCX0LDQutGA0YvRgtGMXCIsXG4gICAgcHJldlRleHQ6IFwiJiN4M0M70J/RgNC10LRcIixcbiAgICBuZXh0VGV4dDogXCLQodC70LXQtCYjeDNFO1wiLFxuICAgIGN1cnJlbnRUZXh0OiBcItCh0LXQs9C+0LTQvdGPXCIsXG4gICAgbW9udGhOYW1lczogW1wi0K/QvdCy0LDRgNGMXCIsIFwi0KTQtdCy0YDQsNC70YxcIiwgXCLQnNCw0YDRglwiLCBcItCQ0L/RgNC10LvRjFwiLCBcItCc0LDQuVwiLCBcItCY0Y7QvdGMXCIsIFwi0JjRjtC70YxcIiwgXCLQkNCy0LPRg9GB0YJcIiwgXCLQodC10L3RgtGP0LHRgNGMXCIsIFwi0J7QutGC0Y/QsdGA0YxcIiwgXCLQndC+0Y/QsdGA0YxcIiwgXCLQlNC10LrQsNCx0YDRjFwiXSxcbiAgICBtb250aE5hbWVzU2hvcnQ6IFtcItCv0L3QslwiLCBcItCk0LXQslwiLCBcItCc0LDRgFwiLCBcItCQ0L/RgFwiLCBcItCc0LDQuVwiLCBcItCY0Y7QvVwiLCBcItCY0Y7Qu1wiLCBcItCQ0LLQs1wiLCBcItCh0LXQvVwiLCBcItCe0LrRglwiLCBcItCd0L7Rj1wiLCBcItCU0LXQulwiXSxcbiAgICBkYXlOYW1lczogW1wi0LLQvtGB0LrRgNC10YHQtdC90YzQtVwiLCBcItC/0L7QvdC10LTQtdC70YzQvdC40LpcIiwgXCLQstGC0L7RgNC90LjQulwiLCBcItGB0YDQtdC00LBcIiwgXCLRh9C10YLQstC10YDQs1wiLCBcItC/0Y/RgtC90LjRhtCwXCIsIFwi0YHRg9Cx0LHQvtGC0LBcIl0sXG4gICAgZGF5TmFtZXNTaG9ydDogW1wi0LLRgdC6XCIsIFwi0L/QvdC0XCIsIFwi0LLRgtGAXCIsIFwi0YHRgNC0XCIsIFwi0YfRgtCyXCIsIFwi0L/RgtC9XCIsIFwi0YHQsdGCXCJdLFxuICAgIGRheU5hbWVzTWluOiBbXCLQktGBXCIsIFwi0J/QvVwiLCBcItCS0YJcIiwgXCLQodGAXCIsIFwi0KfRglwiLCBcItCf0YJcIiwgXCLQodCxXCJdLFxuICAgIHdlZWtIZWFkZXI6IFwi0J3QtdC0XCIsXG4gICAgZGF0ZUZvcm1hdDogXCJkZC5tbS55eVwiLFxuICAgIGZpcnN0RGF5OiAxLFxuICAgIGlzUlRMOiBmYWxzZSxcbiAgICBzaG93TW9udGhBZnRlclllYXI6IGZhbHNlLFxuICAgIHllYXJTdWZmaXg6IFwiXCJcbiAgfTtcbiAgZGF0ZXBpY2tlci5zZXREZWZhdWx0cyhkYXRlcGlja2VyLnJlZ2lvbmFsLnJ1KTtcbiAgcmV0dXJuIGRhdGVwaWNrZXIucmVnaW9uYWwucnU7XG59KTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgJCgnLmRyb3Bkb3duOm5vdCguZHJvcGRvd24tb3BlbmVkJykuc2VsZWN0Mih7XG4gICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5LFxuICAgIGRyb3Bkb3duQ3NzQ2xhc3M6IFsnY2FsZW5kYXItZHJvcGRvd24nXVxuICB9KTtcbiAgJCgnLmRyb3Bkb3duLW9wZW5lZCcpLnNlbGVjdDIoe1xuICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcbiAgICBkcm9wZG93bkNzc0NsYXNzOiBbJ2NhbGVuZGFyLWRyb3Bkb3duJywgJ2NhbGVuZGFyLWRyb3Bkb3duLXBlcm1hbmVudCddXG4gIH0pLm9uKFwic2VsZWN0MjpjbG9zaW5nXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9KS5vbihcInNlbGVjdDI6Y2xvc2VkXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgbGlzdC5zZWxlY3QyKFwib3BlblwiKTtcbiAgfSk7XG4gICQoJy5kcm9wZG93bicpLm9uKCdzZWxlY3QyOmNsb3NlJywgZnVuY3Rpb24gKCkge1xuICAgICQodGhpcykubmV4dCgpLmZpbmQoJy5zZWxlY3QyLXNlbGVjdGlvbicpLmJsdXIoKTtcbiAgfSk7XG4gICQoJy5kcm9wZG93biArIC5zZWxlY3QyIC5zZWxlY3QyLXNlbGVjdGlvbl9fcmVuZGVyZWQnKS5hdHRyKCd0YWJpbmRleCcsICctMScpO1xuICAkKCcuZHJvcGRvd24tb3BlbmVkJykuc2VsZWN0Mignb3BlbicpO1xufSkoKTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIHNlbGVjdE9wdCA9IHtcbiAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHksXG4gICAgZHJvcGRvd25Dc3NDbGFzczogJ2NhbGVuZGFyLWRyb3Bkb3duJ1xuICB9O1xuICAkKCcuaW5wdXQtZGF0ZScpLmRhdGVwaWNrZXIoe1xuICAgIGRhdGVGb3JtYXQ6ICdkZC5tbS55eScsXG4gICAgc2hvd090aGVyTW9udGhzOiB0cnVlLFxuICAgIHJlZ2lvbmFsOiAncnUnLFxuICAgIG1vbnRoTmFtZXNTaG9ydDogW1wi0K/QvdCy0LDRgNGMXCIsIFwi0KTQtdCy0YDQsNC70YxcIiwgXCLQnNCw0YDRglwiLCBcItCQ0L/RgNC10LvRjFwiLCBcItCc0LDQuVwiLCBcItCY0Y7QvdGMXCIsIFwi0JjRjtC70YxcIiwgXCLQkNCy0LPRg9GB0YJcIiwgXCLQodC10L3RgtGP0LHRgNGMXCIsIFwi0J7QutGC0Y/QsdGA0YxcIiwgXCLQndC+0Y/QsdGA0YxcIiwgXCLQlNC10LrQsNCx0YDRjFwiXSxcbiAgICBjaGFuZ2VNb250aDogdHJ1ZSxcbiAgICBjaGFuZ2VZZWFyOiB0cnVlLFxuICAgIHllYXJSYW5nZTogJzE5MDA6KzEwJyxcbiAgICBiZWZvcmVTaG93OiBmdW5jdGlvbiBiZWZvcmVTaG93KCkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy51aS1kYXRlcGlja2VyLW1vbnRoJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgICAkKCcudWktZGF0ZXBpY2tlci15ZWFyJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgfSwgMCk7XG4gICAgfSxcbiAgICBvbkNoYW5nZU1vbnRoWWVhcjogZnVuY3Rpb24gb25DaGFuZ2VNb250aFllYXIoKSB7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXItbW9udGgnKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICAgICAgICQoJy51aS1kYXRlcGlja2VyLXllYXInKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICAgICB9LCAwKTtcbiAgICB9XG4gIH0pO1xuICAkKCcuaW5wdXQtZGF0ZS10cmlnZ2VyJykuZGF0ZXBpY2tlcih7XG4gICAgZGF0ZUZvcm1hdDogJ2RkLm1tLnl5JyxcbiAgICBzaG93T3RoZXJNb250aHM6IHRydWUsXG4gICAgcmVnaW9uYWw6ICdydScsXG4gICAgbW9udGhOYW1lc1Nob3J0OiBbXCLQr9C90LLQsNGA0YxcIiwgXCLQpNC10LLRgNCw0LvRjFwiLCBcItCc0LDRgNGCXCIsIFwi0JDQv9GA0LXQu9GMXCIsIFwi0JzQsNC5XCIsIFwi0JjRjtC90YxcIiwgXCLQmNGO0LvRjFwiLCBcItCQ0LLQs9GD0YHRglwiLCBcItCh0LXQvdGC0Y/QsdGA0YxcIiwgXCLQntC60YLRj9Cx0YDRjFwiLCBcItCd0L7Rj9Cx0YDRjFwiLCBcItCU0LXQutCw0LHRgNGMXCJdLFxuICAgIGNoYW5nZU1vbnRoOiB0cnVlLFxuICAgIGNoYW5nZVllYXI6IHRydWUsXG4gICAgeWVhclJhbmdlOiAnMTkwMDorMTAnLFxuICAgIG9uQ2hhbmdlTW9udGhZZWFyOiBmdW5jdGlvbiBvbkNoYW5nZU1vbnRoWWVhcigpIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcudWktZGF0ZXBpY2tlci1tb250aCcpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXIteWVhcicpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgIH0sIDApO1xuICAgIH0sXG4gICAgb25TZWxlY3Q6IGZ1bmN0aW9uIG9uU2VsZWN0KCkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy51aS1kYXRlcGlja2VyLW1vbnRoJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgICAkKCcudWktZGF0ZXBpY2tlci15ZWFyJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgfSwgMCk7XG4gICAgfVxuICB9KTtcbiAgJCgnLmlucHV0LWRhdGUtdHJpZ2dlci1zaW5nbGUnKS5kYXRlcGlja2VyKHtcbiAgICBkYXRlRm9ybWF0OiAnZGQubW0ueXknLFxuICAgIHNob3dPdGhlck1vbnRoczogdHJ1ZSxcbiAgICByZWdpb25hbDogJ3J1JyxcbiAgICBtb250aE5hbWVzU2hvcnQ6IFtcItCv0L3QstCw0YDRjFwiLCBcItCk0LXQstGA0LDQu9GMXCIsIFwi0JzQsNGA0YJcIiwgXCLQkNC/0YDQtdC70YxcIiwgXCLQnNCw0LlcIiwgXCLQmNGO0L3RjFwiLCBcItCY0Y7Qu9GMXCIsIFwi0JDQstCz0YPRgdGCXCIsIFwi0KHQtdC90YLRj9Cx0YDRjFwiLCBcItCe0LrRgtGP0LHRgNGMXCIsIFwi0J3QvtGP0LHRgNGMXCIsIFwi0JTQtdC60LDQsdGA0YxcIl0sXG4gICAgY2hhbmdlTW9udGg6IHRydWUsXG4gICAgY2hhbmdlWWVhcjogdHJ1ZSxcbiAgICB5ZWFyUmFuZ2U6ICcxOTAwOisxMCcsXG4gICAgb25DaGFuZ2VNb250aFllYXI6IGZ1bmN0aW9uIG9uQ2hhbmdlTW9udGhZZWFyKCkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy51aS1kYXRlcGlja2VyLW1vbnRoJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgICAkKCcudWktZGF0ZXBpY2tlci15ZWFyJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgfSwgMCk7XG4gICAgfSxcbiAgICBvblNlbGVjdDogZnVuY3Rpb24gb25TZWxlY3QoKSB7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXItbW9udGgnKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICAgICAgICQoJy51aS1kYXRlcGlja2VyLXllYXInKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICAgICB9LCAwKTtcbiAgICB9XG4gIH0pO1xuICAkKCcuaW5wdXQtZGF0ZS10cmlnZ2VyLXJhbmdlJykuZGF0ZXBpY2tlcih7XG4gICAgcmFuZ2U6ICdwZXJpb2QnLFxuICAgIGRhdGVGb3JtYXQ6ICdkZC5tbS55eScsXG4gICAgc2hvd090aGVyTW9udGhzOiB0cnVlLFxuICAgIHJlZ2lvbmFsOiAncnUnLFxuICAgIG1vbnRoTmFtZXNTaG9ydDogW1wi0K/QvdCy0LDRgNGMXCIsIFwi0KTQtdCy0YDQsNC70YxcIiwgXCLQnNCw0YDRglwiLCBcItCQ0L/RgNC10LvRjFwiLCBcItCc0LDQuVwiLCBcItCY0Y7QvdGMXCIsIFwi0JjRjtC70YxcIiwgXCLQkNCy0LPRg9GB0YJcIiwgXCLQodC10L3RgtGP0LHRgNGMXCIsIFwi0J7QutGC0Y/QsdGA0YxcIiwgXCLQndC+0Y/QsdGA0YxcIiwgXCLQlNC10LrQsNCx0YDRjFwiXSxcbiAgICBjaGFuZ2VNb250aDogdHJ1ZSxcbiAgICBjaGFuZ2VZZWFyOiB0cnVlLFxuICAgIHllYXJSYW5nZTogJzE5MDA6KzEwJyxcbiAgICBvbkNoYW5nZU1vbnRoWWVhcjogZnVuY3Rpb24gb25DaGFuZ2VNb250aFllYXIoKSB7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXItbW9udGgnKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICAgICAgICQoJy51aS1kYXRlcGlja2VyLXllYXInKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICAgICB9LCAwKTtcbiAgICB9LFxuICAgIG9uU2VsZWN0OiBmdW5jdGlvbiBvblNlbGVjdChpbnB1dCwgaW5zdCkge1xuICAgICAgY29uc29sZS5sb2coaW5zdCk7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLmlucHV0LWRhdGUtdHJpZ2dlci1yYW5nZScpLmZpbmQoJy51aS1kYXRlcGlja2VyLW1vbnRoJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgICAkKCcuaW5wdXQtZGF0ZS10cmlnZ2VyLXJhbmdlJykuZmluZCgnLnVpLWRhdGVwaWNrZXIteWVhcicpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgIH0sIDEwMCk7XG4gICAgfSxcbiAgICBiZWZvcmVTaG93OiBmdW5jdGlvbiBiZWZvcmVTaG93KGlucHV0LCBpbnN0KSB7XG4gICAgICBjb25zb2xlLmxvZyhpbnN0KTtcbiAgICB9XG4gIH0pO1xuICB2YXIgY3VycmVudCA9IG1vbWVudCgpO1xuICB2YXIgZGF5ID0gY3VycmVudC5mb3JtYXQoJ0REJyk7XG4gIHZhciBtb250aCA9IGN1cnJlbnQuZm9ybWF0KCdNTScpO1xuICB2YXIgeWVhciA9IGN1cnJlbnQuZm9ybWF0KCdZWVlZJyk7XG4gIHZhciBwaWNrZWREYXRlID0gJyc7XG4gIHZhciBwaWNrZWRQZXJpb2QgPSBbXTtcbiAgdmFyIGhvdmVyRGF0ZSA9ICcnO1xuXG4gIGlmIChkYXkgIT09ICcxNScpIHtcbiAgICBwaWNrZWREYXRlID0gMTUgKyAnLicgKyBtb250aCArICcuJyArIHllYXI7XG4gIH0gZWxzZSB7XG4gICAgcGlja2VkRGF0ZSA9IDE3ICsgJy4nICsgbW9udGggKyAnLicgKyB5ZWFyO1xuICB9XG5cbiAgaWYgKGRheSAhPT0gJzEzJykge1xuICAgIGhvdmVyRGF0ZSA9ICcxMyc7XG4gIH0gZWxzZSB7XG4gICAgaG92ZXJEYXRlID0gJzEyJztcbiAgfVxuXG4gIGRheSA+IDE1ID8gcGlja2VkUGVyaW9kID0gWycwMi4nICsgbW9udGggKyAnLicgKyB5ZWFyLCAnMTEuJyArIG1vbnRoICsgJy4nICsgeWVhcl0gOiBwaWNrZWRQZXJpb2QgPSBbJzE3LicgKyBtb250aCArICcuJyArIHllYXIsICcyNi4nICsgbW9udGggKyAnLicgKyB5ZWFyXTtcbiAgJCgnLmlucHV0LWRhdGUtdHJpZ2dlcicpLmRhdGVwaWNrZXIoJ3NldERhdGUnLCBwaWNrZWREYXRlKTtcbiAgJCgnLmlucHV0LWRhdGUtdHJpZ2dlci1zaW5nbGUnKS5kYXRlcGlja2VyKCdzZXREYXRlJywgcGlja2VkRGF0ZSk7XG4gICQoJy5pbnB1dC1kYXRlLXRyaWdnZXItcmFuZ2UnKS5kYXRlcGlja2VyKCdzZXREYXRlJywgcGlja2VkUGVyaW9kKTtcbiAgJCgnLmlucHV0LWRhdGUtdHJpZ2dlci1zaW5nbGUgLnVpLWRhdGVwaWNrZXItY2FsZW5kYXIgdGQgYScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgIGlmICgkKHRoaXMpLnRleHQoKSA9PT0gaG92ZXJEYXRlKSB7XG4gICAgICAkKHRoaXMpLmFkZENsYXNzKCdob3ZlcmVkJyk7XG4gICAgfVxuICB9KTtcbiAgJCgnLnVpLWRhdGVwaWNrZXItbW9udGgnKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICQoJy51aS1kYXRlcGlja2VyLXllYXInKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICQoJy5pbnB1dC1kYXRlJykuZGF0ZXBpY2tlcigncmVmcmVzaCcpO1xuICAkKCcuaW5wdXQtZGF0ZScpLmlucHV0bWFzayhcIjk5Ljk5Ljk5OTlcIiwge1xuICAgIC8vbWFzazogJ21tL2RkL3l5eXknLFxuICAgIHBsYWNlaG9sZGVyOiAnJyxcbiAgICBzaG93TWFza09uSG92ZXI6IGZhbHNlLFxuICAgIHNob3dNYXNrT25Gb2N1czogZmFsc2UsXG4gICAgaml0TWFza2luZzogdHJ1ZVxuICB9KTtcbiAgJCgnLmlucHV0LWRhdGUnKS5vbignZm9jdXMnLCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciB0YXJnZXQgPSAkKGUudGFyZ2V0KTtcbiAgICB2YXIgdmFsID0gdGFyZ2V0LnZhbCgpO1xuXG4gICAgaWYgKHZhbC5sZW5ndGggPT09IDApIHtcbiAgICAgIHRhcmdldC5wYXJlbnQoKS5hZGRDbGFzcygnZGF0ZS1wbGFjZWhvbGRlcicpO1xuICAgIH1cbiAgfSk7XG4gICQoJy5pbnB1dC1kYXRlJykub24oJ2JsdXInLCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciB0YXJnZXQgPSAkKGUudGFyZ2V0KTtcbiAgICB2YXIgdmFsID0gdGFyZ2V0LnZhbCgpO1xuICAgIHRhcmdldC5wYXJlbnQoKS5yZW1vdmVDbGFzcygnZGF0ZS1wbGFjZWhvbGRlcicpO1xuICB9KTtcbiAgJCgnLmlucHV0LWRhdGUnKS5vbignaW5wdXQnLCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciB0YXJnZXQgPSAkKGUudGFyZ2V0KTtcbiAgICB2YXIgdmFsID0gdGFyZ2V0LnZhbCgpO1xuXG4gICAgaWYgKHZhbC5sZW5ndGggPiAwKSB7XG4gICAgICB0YXJnZXQucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ2RhdGUtcGxhY2Vob2xkZXInKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGFyZ2V0LnBhcmVudCgpLmFkZENsYXNzKCdkYXRlLXBsYWNlaG9sZGVyJyk7XG4gICAgfVxuXG4gICAgdmFyIGlzVmFsaWQgPSBtb21lbnQoJCh0aGlzKS52YWwoKSwgJ0RELk1NLllZWVknLCB0cnVlKS5pc1ZhbGlkKCk7XG5cbiAgICBpZiAoaXNWYWxpZCkge1xuICAgICAgJCh0aGlzKS5kYXRlcGlja2VyKCdoaWRlJyk7XG4gICAgICAkKHRoaXMpLmRhdGVwaWNrZXIoJ3Nob3cnKTtcbiAgICB9XG4gIH0pOyAvLyAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgLy8gICBmdW5jdGlvbiBmMSgpIHtcbiAgLy8gICAgICQoJy5pbnB1dC1kYXRlJykuZGF0ZXBpY2tlcigncmVmcmVzaCcpO1xuICAvLyAgIH07XG4gIC8vICAgZnVuY3Rpb24gZjIoKSB7XG4gIC8vICAgICBjb25zb2xlLmxvZygkKCcudWktZGF0ZXBpY2tlci1tb250aCcpWzBdKTtcbiAgLy8gICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gIC8vICAgICAgICQoJy51aS1kYXRlcGlja2VyLW1vbnRoJykuc2VsZWN0MigpO1xuICAvLyAgICAgfSwgNTAwMCk7XG4gIC8vICAgICAvLyQoJy51aS1kYXRlcGlja2VyLW1vbnRoJykuc2VsZWN0MigpO1xuICAvLyAgIH07XG4gIC8vICAgdmFyIGRmZCA9ICQuRGVmZXJyZWQoKTtcbiAgLy8gICBkZmQuZG9uZShmMSkuZG9uZShmMik7XG4gIC8vICAgZGZkLnJlc29sdmUoJ2EnKTtcbiAgLy8gfSk7XG5cbiAgJCgnI2NhbGVuZGFyLWRyb3Bkb3duLW1vbnRoJykuc2VsZWN0Mih7XG4gICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5LFxuICAgIGRyb3Bkb3duQ3NzQ2xhc3M6IFsnY2FsZW5kYXItZHJvcGRvd24nLCAnY2FsZW5kYXItZHJvcGRvd24tcGVybWFuZW50J10sXG4gICAgY2xvc2VPblNlbGVjdDogZmFsc2VcbiAgfSkub24oXCJzZWxlY3QyOmNsb3NpbmdcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIH0pLm9uKFwic2VsZWN0MjpjbG9zZWRcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICBsaXN0LnNlbGVjdDIoXCJvcGVuXCIpO1xuICB9KTtcbiAgJCgnI2NhbGVuZGFyLWRyb3Bkb3duLW1vbnRoJykuc2VsZWN0Mignb3BlbicpO1xuICAkKCcjY2FsZW5kYXItZHJvcGRvd24teWVhcicpLnNlbGVjdDIoe1xuICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcbiAgICBkcm9wZG93bkNzc0NsYXNzOiBbJ2NhbGVuZGFyLWRyb3Bkb3duJywgJ2NhbGVuZGFyLWRyb3Bkb3duLXBlcm1hbmVudCddLFxuICAgIGNsb3NlT25TZWxlY3Q6IGZhbHNlXG4gIH0pLm9uKFwic2VsZWN0MjpjbG9zaW5nXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9KS5vbihcInNlbGVjdDI6Y2xvc2VkXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgbGlzdC5zZWxlY3QyKFwib3BlblwiKTtcbiAgfSk7XG4gICQoJyNjYWxlbmRhci1kcm9wZG93bi15ZWFyJykuc2VsZWN0Mignb3BlbicpO1xufSkoKTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgJCgnLmlucHV0LXBhc3N3b3JkLWJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgJGJ0biA9ICQodGhpcyk7XG4gICAgdmFyICRpbnB1dCA9ICRidG4ucHJldigpO1xuICAgICRidG4udG9nZ2xlQ2xhc3MoJ3Nob3duJyk7XG5cbiAgICBpZiAoJGJ0bi5oYXNDbGFzcygnc2hvd24nKSkge1xuICAgICAgJGlucHV0LmF0dHIoJ3R5cGUnLCAndGV4dCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkaW5wdXQuYXR0cigndHlwZScsICdwYXNzd29yZCcpO1xuICAgIH1cbiAgfSk7XG59KSgpO1xuXG4oZnVuY3Rpb24gKCkge1xuICAkKCcubGlua1t0YWJpbmRleD1cIi0xXCJdJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIH0pO1xufSkoKTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgLy8gY29uc3QgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmlucHV0LXBob25lJyk7XG4gIC8vIGlmICghaW5wdXRzWzBdKSB7XG4gIC8vICAgcmV0dXJuO1xuICAvLyB9XG4gIC8vIGNvbnN0IGltID0gbmV3IElucHV0bWFzayhcIis3KDk5OSkgOTk5LTk5LTk5XCIpO1xuICAvLyBpbnB1dHMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gIC8vICAgaW0ubWFzayhpdGVtKTtcbiAgLy8gfSlcbiAgJCgnLmlucHV0LXBob25lJykuaW5wdXRtYXNrKCcrNyg5OTkpIDk5OS05OS05OScpO1xufSkoKTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIHNjcm9sbEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zY3JvbGwtdG8tdG9wJyk7XG4gIHZhciBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyJyk7XG5cbiAgaWYgKCFzY3JvbGxCdG4pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgZ2V0SGVhZGVySGVpZ2h0ID0gZnVuY3Rpb24gZ2V0SGVhZGVySGVpZ2h0KCkge1xuICAgIHJldHVybiBoZWFkZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0ICsgNTA7XG4gIH07XG5cbiAgdmFyIGlzU2Nyb2xsZWQgPSB3aW5kb3cucGFnZVlPZmZzZXQgPiBnZXRIZWFkZXJIZWlnaHQoKTtcblxuICB2YXIgc2hvd0J0biA9IGZ1bmN0aW9uIHNob3dCdG4oKSB7XG4gICAgIXNjcm9sbEJ0bi5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpICYmIHNjcm9sbEJ0bi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgfTtcblxuICB2YXIgaGlkZUhlYWRlciA9IGZ1bmN0aW9uIGhpZGVIZWFkZXIoKSB7XG4gICAgc2Nyb2xsQnRuLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykgJiYgc2Nyb2xsQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICB9O1xuXG4gIHZhciBvblNjcm9sbCA9IGZ1bmN0aW9uIG9uU2Nyb2xsKCkge1xuICAgIGlmICghaXNTY3JvbGxlZCAmJiB3aW5kb3cucGFnZVlPZmZzZXQgPiBnZXRIZWFkZXJIZWlnaHQoKSkge1xuICAgICAgc2hvd0J0bigpO1xuICAgICAgaXNTY3JvbGxlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKGlzU2Nyb2xsZWQgJiYgd2luZG93LnBhZ2VZT2Zmc2V0IDwgZ2V0SGVhZGVySGVpZ2h0KCkpIHtcbiAgICAgIGhpZGVIZWFkZXIoKTtcbiAgICAgIGlzU2Nyb2xsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgaWYgKGlzU2Nyb2xsZWQpIHtcbiAgICBzaG93QnRuKCk7XG4gIH1cblxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBvblNjcm9sbCk7XG4gIHNjcm9sbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGhlYWRlci5zY3JvbGxJbnRvVmlldyh7XG4gICAgICBibG9jazogXCJzdGFydFwiLFxuICAgICAgYmVoYXZpb3I6IFwic21vb3RoXCJcbiAgICB9KTtcbiAgfSk7XG59KSgpO1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgbW91c2V1cCA9IGZhbHNlO1xuICAkKCcuc3dpdGNoZXJfX2xhYmVsJykubW91c2V1cChmdW5jdGlvbiAoZSkge1xuICAgIG1vdXNldXAgPSB0cnVlO1xuICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2ZvY3VzZWQnKTtcbiAgfSk7XG4gICQoJy5zd2l0Y2hlcl9faW5wdXQnKS5mb2N1cyhmdW5jdGlvbiAoZSkge1xuICAgIGlmICghbW91c2V1cCkge1xuICAgICAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcygnZm9jdXNlZCcpO1xuICAgIH1cblxuICAgIG1vdXNldXAgPSBmYWxzZTtcbiAgfSk7XG4gICQoJy5zd2l0Y2hlcl9faW5wdXQnKS5ibHVyKGZ1bmN0aW9uIChlKSB7XG4gICAgJCh0aGlzKS5wYXJlbnQoKS5yZW1vdmVDbGFzcygnZm9jdXNlZCcpO1xuICB9KTtcbiAgJCgnLnN3aXRjaGVyLXRleHRfX2xhYmVsJykubW91c2V1cChmdW5jdGlvbiAoZSkge1xuICAgIG1vdXNldXAgPSB0cnVlO1xuICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2ZvY3VzZWQnKTtcbiAgfSk7XG4gICQoJy5zd2l0Y2hlci10ZXh0X19pbnB1dCcpLmZvY3VzKGZ1bmN0aW9uIChlKSB7XG4gICAgaWYgKCFtb3VzZXVwKSB7XG4gICAgICAkKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKCdmb2N1c2VkJyk7XG4gICAgfVxuXG4gICAgbW91c2V1cCA9IGZhbHNlO1xuICB9KTtcbiAgJCgnLnN3aXRjaGVyLXRleHRfX2lucHV0JykuYmx1cihmdW5jdGlvbiAoZSkge1xuICAgICQodGhpcykucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ2ZvY3VzZWQnKTtcbiAgfSk7XG4gICQoJy5zd2l0Y2hlci1pY29uX19sYWJlbCcpLm1vdXNldXAoZnVuY3Rpb24gKGUpIHtcbiAgICBtb3VzZXVwID0gdHJ1ZTtcbiAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdmb2N1c2VkJyk7XG4gIH0pO1xufSkoKTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgJCgnLnRhYnNfX2J1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoISQodGhpcykuaGFzQ2xhc3MoJ2FjdGl2ZScpICYmICEkKHRoaXMpLmhhc0NsYXNzKCdkaXNhYmxlZCcpKSB7XG4gICAgICAkKHRoaXMpLnBhcmVudHMoJy50YWJzJykuZmluZCgnLnRhYnNfX2J1dHRvbicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH1cbiAgfSk7XG59KSgpO1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgbW91c2V1cCA9IGZhbHNlO1xuICAkKCcudG9nZ2xlJykubW91c2V1cChmdW5jdGlvbiAoZSkge1xuICAgIG1vdXNldXAgPSB0cnVlO1xuICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2ZvY3VzZWQnKTtcbiAgfSk7XG4gICQoJy50b2dnbGVfX2lucHV0JykuZm9jdXMoZnVuY3Rpb24gKGUpIHtcbiAgICBpZiAoIW1vdXNldXApIHtcbiAgICAgICQodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoJ2ZvY3VzZWQnKTtcbiAgICB9XG5cbiAgICBtb3VzZXVwID0gZmFsc2U7XG4gIH0pO1xuICAkKCcudG9nZ2xlX19pbnB1dCcpLmJsdXIoZnVuY3Rpb24gKGUpIHtcbiAgICAkKHRoaXMpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCdmb2N1c2VkJyk7XG4gIH0pO1xufSkoKTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIHVwbG9hZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudXBsb2FkJyk7XG5cbiAgaWYgKCF1cGxvYWRzWzBdKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJldmVudERlZmF1bHRzKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfVxuXG4gIDtcblxuICBmdW5jdGlvbiBoaWdobGlnaHQoZSkge1xuICAgIGUuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWdobGlnaHQnKTtcbiAgfVxuXG4gIDtcblxuICBmdW5jdGlvbiB1bmhpZ2hsaWdodChlKSB7XG4gICAgZS5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZ2hsaWdodCcpO1xuICB9XG5cbiAgO1xuXG4gIGZ1bmN0aW9uIGdldFJlc3VsdEJsb2NrKGlucHV0KSB7XG4gICAgdmFyICRpZHggPSAkKGlucHV0KS5wYXJlbnQoKS5hdHRyKCdkYXRhLWlucHV0Jyk7XG4gICAgcmV0dXJuICQoaW5wdXQpLnBhcmVudHMoJy51cGxvYWQnKS5maW5kKFwiW2RhdGEtcmVzdWx0PSdcIiArICRpZHggKyBcIiddXCIpO1xuICB9XG5cbiAgO1xuXG4gIGZ1bmN0aW9uIGZpbGxSZXN1bHQoaW5wdXQpIHtcbiAgICB2YXIgJHJlc3VsdCA9IGdldFJlc3VsdEJsb2NrKGlucHV0KTtcbiAgICB2YXIgJG5hbWUgPSAkcmVzdWx0LmZpbmQoJy51cGxvYWRfX25hbWUnKTtcbiAgICAkbmFtZS50ZXh0KGlucHV0LmZpbGVzWzBdLm5hbWUpO1xuICB9XG5cbiAgO1xuXG4gIGZ1bmN0aW9uIHNob3dSZXN1bHQoaW5wdXQpIHtcbiAgICB2YXIgJHJlc3VsdCA9IGdldFJlc3VsdEJsb2NrKGlucHV0KTtcbiAgICAkcmVzdWx0LmFkZENsYXNzKCdzaG93Jyk7XG4gIH1cblxuICA7XG5cbiAgZnVuY3Rpb24gaGlkZVJlc3VsdChpbnB1dCkge1xuICAgIHZhciAkcmVzdWx0ID0gZ2V0UmVzdWx0QmxvY2soaW5wdXQpO1xuICAgICRyZXN1bHQucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcbiAgfVxuXG4gIDtcblxuICBmdW5jdGlvbiBzaG93TGFiZWwoaW5wdXQpIHtcbiAgICB2YXIgJGxhYmVsID0gJChpbnB1dCkucGFyZW50KCk7XG4gICAgJGxhYmVsLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgfVxuXG4gIDtcblxuICBmdW5jdGlvbiBoaWRlTGFiZWwoaW5wdXQpIHtcbiAgICB2YXIgJGxhYmVsID0gJChpbnB1dCkucGFyZW50KCk7XG4gICAgJGxhYmVsLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgfVxuXG4gIDtcblxuICBmdW5jdGlvbiBhZGRMb2FkZXIoaW5wdXQpIHtcbiAgICB2YXIgJHJlc3VsdCA9IGdldFJlc3VsdEJsb2NrKGlucHV0KTtcbiAgICAkcmVzdWx0LmFkZENsYXNzKCdsb2FkZXInKTtcbiAgfVxuXG4gIDtcblxuICBmdW5jdGlvbiByZW1vdmVMb2FkZXIoaW5wdXQpIHtcbiAgICB2YXIgJHJlc3VsdCA9IGdldFJlc3VsdEJsb2NrKGlucHV0KTtcbiAgICAkcmVzdWx0LnJlbW92ZUNsYXNzKCdsb2FkZXInKTtcbiAgfVxuXG4gIDtcblxuICB2YXIgcmVhZFVybCA9IGZ1bmN0aW9uIHJlYWRVcmwoaW5wdXQpIHtcbiAgICBpZiAoaW5wdXQuZmlsZXMgJiYgaW5wdXQuZmlsZXNbMF0pIHtcbiAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuXG4gICAgICByZWFkZXIub25sb2Fkc3RhcnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAvL3Byb2dyZXNzLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbiAgICAgICAgYWRkTG9hZGVyKGlucHV0KTtcbiAgICAgICAgZmlsbFJlc3VsdChpbnB1dCk7XG4gICAgICAgIHNob3dSZXN1bHQoaW5wdXQpO1xuICAgICAgfTtcblxuICAgICAgcmVhZGVyLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbiAoZSkge307XG5cbiAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAvLyBmaWxlSW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgZS50YXJnZXQucmVzdWx0KTtcbiAgICAgICAgLy8gZmlsZU5hbWUudGV4dENvbnRlbnQgPSBpbnB1dC5maWxlc1swXS5uYW1lO1xuICAgICAgICAvLyAhZmlsZVJlc3VsdC5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3cnKSAmJiBmaWxlUmVzdWx0LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbiAgICAgICAgLy8gcHJvZ3Jlc3MuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgICAgICAvLyBiYXIuc3R5bGUud2lkdGggPSAwO1xuICAgICAgICByZW1vdmVMb2FkZXIoaW5wdXQpO1xuICAgICAgICBoaWRlTGFiZWwoaW5wdXQpO1xuICAgICAgICB2YXIgYmxvY2sgPSAkKGlucHV0KS5wYXJlbnRzKCcudXBsb2FkJyk7XG5cbiAgICAgICAgaWYgKGJsb2NrLmhhc0NsYXNzKCdtdWx0aScpKSB7XG4gICAgICAgICAgdmFyIG5ld0lkeCA9ICQoJy51cGxvYWRfX2lucHV0LXdyYXAgLnVwbG9hZF9fbGFiZWwnKS5sZW5ndGg7XG4gICAgICAgICAgdmFyICRyZXN1bHQgPSBnZXRSZXN1bHRCbG9jayhpbnB1dCk7XG4gICAgICAgICAgdmFyICRyZXN1bHRXcmFwID0gJHJlc3VsdC5wYXJlbnQoKTtcbiAgICAgICAgICB2YXIgJG5ld1Jlc3VsdCA9ICRyZXN1bHQuY2xvbmUodHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgJG5ld1Jlc3VsdC5yZW1vdmVDbGFzcygnc2hvdycpOyAvLyRuZXdSZXN1bHQuYXR0cignZGF0YS1yZXN1bHQnLCBuZXdJZHgpO1xuXG4gICAgICAgICAgJHJlc3VsdFdyYXAucHJlcGVuZCgkbmV3UmVzdWx0KTtcbiAgICAgICAgICAkcmVzdWx0LnBhcmVudHMoJy51cGxvYWRfX2lucHV0LXJlc3VsdHMnKS5maW5kKCcudXBsb2FkX19yZXN1bHQnKS5lYWNoKGZ1bmN0aW9uIChpZCwgZWxlbWVudCkge1xuICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLXJlc3VsdCcsIGlkKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB2YXIgJGxhYmVsV3JhcCA9ICQoaW5wdXQpLnBhcmVudCgpLnBhcmVudCgpO1xuICAgICAgICAgIHZhciAkbGFiZWwgPSAkKGlucHV0KS5wYXJlbnQoKTtcbiAgICAgICAgICB2YXIgJG5ld0xhYmVsID0gJGxhYmVsLmNsb25lKHRydWUsIHRydWUpO1xuICAgICAgICAgICRuZXdMYWJlbC5yZW1vdmVDbGFzcygnaGlkZGVuJyk7IC8vJG5ld0xhYmVsLmF0dHIoJ2RhdGEtaW5wdXQnLCBuZXdJZHgpO1xuXG4gICAgICAgICAgJGxhYmVsV3JhcC5wcmVwZW5kKCRuZXdMYWJlbCk7XG4gICAgICAgICAgJGxhYmVsLnBhcmVudHMoJy51cGxvYWRfX2lucHV0LXdyYXAnKS5maW5kKCcudXBsb2FkX19sYWJlbCcpLmVhY2goZnVuY3Rpb24gKGlkLCBlbGVtZW50KSB7XG4gICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtaW5wdXQnLCBpZCk7XG4gICAgICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCdpbnB1dCcpLmF0dHIoJ25hbWUnLCAnZmlsZS0nICsgaWQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXJzKCRuZXdMYWJlbCwgJG5ld1Jlc3VsdCk7IC8vICRuZXdMYWJlbC5jaGlsZHJlbignaW5wdXQnKVswXS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBvbkZpbGVDaGFuZ2UpO1xuICAgICAgICAgIC8vIFsnZHJhZ2VudGVyJywgJ2RyYWdvdmVyJywgJ2RyYWdsZWF2ZScsICdkcm9wJ10uZm9yRWFjaChldmVudE5hbWUgPT4ge1xuICAgICAgICAgIC8vICAgJG5ld0xhYmVsWzBdLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBwcmV2ZW50RGVmYXVsdHMsIGZhbHNlKVxuICAgICAgICAgIC8vIH0pO1xuICAgICAgICAgIC8vIFsnZHJhZ2VudGVyJywgJ2RyYWdvdmVyJ10uZm9yRWFjaChldmVudE5hbWUgPT4ge1xuICAgICAgICAgIC8vICAgJG5ld0xhYmVsWzBdLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoaWdobGlnaHQsIGZhbHNlKVxuICAgICAgICAgIC8vIH0pO1xuICAgICAgICAgIC8vIFsnZHJhZ2xlYXZlJywgJ2Ryb3AnXS5mb3JFYWNoKGV2ZW50TmFtZSA9PiB7XG4gICAgICAgICAgLy8gICAkbmV3TGFiZWxbMF0uYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIHVuaGlnaGxpZ2h0LCBmYWxzZSlcbiAgICAgICAgICAvLyB9KTtcbiAgICAgICAgICAvLyAkbmV3TGFiZWxbMF0uYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGhhbmRsZURyb3AsIGZhbHNlKTtcbiAgICAgICAgICAvLyAkbmV3UmVzdWx0LmNoaWxkcmVuKCcudXBsb2FkX19jbG9zZScpWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25GaWxlQ2xlYXIpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChpbnB1dC5maWxlc1swXSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBvbkZpbGVDaGFuZ2UgPSBmdW5jdGlvbiBvbkZpbGVDaGFuZ2UoZSkge1xuICAgIHJlYWRVcmwoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICBjb25zb2xlLmxvZyhlLmN1cnJlbnRUYXJnZXQpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIG9uRmlsZURyb3AoaW5wdXQpIHtcbiAgICByZWFkVXJsKGlucHV0KTtcbiAgfVxuXG4gIDtcblxuICBmdW5jdGlvbiBoYW5kbGVEcm9wKGUpIHtcbiAgICB2YXIgZHQgPSBlLmRhdGFUcmFuc2ZlcjtcbiAgICB2YXIgZmlsZXMgPSBkdC5maWxlcztcbiAgICB2YXIgdGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0O1xuICAgIHZhciBpbnB1dCA9IHRhcmdldC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpO1xuXG4gICAgaWYgKGlucHV0LmZpbGVzICYmIGlucHV0LmZpbGVzWzBdKSB7XG4gICAgICBpbnB1dC52YWx1ZSA9ICcnO1xuXG4gICAgICBpZiAoIS9zYWZhcmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7XG4gICAgICAgIGlucHV0LnR5cGUgPSAnJztcbiAgICAgICAgaW5wdXQudHlwZSA9ICdmaWxlJztcbiAgICAgIH0gLy8gZmlsZVJlc3VsdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICAvLyBmaWxlTmFtZS50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgLy8gZmlsZUltZy5yZW1vdmVBdHRyaWJ1dGUoJ3NyYycpO1xuXG4gICAgfVxuXG4gICAgaW5wdXQuZmlsZXMgPSBmaWxlcztcbiAgICBvbkZpbGVEcm9wKGlucHV0KTsgLy9oYW5kbGVGaWxlcyhmaWxlcylcbiAgfVxuXG4gIDtcblxuICBmdW5jdGlvbiBzZXRJZHMocmVzdWx0LCBpZHgpIHtcbiAgICByZXN1bHQucGFyZW50cygnLnVwbG9hZCcpLmZpbmQoJy51cGxvYWRfX2xhYmVsJykuZWFjaChmdW5jdGlvbiAoaWQsIGVsZW1lbnQpIHtcbiAgICAgIGlmIChpZCA+IGlkeCkge1xuICAgICAgICB2YXIgbmV3SWQgPSBpZCAtIDE7XG4gICAgICAgICQodGhpcykuYXR0cignZGF0YS1pbnB1dCcsIG5ld0lkKTtcbiAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignaW5wdXQnKS5hdHRyKCduYW1lJywgJ2ZpbGUtJyArIG5ld0lkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQodGhpcykuYXR0cignZGF0YS1pbnB1dCcsIGlkKTtcbiAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignaW5wdXQnKS5hdHRyKCduYW1lJywgJ2ZpbGUtJyArIGlkKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXN1bHQucGFyZW50cygnLnVwbG9hZCcpLmZpbmQoJy51cGxvYWRfX3Jlc3VsdCcpLmVhY2goZnVuY3Rpb24gKGlkLCBlbGVtZW50KSB7XG4gICAgICBpZiAoaWQgPiBpZHgpIHtcbiAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLXJlc3VsdCcsIGlkIC0gMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtcmVzdWx0JywgaWQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgO1xuXG4gIGZ1bmN0aW9uIG9uRmlsZUNsZWFyKGUpIHtcbiAgICB2YXIgJHRhcmdldCA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICB2YXIgJHJlc3VsdCA9ICR0YXJnZXQucGFyZW50cygnLnVwbG9hZF9fcmVzdWx0Jyk7XG4gICAgdmFyICRpZHggPSAkcmVzdWx0LmF0dHIoJ2RhdGEtcmVzdWx0Jyk7XG4gICAgdmFyICRsYWJlbCA9ICRyZXN1bHQucGFyZW50cygnLnVwbG9hZCcpLmZpbmQoXCJbZGF0YS1pbnB1dD0nXCIgKyAkaWR4ICsgXCInXVwiKTtcbiAgICB2YXIgaW5wdXQgPSAkbGFiZWwuY2hpbGRyZW4oJ2lucHV0JylbMF07XG4gICAgdmFyICRibG9jayA9ICR0YXJnZXQucGFyZW50cygnLnVwbG9hZCcpO1xuXG4gICAgaWYgKCRibG9jay5oYXNDbGFzcygnbXVsdGknKSkge1xuICAgICAgc2V0SWRzKCRyZXN1bHQsICRpZHgpO1xuICAgICAgJHJlc3VsdC5yZW1vdmUoKTtcbiAgICAgICRsYWJlbC5yZW1vdmUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5wdXQudmFsdWUgPSAnJztcblxuICAgICAgaWYgKCEvc2FmYXJpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkge1xuICAgICAgICBpbnB1dC50eXBlID0gJyc7XG4gICAgICAgIGlucHV0LnR5cGUgPSAnZmlsZSc7XG4gICAgICB9XG5cbiAgICAgICRsYWJlbC5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAkcmVzdWx0LnJlbW92ZUNsYXNzKCdzaG93Jyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcnMoJGlucHV0TGFiZWwsICRyZXN1bHQpIHtcbiAgICAvLyBjb25zdCBmaWxlTGFiZWwgPSAkKGJsb2NrKS5maW5kKFwiW2RhdGEtaW5wdXQ9J1wiICsgaWR4ICtcIiddXCIpWzBdO1xuICAgIC8vIGNvbnN0IGZpbGVJbnB1dCA9ICQoZmlsZUxhYmVsKS5maW5kKCdpbnB1dCcpWzBdO1xuICAgIC8vIGNvbnN0IGZpbGVSZXN1bHQgPSAkKGJsb2NrKS5maW5kKFwiW2RhdGEtcmVzdWx0PSdcIiArIGlkeCArXCInXVwiKVswXTtcbiAgICAvLyBjb25zdCBmaWxlQ2xlYXJCdG4gPSAkKGZpbGVSZXN1bHQpLmZpbmQoJy51cGxvYWRfX2Nsb3NlJylbMF07XG4gICAgdmFyIGlucHV0ID0gJGlucHV0TGFiZWwuY2hpbGRyZW4oJ2lucHV0JylbMF07XG4gICAgdmFyIGlucHV0TGFiZWwgPSAkaW5wdXRMYWJlbFswXTtcbiAgICB2YXIgZmlsZUNsZWFyQnRuID0gJHJlc3VsdC5maW5kKCcudXBsb2FkX19jbG9zZScpWzBdO1xuICAgIFsnZHJhZ2VudGVyJywgJ2RyYWdvdmVyJywgJ2RyYWdsZWF2ZScsICdkcm9wJ10uZm9yRWFjaChmdW5jdGlvbiAoZXZlbnROYW1lKSB7XG4gICAgICBpbnB1dExhYmVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBwcmV2ZW50RGVmYXVsdHMsIGZhbHNlKTtcbiAgICB9KTtcbiAgICBbJ2RyYWdlbnRlcicsICdkcmFnb3ZlciddLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50TmFtZSkge1xuICAgICAgaW5wdXRMYWJlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGlnaGxpZ2h0LCBmYWxzZSk7XG4gICAgfSk7XG4gICAgWydkcmFnbGVhdmUnLCAnZHJvcCddLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50TmFtZSkge1xuICAgICAgaW5wdXRMYWJlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgdW5oaWdobGlnaHQsIGZhbHNlKTtcbiAgICB9KTtcbiAgICBpbnB1dExhYmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBoYW5kbGVEcm9wLCBmYWxzZSk7XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgb25GaWxlQ2hhbmdlKTtcbiAgICBmaWxlQ2xlYXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkZpbGVDbGVhcik7XG4gIH0gLy8gZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoYmxvY2ssIGlkeCkge1xuICAvLyAgIGNvbnN0IGZpbGVMYWJlbCA9ICQoYmxvY2spLmZpbmQoXCJbZGF0YS1pbnB1dD0nXCIgKyBpZHggK1wiJ11cIilbMF07XG4gIC8vICAgY29uc3QgZmlsZUlucHV0ID0gJChmaWxlTGFiZWwpLmZpbmQoJ2lucHV0JylbMF07XG4gIC8vICAgWydkcmFnZW50ZXInLCAnZHJhZ292ZXInLCAnZHJhZ2xlYXZlJywgJ2Ryb3AnXS5mb3JFYWNoKGV2ZW50TmFtZSA9PiB7XG4gIC8vICAgICBmaWxlTGFiZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIHByZXZlbnREZWZhdWx0cywgZmFsc2UpXG4gIC8vICAgfSk7XG4gIC8vICAgWydkcmFnZW50ZXInLCAnZHJhZ292ZXInXS5mb3JFYWNoKGV2ZW50TmFtZSA9PiB7XG4gIC8vICAgICBmaWxlTGFiZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGhpZ2hsaWdodCwgZmFsc2UpXG4gIC8vICAgfSk7XG4gIC8vICAgWydkcmFnbGVhdmUnLCAnZHJvcCddLmZvckVhY2goZXZlbnROYW1lID0+IHtcbiAgLy8gICAgIGZpbGVMYWJlbC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgdW5oaWdobGlnaHQsIGZhbHNlKVxuICAvLyAgIH0pXG4gIC8vICAgZmlsZUxhYmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBoYW5kbGVEcm9wLCBmYWxzZSk7XG4gIC8vICAgZmlsZUlucHV0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG9uRmlsZUNoYW5nZSk7XG4gIC8vIH1cblxuXG4gIHVwbG9hZHMuZm9yRWFjaChmdW5jdGlvbiAodXBsb2FkKSB7XG4gICAgdmFyICRpbnB1dExhYmVsID0gJCh1cGxvYWQpLmZpbmQoJy51cGxvYWRfX2xhYmVsJyk7XG4gICAgdmFyICRyZXN1bHQgPSAkKHVwbG9hZCkuZmluZCgnLnVwbG9hZF9fcmVzdWx0Jyk7XG5cbiAgICBpZiAoISQodXBsb2FkKS5oYXNDbGFzcygnZGlzYWJsZWQnKSkge1xuICAgICAgYWRkRXZlbnRMaXN0ZW5lcnMoJGlucHV0TGFiZWwsICRyZXN1bHQpO1xuICAgIH0gLy8gLy8g0KHQsdGA0LDRgdGL0LLQsNC10Lwg0YHRgtCw0L3QtNCw0YDRgtC90YvQtSDRgdC+0LHRi9GC0LjRjyDQv9GA0Lgg0L/QtdGA0LXRgtCw0YHQutC40LLQsNC90LjQuCDRhNCw0LnQu9CwXG4gICAgLy8gWydkcmFnZW50ZXInLCAnZHJhZ292ZXInLCAnZHJhZ2xlYXZlJywgJ2Ryb3AnXS5mb3JFYWNoKGV2ZW50TmFtZSA9PiB7XG4gICAgLy8gICBmaWxlTGFiZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIHByZXZlbnREZWZhdWx0cywgZmFsc2UpXG4gICAgLy8gfSk7XG4gICAgLy8gLy8g0JTQvtCx0LDQstC70Y/QtdC8INGB0YLQuNC70Lgg0L/RgNC4INC/0LXRgNC10YLQsNGB0LrQuNCy0LDQvdC40Lgg0YTQsNC50LvQsCDQvdCw0LQg0L3Rg9C20L3QvtC5INC+0LHQu9Cw0YHRgtGM0Y5cbiAgICAvLyBbJ2RyYWdlbnRlcicsICdkcmFnb3ZlciddLmZvckVhY2goZXZlbnROYW1lID0+IHtcbiAgICAvLyAgIGZpbGVMYWJlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGlnaGxpZ2h0LCBmYWxzZSlcbiAgICAvLyB9KTtcbiAgICAvLyBbJ2RyYWdsZWF2ZScsICdkcm9wJ10uZm9yRWFjaChldmVudE5hbWUgPT4ge1xuICAgIC8vICAgZmlsZUxhYmVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCB1bmhpZ2hsaWdodCwgZmFsc2UpXG4gICAgLy8gfSlcbiAgICAvLyAvL1xuICAgIC8vIGZpbGVMYWJlbC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgaGFuZGxlRHJvcCwgZmFsc2UpO1xuICAgIC8vIGZpbGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBvbkZpbGVDaGFuZ2UpO1xuXG4gIH0pO1xufSkoKTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgLy8gdmFyIERlZmF1bHRzID0gJC5mbi5zZWxlY3QyLmFtZC5yZXF1aXJlKCdzZWxlY3QyL2RlZmF1bHRzJyk7XG4gIC8vICQuZXh0ZW5kKERlZmF1bHRzLmRlZmF1bHRzLCB7XG4gIC8vICAgICBzZWFyY2hJbnB1dFBsYWNlaG9sZGVyOiAnJ1xuICAvLyB9KTtcbiAgLy8gdmFyIFNlYXJjaERyb3Bkb3duID0gJC5mbi5zZWxlY3QyLmFtZC5yZXF1aXJlKCdzZWxlY3QyL2Ryb3Bkb3duL3NlYXJjaCcpO1xuICAvLyB2YXIgX3JlbmRlclNlYXJjaERyb3Bkb3duID0gU2VhcmNoRHJvcGRvd24ucHJvdG90eXBlLnJlbmRlcjtcbiAgLy8gU2VhcmNoRHJvcGRvd24ucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uKGRlY29yYXRlZCkge1xuICAvLyAgICAgLy8gaW52b2tlIHBhcmVudCBtZXRob2RcbiAgLy8gICAgIHZhciAkcmVuZGVyZWQgPSBfcmVuZGVyU2VhcmNoRHJvcGRvd24uYXBwbHkodGhpcywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpO1xuICAvLyAgICAgdGhpcy4kc2VhcmNoLmF0dHIoJ3BsYWNlaG9sZGVyJywgdGhpcy5vcHRpb25zLmdldCgnc2VhcmNoSW5wdXRQbGFjZWhvbGRlcicpKTtcbiAgLy8gICAgIHJldHVybiAkcmVuZGVyZWQ7XG4gIC8vIH07XG4gICQoJzxkaXYvPicsIHtcbiAgICAnY2xhc3MnOiAncHJlbG9hZGVyJ1xuICB9KS5jc3Moe1xuICAgICdwb3NpdGlvbic6ICdmaXhlZCcsXG4gICAgJ3RvcCc6ICcwJyxcbiAgICAnbGVmdCc6ICcwJyxcbiAgICAnd2lkdGgnOiAnMTAwdncnLFxuICAgICdoZWlnaHQnOiAnMTAwdmgnLFxuICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogJyNmZmYnLFxuICAgICd6LWluZGV4JzogJzMwMDAnXG4gIH0pLmFwcGVuZFRvKCdodG1sJyk7XG5cbiAgdmFyIGNoZWNrSW5wdXQgPSBmdW5jdGlvbiBjaGVja0lucHV0KGUpIHtcbiAgICBpZiAoZS50YXJnZXQudmFsdWUubGVuZ3RoID4gMCkge1xuICAgICAgJChlLnRhcmdldCkuYWRkQ2xhc3MoJ2lucHV0ZWQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJChlLnRhcmdldCkucmVtb3ZlQ2xhc3MoJ2lucHV0ZWQnKTtcbiAgICB9XG4gIH07XG5cbiAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICQoJy5qcy1zZWxlY3QtY29tYm8nKS5zZWxlY3QyKHtcbiAgICAgIC8vbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5XG4gICAgICBwbGFjZWhvbGRlcjogXCLQktCy0LXQtNC40YLQtSDQuNC70Lgg0LLRi9Cx0LXRgNC40YLQtSDQstCw0YDQuNCw0L3RglwiLFxuICAgICAgZHJvcGRvd25Dc3NDbGFzczogJ3NlbGVjdC1kcm9wZG93bicsXG4gICAgICBcImxhbmd1YWdlXCI6IHtcbiAgICAgICAgXCJub1Jlc3VsdHNcIjogZnVuY3Rpb24gbm9SZXN1bHRzKCkge1xuICAgICAgICAgIHJldHVybiAn0J3QuNGH0LXQs9C+INC90LUg0L3QsNC50LTQtdC90L4nO1xuICAgICAgICB9LFxuICAgICAgICBzZWFyY2hpbmc6IGZ1bmN0aW9uIHNlYXJjaGluZygpIHtcbiAgICAgICAgICByZXR1cm4gXCLQl9Cw0LPRgNGD0LfQutCwLi4uXCI7XG4gICAgICAgIH1cbiAgICAgIH0gLy9zZWFyY2hJbnB1dFBsYWNlaG9sZGVyOiAnTXkgY3VzdG9tIHBsYWNlaG9sZGVyLi4uJ1xuXG4gICAgfSk7XG4gICAgJCgnLmpzLXNlbGVjdC1jb21ibycpLm9uKCdzZWxlY3QyOm9wZW4nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAkKCcuc2VsZWN0Mi1zZWFyY2ggaW5wdXQnKS5vZmYoJ2lucHV0JywgY2hlY2tJbnB1dCk7XG4gICAgICAkKCcuc2VsZWN0Mi1zZWFyY2ggaW5wdXQnKS5vbignaW5wdXQnLCBjaGVja0lucHV0KTtcbiAgICB9KTtcbiAgICAkKCcuanMtc2VsZWN0LWNvbWJvJykub24oJ3NlbGVjdDI6Y2xvc2luZycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICQoJy5zZWxlY3QyLXNlYXJjaCBpbnB1dCcpLnJlbW92ZUNsYXNzKCdpbnB1dGVkJyk7XG4gICAgfSk7XG4gICAgJCgnLmpzLXNlbGVjdC1jb21iby1vcGVuJykuc2VsZWN0Mih7XG4gICAgICAvL21pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eVxuICAgICAgcGxhY2Vob2xkZXI6IFwi0JLQstC10LTQuNGC0LUg0LjQu9C4INCy0YvQsdC10YDQuNGC0LUg0LLQsNGA0LjQsNC90YJcIixcbiAgICAgIGRyb3Bkb3duQ3NzQ2xhc3M6IFsnc2VsZWN0LWRyb3Bkb3duJywgJ3NlbGVjdC1kcm9wZG93bi1tdWx0aScsICdzZWxlY3QtZHJvcGRvd24tLW9wZW5lZCddLFxuICAgICAgXCJsYW5ndWFnZVwiOiB7XG4gICAgICAgIFwibm9SZXN1bHRzXCI6IGZ1bmN0aW9uIG5vUmVzdWx0cygpIHtcbiAgICAgICAgICByZXR1cm4gJ9Cd0LjRh9C10LPQviDQvdC1INC90LDQudC00LXQvdC+JztcbiAgICAgICAgfSxcbiAgICAgICAgc2VhcmNoaW5nOiBmdW5jdGlvbiBzZWFyY2hpbmcoKSB7XG4gICAgICAgICAgcmV0dXJuIFwi0JfQsNCz0YDRg9C30LrQsC4uLlwiO1xuICAgICAgICB9XG4gICAgICB9IC8vc2VhcmNoSW5wdXRQbGFjZWhvbGRlcjogJ015IGN1c3RvbSBwbGFjZWhvbGRlci4uLidcblxuICAgIH0pLm9uKFwic2VsZWN0MjpjbG9zaW5nXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSkub24oXCJzZWxlY3QyOmNsb3NlZFwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgbGlzdC5zZWxlY3QyKFwib3BlblwiKTtcbiAgICB9KTtcbiAgICAkKCcuanMtc2VsZWN0LWNvbWJvLW9wZW4nKS5zZWxlY3QyKCdvcGVuJyk7XG4gICAgJCgnLnNlbGVjdC1kcm9wZG93bi1tdWx0aSBpbnB1dCcpLm9uKCdpbnB1dCcsIGNoZWNrSW5wdXQpO1xuICAgICQoJy5qcy1zZWxlY3QtY29tYm8tc2VhcmNoaW5nJykuc2VsZWN0Mih7XG4gICAgICAvL21pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eVxuICAgICAgcGxhY2Vob2xkZXI6IFwi0JLQstC10LTQuNGC0LUg0LjQu9C4INCy0YvQsdC10YDQuNGC0LUg0LLQsNGA0LjQsNC90YJcIixcbiAgICAgIGRyb3Bkb3duQ3NzQ2xhc3M6IFsnc2VsZWN0LWRyb3Bkb3duJywgJ3NlbGVjdC1kcm9wZG93bi0tb3BlbmVkJywgJ3NlbGVjdC1kcm9wZG93bi0tc2VhcmNoaW5nJ10sXG4gICAgICBcImxhbmd1YWdlXCI6IHtcbiAgICAgICAgXCJub1Jlc3VsdHNcIjogZnVuY3Rpb24gbm9SZXN1bHRzKCkge1xuICAgICAgICAgIHJldHVybiAn0J3QuNGH0LXQs9C+INC90LUg0L3QsNC50LTQtdC90L4nO1xuICAgICAgICB9LFxuICAgICAgICBzZWFyY2hpbmc6IGZ1bmN0aW9uIHNlYXJjaGluZygpIHtcbiAgICAgICAgICByZXR1cm4gXCLQl9Cw0LPRgNGD0LfQutCwLi4uXCI7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBhamF4OiB7XG4gICAgICAgIGRlbGF5OiA1MDAwMDAwMDAsXG4gICAgICAgIHVybDogJ2h0dHBzOi8vYW50aWJyZWV6LmdpdGh1Yi5pby9zZWxlY3QtZGF0YS9zZWxlY3QtZGF0YS5qc29uJ1xuICAgICAgfSAvL3NlYXJjaElucHV0UGxhY2Vob2xkZXI6ICdNeSBjdXN0b20gcGxhY2Vob2xkZXIuLi4nXG5cbiAgICB9KS5vbihcInNlbGVjdDI6Y2xvc2luZ1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pLm9uKFwic2VsZWN0MjpjbG9zZWRcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGxpc3Quc2VsZWN0MihcIm9wZW5cIik7XG4gICAgfSk7XG4gICAgdmFyIGV2ZW50ID0gbmV3IEV2ZW50KCdpbnB1dCcsIHtcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgJCgnLmpzLXNlbGVjdC1jb21iby1zZWFyY2hpbmcnKS5zZWxlY3QyKCdvcGVuJyk7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoJCgnLnNlbGVjdC1kcm9wZG93bi0tc2VhcmNoaW5nIGlucHV0JylbMF0pIHtcbiAgICAgICAgJCgnLnNlbGVjdC1kcm9wZG93bi0tc2VhcmNoaW5nIGlucHV0JylbMF0uZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICB9XG4gICAgfSwgNTAwKTtcbiAgICAkKCcuanMtc2VsZWN0LWNvbWJvLW5vdC1mb3VuZCcpLnNlbGVjdDIoe1xuICAgICAgLy9taW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHlcbiAgICAgIGRyb3Bkb3duQ3NzQ2xhc3M6IFsnc2VsZWN0LWRyb3Bkb3duJywgJ3NlbGVjdC1kcm9wZG93bi0tb3BlbmVkJywgJ3NlbGVjdC1kcm9wZG93bi0tbm90LWZvdW5kJ10sXG4gICAgICBcImxhbmd1YWdlXCI6IHtcbiAgICAgICAgXCJub1Jlc3VsdHNcIjogZnVuY3Rpb24gbm9SZXN1bHRzKCkge1xuICAgICAgICAgIHJldHVybiAn0J3QuNGH0LXQs9C+INC90LUg0L3QsNC50LTQtdC90L4nO1xuICAgICAgICB9LFxuICAgICAgICBzZWFyY2hpbmc6IGZ1bmN0aW9uIHNlYXJjaGluZygpIHtcbiAgICAgICAgICByZXR1cm4gXCLQl9Cw0LPRgNGD0LfQutCwLi4uXCI7XG4gICAgICAgIH1cbiAgICAgIH0gLy9zZWFyY2hJbnB1dFBsYWNlaG9sZGVyOiAnTXkgY3VzdG9tIHBsYWNlaG9sZGVyLi4uJ1xuXG4gICAgfSkub24oXCJzZWxlY3QyOmNsb3NpbmdcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KS5vbihcInNlbGVjdDI6Y2xvc2VkXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBsaXN0LnNlbGVjdDIoXCJvcGVuXCIpO1xuICAgIH0pO1xuICAgICQoJy5qcy1zZWxlY3QtY29tYm8tbm90LWZvdW5kJykuc2VsZWN0Mignb3BlbicpO1xuICAgICQoJy5zZWxlY3QtZHJvcGRvd24tLW5vdC1mb3VuZCBpbnB1dCcpLnZhbCgn0YTRi9Cy0LDQv9CwJyk7XG5cbiAgICBpZiAoJCgnLnNlbGVjdC1kcm9wZG93bi0tbm90LWZvdW5kIGlucHV0JylbMF0pIHtcbiAgICAgICQoJy5zZWxlY3QtZHJvcGRvd24tLW5vdC1mb3VuZCBpbnB1dCcpWzBdLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgIH1cblxuICAgICQoJy5qcy1zZWxlY3Qtc2luZ2xlJykuc2VsZWN0Mih7XG4gICAgICBwbGFjZWhvbGRlcjogXCLQktGL0LHQtdGA0LjRgtC1INCy0LDRgNC40LDQvdGCXCIsXG4gICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHksXG4gICAgICBkcm9wZG93bkNzc0NsYXNzOiBbJ3NlbGVjdC1kcm9wZG93bicsICdzZWxlY3QtZHJvcGRvd24tLXNpbmdsZSddXG4gICAgfSk7XG4gICAgdmFyIGxpc3QgPSAkKFwiLmpzLXNlbGVjdC1zaW5nbGUtb3BlblwiKS5zZWxlY3QyKHtcbiAgICAgIHBsYWNlaG9sZGVyOiBcItCS0YvQsdC10YDQuNGC0LUg0LLQsNGA0LjQsNC90YJcIixcbiAgICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcbiAgICAgIGRyb3Bkb3duQ3NzQ2xhc3M6IFsnc2VsZWN0LWRyb3Bkb3duJywgJ3NlbGVjdC1kcm9wZG93bi0tc2luZ2xlJywgJ3NlbGVjdC1kcm9wZG93bi0tb3BlbmVkJ10sXG4gICAgICBjbG9zZU9uU2VsZWN0OiBmYWxzZVxuICAgIH0pLm9uKFwic2VsZWN0MjpjbG9zaW5nXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSkub24oXCJzZWxlY3QyOmNsb3NlZFwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgbGlzdC5zZWxlY3QyKFwib3BlblwiKTtcbiAgICB9KTtcbiAgICBsaXN0LnNlbGVjdDIoJ29wZW4nKTtcbiAgICAkKCcuanMtc2VsZWN0LW11bHRpJykuc2VsZWN0Mih7XG4gICAgICAvL21pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eVxuICAgICAgcGxhY2Vob2xkZXI6IFwi0JLRi9Cx0LXRgNC40YLQtSDQstCw0YDQuNCw0L3RgtGLXCIsXG4gICAgICBkcm9wZG93bkNzc0NsYXNzOiBbJ3NlbGVjdC1kcm9wZG93bicsICdzZWxlY3QtZHJvcGRvd24tbXVsdGknXSxcbiAgICAgIFwibGFuZ3VhZ2VcIjoge1xuICAgICAgICBcIm5vUmVzdWx0c1wiOiBmdW5jdGlvbiBub1Jlc3VsdHMoKSB7XG4gICAgICAgICAgcmV0dXJuICfQndC40YfQtdCz0L4g0L3QtSDQvdCw0LnQtNC10L3Qvic7XG4gICAgICAgIH0sXG4gICAgICAgIHNlYXJjaGluZzogZnVuY3Rpb24gc2VhcmNoaW5nKCkge1xuICAgICAgICAgIHJldHVybiBcItCX0LDQs9GA0YPQt9C60LAuLi5cIjtcbiAgICAgICAgfVxuICAgICAgfSAvL3NlYXJjaElucHV0UGxhY2Vob2xkZXI6ICdNeSBjdXN0b20gcGxhY2Vob2xkZXIuLi4nXG5cbiAgICB9KTtcbiAgICAkKCcuanMtc2VsZWN0LW11bHRpJykub24oJ3NlbGVjdDI6b3BlbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICQoJy5zZWxlY3QyLXNlYXJjaCBpbnB1dCcpLm9mZignaW5wdXQnLCBjaGVja0lucHV0KTtcbiAgICAgICQoJy5zZWxlY3QyLXNlYXJjaCBpbnB1dCcpLm9uKCdpbnB1dCcsIGNoZWNrSW5wdXQpO1xuICAgIH0pO1xuICAgICQoJy5qcy1zZWxlY3QtbXVsdGknKS5vbignc2VsZWN0MjpjbG9zaW5nJywgZnVuY3Rpb24gKCkge1xuICAgICAgJCgnLnNlbGVjdDItc2VhcmNoIGlucHV0JykucmVtb3ZlQ2xhc3MoJ2lucHV0ZWQnKTtcbiAgICB9KTtcbiAgICAkKCcuanMtc2VsZWN0LW11bHRpLW9wZW4nKS5zZWxlY3QyKHtcbiAgICAgIC8vbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5XG4gICAgICBwbGFjZWhvbGRlcjogXCLQktGL0LHQtdGA0LjRgtC1INCy0LDRgNC40LDQvdGC0YtcIixcbiAgICAgIG1heGltdW1TZWxlY3Rpb25MZW5ndGg6IDMsXG4gICAgICBkcm9wZG93bkNzc0NsYXNzOiBbJ3NlbGVjdC1kcm9wZG93bicsICdzZWxlY3QtZHJvcGRvd24tLW9wZW5lZCcsICdzZWxlY3QtZHJvcGRvd24tbXVsdGknXSxcbiAgICAgIFwibGFuZ3VhZ2VcIjoge1xuICAgICAgICBcIm5vUmVzdWx0c1wiOiBmdW5jdGlvbiBub1Jlc3VsdHMoKSB7XG4gICAgICAgICAgcmV0dXJuICfQndC40YfQtdCz0L4g0L3QtSDQvdCw0LnQtNC10L3Qvic7XG4gICAgICAgIH0sXG4gICAgICAgIHNlYXJjaGluZzogZnVuY3Rpb24gc2VhcmNoaW5nKCkge1xuICAgICAgICAgIHJldHVybiBcItCX0LDQs9GA0YPQt9C60LAuLi5cIjtcbiAgICAgICAgfSxcbiAgICAgICAgbWF4aW11bVNlbGVjdGVkOiBmdW5jdGlvbiBtYXhpbXVtU2VsZWN0ZWQoZSkge1xuICAgICAgICAgIHJldHVybiBcItCc0LDQutGBLiDQutC+0LvQuNGH0LXRgdGC0LLQviDQstCw0YDQuNCw0L3RgtC+0LIgLSBcIiArIGUubWF4aW11bTtcbiAgICAgICAgfVxuICAgICAgfSAvL3NlYXJjaElucHV0UGxhY2Vob2xkZXI6ICdNeSBjdXN0b20gcGxhY2Vob2xkZXIuLi4nXG5cbiAgICB9KS5vbihcInNlbGVjdDI6Y2xvc2luZ1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pLm9uKFwic2VsZWN0MjpjbG9zZWRcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGxpc3Quc2VsZWN0MihcIm9wZW5cIik7XG4gICAgfSk7XG4gICAgJCgnLmpzLXNlbGVjdC1tdWx0aS1vcGVuJykuc2VsZWN0Mignb3BlbicpO1xuICAgICQoJy5qcy1zZWxlY3QtbXVsdGktc2VhcmNoaW5nJykuc2VsZWN0Mih7XG4gICAgICAvL21pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eVxuICAgICAgcGxhY2Vob2xkZXI6IFwi0JLRi9Cx0LXRgNC40YLQtSDQstCw0YDQuNCw0L3RgtGLXCIsXG4gICAgICBkcm9wZG93bkNzc0NsYXNzOiBbJ3NlbGVjdC1kcm9wZG93bicsICdzZWxlY3QtZHJvcGRvd24tLW9wZW5lZCcsICdzZWxlY3QtZHJvcGRvd24tLXNlYXJjaGluZy1tdWx0aSddLFxuICAgICAgXCJsYW5ndWFnZVwiOiB7XG4gICAgICAgIFwibm9SZXN1bHRzXCI6IGZ1bmN0aW9uIG5vUmVzdWx0cygpIHtcbiAgICAgICAgICByZXR1cm4gJ9Cd0LjRh9C10LPQviDQvdC1INC90LDQudC00LXQvdC+JztcbiAgICAgICAgfSxcbiAgICAgICAgc2VhcmNoaW5nOiBmdW5jdGlvbiBzZWFyY2hpbmcoKSB7XG4gICAgICAgICAgcmV0dXJuIFwi0JfQsNCz0YDRg9C30LrQsC4uLlwiO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgYWpheDoge1xuICAgICAgICBkZWxheTogNTAwMDAwMDAwLFxuICAgICAgICB1cmw6ICdodHRwczovL2FudGlicmVlei5naXRodWIuaW8vc2VsZWN0LWRhdGEvc2VsZWN0LWRhdGEuanNvbidcbiAgICAgIH0gLy9zZWFyY2hJbnB1dFBsYWNlaG9sZGVyOiAnTXkgY3VzdG9tIHBsYWNlaG9sZGVyLi4uJ1xuXG4gICAgfSkub24oXCJzZWxlY3QyOmNsb3NpbmdcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KS5vbihcInNlbGVjdDI6Y2xvc2VkXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBsaXN0LnNlbGVjdDIoXCJvcGVuXCIpO1xuICAgIH0pO1xuICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgnaW5wdXQnLCB7XG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgICQoJy5qcy1zZWxlY3QtbXVsdGktc2VhcmNoaW5nJykuc2VsZWN0Mignb3BlbicpO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCQoJy5zZWxlY3QtZHJvcGRvd24tLXNlYXJjaGluZy1tdWx0aSAgaW5wdXQnKVswXSkge1xuICAgICAgICAkKCcuc2VsZWN0LWRyb3Bkb3duLS1zZWFyY2hpbmctbXVsdGkgIGlucHV0JylbMF0uZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICB9XG4gICAgfSwgNTAwKTtcbiAgICAkKCcuanMtc2VsZWN0LW11bHRpLW5vdC1mb3VuZCcpLnNlbGVjdDIoe1xuICAgICAgLy9taW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHlcbiAgICAgIGRyb3Bkb3duQ3NzQ2xhc3M6IFsnc2VsZWN0LWRyb3Bkb3duJywgJ3NlbGVjdC1kcm9wZG93bi0tb3BlbmVkJywgJ3NlbGVjdC1kcm9wZG93bi0tbm90LWZvdW5kLW11bHRpJ10sXG4gICAgICBcImxhbmd1YWdlXCI6IHtcbiAgICAgICAgXCJub1Jlc3VsdHNcIjogZnVuY3Rpb24gbm9SZXN1bHRzKCkge1xuICAgICAgICAgIHJldHVybiAn0J3QuNGH0LXQs9C+INC90LUg0L3QsNC50LTQtdC90L4nO1xuICAgICAgICB9LFxuICAgICAgICBzZWFyY2hpbmc6IGZ1bmN0aW9uIHNlYXJjaGluZygpIHtcbiAgICAgICAgICByZXR1cm4gXCLQl9Cw0LPRgNGD0LfQutCwLi4uXCI7XG4gICAgICAgIH1cbiAgICAgIH0gLy9zZWFyY2hJbnB1dFBsYWNlaG9sZGVyOiAnTXkgY3VzdG9tIHBsYWNlaG9sZGVyLi4uJ1xuXG4gICAgfSkub24oXCJzZWxlY3QyOmNsb3NpbmdcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KS5vbihcInNlbGVjdDI6Y2xvc2VkXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBsaXN0LnNlbGVjdDIoXCJvcGVuXCIpO1xuICAgIH0pO1xuICAgICQoJy5qcy1zZWxlY3QtbXVsdGktbm90LWZvdW5kJykuc2VsZWN0Mignb3BlbicpO1xuICAgICQoJy5zZWxlY3QtZHJvcGRvd24tLW5vdC1mb3VuZC1tdWx0aSBpbnB1dCcpLnZhbCgn0YTRi9Cy0LDQv9CwJyk7XG4gICAgJCgnLnNlbGVjdC1kcm9wZG93bi0tbm90LWZvdW5kLW11bHRpIGlucHV0JylbMF0gJiYgJCgnLnNlbGVjdC1kcm9wZG93bi0tbm90LWZvdW5kLW11bHRpIGlucHV0JylbMF0uZGlzcGF0Y2hFdmVudChldmVudCk7XG4gIH0pO1xuICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XG4gICAgJCgnLnByZWxvYWRlcicpLmhpZGUoKTtcbiAgfSwgNTAwKTsgLy8gJCgnI3lvdXItc2VsZWN0LWlkJykub25lKCdzZWxlY3QyOm9wZW4nLCBmdW5jdGlvbihlKSB7XG4gIC8vICAgJCgnaW5wdXQuc2VsZWN0Mi1zZWFyY2hfX2ZpZWxkJykucHJvcCgncGxhY2Vob2xkZXInLCAnZW50ZXIgdXNlcm5hbWUgb3IgY2l0eScpO1xuICAvLyB9KTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICBjb25zdCAkYnRuID0gJCgnLmZvcm1zX19idXR0b24taXRlbS0tZXhhbXBsZSAuZm9ybXNfX2J0bicpO1xuXG4gICRidG4ub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgJGJ0biA9ICQodGhpcyk7XG4gICAgJGJ0bi5hZGRDbGFzcygnbG9hZGluZycpO1xuICAgICRidG4uYXR0cignZGlzYWJsZWQnLCAndHJ1ZScpO1xuXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICRidG4ucmVtb3ZlQ2xhc3MoJ2xvYWRpbmcnKVxuICAgICAgJGJ0bi5hZGRDbGFzcygnc3VjY2VzcycpXG4gICAgfSwgMjAwMCk7XG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgJGJ0bi5yZW1vdmVDbGFzcygnc3VjY2VzcycpXG4gICAgICAkYnRuLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJylcbiAgICB9LCA0MDAwKTtcbiAgfSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICBsZXQgbW91c2V1cCA9IGZhbHNlO1xuXG5cbiAgJCgnLmNoZWNrYm94JykubW91c2V1cChmdW5jdGlvbihlKSB7XG4gICAgbW91c2V1cCA9IHRydWU7XG4gICAgJCh0aGlzKS5maW5kKCcuY2hlY2tib3hfX2lucHV0JykucmVtb3ZlQ2xhc3MoJ2ZvY3VzZWQnKTtcbiAgfSk7XG5cbiAgJCgnLmNoZWNrYm94X19pbnB1dCcpLmZvY3VzKGZ1bmN0aW9uKGUpIHtcbiAgICAgIGlmICghbW91c2V1cCkge1xuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdmb2N1c2VkJyk7XG4gICAgICB9XG4gICAgICBtb3VzZXVwID0gZmFsc2U7XG4gIH0pO1xuXG4gICQoJy5jaGVja2JveF9faW5wdXQnKS5ibHVyKGZ1bmN0aW9uKGUpIHtcbiAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdmb2N1c2VkJyk7XG4gIH0pO1xufSkoKTtcbiIsIi8qIFJ1c3NpYW4gKFVURi04KSBpbml0aWFsaXNhdGlvbiBmb3IgdGhlIGpRdWVyeSBVSSBkYXRlIHBpY2tlciBwbHVnaW4uICovXG4vKiBXcml0dGVuIGJ5IEFuZHJldyBTdHJvbW5vdiAoc3Ryb21ub3ZAZ21haWwuY29tKS4gKi9cbiggZnVuY3Rpb24oIGZhY3RvcnkgKSB7XG5cdGlmICggdHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQgKSB7XG5cblx0XHQvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXG5cdFx0ZGVmaW5lKCBbIFwiLi4vd2lkZ2V0cy9kYXRlcGlja2VyXCIgXSwgZmFjdG9yeSApO1xuXHR9IGVsc2Uge1xuXG5cdFx0Ly8gQnJvd3NlciBnbG9iYWxzXG5cdFx0ZmFjdG9yeSggalF1ZXJ5LmRhdGVwaWNrZXIgKTtcblx0fVxufSggZnVuY3Rpb24oIGRhdGVwaWNrZXIgKSB7XG5cbmRhdGVwaWNrZXIucmVnaW9uYWwucnUgPSB7XG5cdGNsb3NlVGV4dDogXCLQl9Cw0LrRgNGL0YLRjFwiLFxuXHRwcmV2VGV4dDogXCImI3gzQzvQn9GA0LXQtFwiLFxuXHRuZXh0VGV4dDogXCLQodC70LXQtCYjeDNFO1wiLFxuXHRjdXJyZW50VGV4dDogXCLQodC10LPQvtC00L3Rj1wiLFxuXHRtb250aE5hbWVzOiBbIFwi0K/QvdCy0LDRgNGMXCIsXCLQpNC10LLRgNCw0LvRjFwiLFwi0JzQsNGA0YJcIixcItCQ0L/RgNC10LvRjFwiLFwi0JzQsNC5XCIsXCLQmNGO0L3RjFwiLFxuXHRcItCY0Y7Qu9GMXCIsXCLQkNCy0LPRg9GB0YJcIixcItCh0LXQvdGC0Y/QsdGA0YxcIixcItCe0LrRgtGP0LHRgNGMXCIsXCLQndC+0Y/QsdGA0YxcIixcItCU0LXQutCw0LHRgNGMXCIgXSxcblx0bW9udGhOYW1lc1Nob3J0OiBbIFwi0K/QvdCyXCIsXCLQpNC10LJcIixcItCc0LDRgFwiLFwi0JDQv9GAXCIsXCLQnNCw0LlcIixcItCY0Y7QvVwiLFxuXHRcItCY0Y7Qu1wiLFwi0JDQstCzXCIsXCLQodC10L1cIixcItCe0LrRglwiLFwi0J3QvtGPXCIsXCLQlNC10LpcIiBdLFxuXHRkYXlOYW1lczogWyBcItCy0L7RgdC60YDQtdGB0LXQvdGM0LVcIixcItC/0L7QvdC10LTQtdC70YzQvdC40LpcIixcItCy0YLQvtGA0L3QuNC6XCIsXCLRgdGA0LXQtNCwXCIsXCLRh9C10YLQstC10YDQs1wiLFwi0L/Rj9GC0L3QuNGG0LBcIixcItGB0YPQsdCx0L7RgtCwXCIgXSxcblx0ZGF5TmFtZXNTaG9ydDogWyBcItCy0YHQulwiLFwi0L/QvdC0XCIsXCLQstGC0YBcIixcItGB0YDQtFwiLFwi0YfRgtCyXCIsXCLQv9GC0L1cIixcItGB0LHRglwiIF0sXG5cdGRheU5hbWVzTWluOiBbIFwi0JLRgVwiLFwi0J/QvVwiLFwi0JLRglwiLFwi0KHRgFwiLFwi0KfRglwiLFwi0J/RglwiLFwi0KHQsVwiIF0sXG5cdHdlZWtIZWFkZXI6IFwi0J3QtdC0XCIsXG5cdGRhdGVGb3JtYXQ6IFwiZGQubW0ueXlcIixcblx0Zmlyc3REYXk6IDEsXG5cdGlzUlRMOiBmYWxzZSxcblx0c2hvd01vbnRoQWZ0ZXJZZWFyOiBmYWxzZSxcblx0eWVhclN1ZmZpeDogXCJcIiB9O1xuZGF0ZXBpY2tlci5zZXREZWZhdWx0cyggZGF0ZXBpY2tlci5yZWdpb25hbC5ydSApO1xuXG5yZXR1cm4gZGF0ZXBpY2tlci5yZWdpb25hbC5ydTtcblxufSApICk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAkKCcuZHJvcGRvd246bm90KC5kcm9wZG93bi1vcGVuZWQnKS5zZWxlY3QyKHtcbiAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHksXG4gICAgZHJvcGRvd25Dc3NDbGFzczogWydjYWxlbmRhci1kcm9wZG93biddLFxuICB9KTtcblxuICAkKCcuZHJvcGRvd24tb3BlbmVkJykuc2VsZWN0Mih7XG4gICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5LFxuICAgIGRyb3Bkb3duQ3NzQ2xhc3M6IFsnY2FsZW5kYXItZHJvcGRvd24nLCAnY2FsZW5kYXItZHJvcGRvd24tcGVybWFuZW50J10sXG4gIH0pLm9uKFwic2VsZWN0MjpjbG9zaW5nXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIH0pLm9uKFwic2VsZWN0MjpjbG9zZWRcIiwgZnVuY3Rpb24oZSkge1xuICAgIGxpc3Quc2VsZWN0MihcIm9wZW5cIik7XG4gIH0pO1xuXG4gICQoJy5kcm9wZG93bicpLm9uKCdzZWxlY3QyOmNsb3NlJywgZnVuY3Rpb24oKSB7XG4gICAgJCh0aGlzKS5uZXh0KCkuZmluZCgnLnNlbGVjdDItc2VsZWN0aW9uJykuYmx1cigpO1xuICB9KTtcblxuICAkKCcuZHJvcGRvd24gKyAuc2VsZWN0MiAuc2VsZWN0Mi1zZWxlY3Rpb25fX3JlbmRlcmVkJykuYXR0cigndGFiaW5kZXgnLCAnLTEnKTtcbiAgJCgnLmRyb3Bkb3duLW9wZW5lZCcpLnNlbGVjdDIoJ29wZW4nKVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgY29uc3Qgc2VsZWN0T3B0ID0ge1xuICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcbiAgICBkcm9wZG93bkNzc0NsYXNzOiAnY2FsZW5kYXItZHJvcGRvd24nXG4gIH07XG5cbiAgJCgnLmlucHV0LWRhdGUnKS5kYXRlcGlja2VyKHtcbiAgICBkYXRlRm9ybWF0OiAnZGQubW0ueXknLFxuICAgIHNob3dPdGhlck1vbnRoczogdHJ1ZSxcbiAgICByZWdpb25hbDogJ3J1JyxcbiAgICBtb250aE5hbWVzU2hvcnQ6IFsgXCLQr9C90LLQsNGA0YxcIixcItCk0LXQstGA0LDQu9GMXCIsXCLQnNCw0YDRglwiLFwi0JDQv9GA0LXQu9GMXCIsXCLQnNCw0LlcIixcItCY0Y7QvdGMXCIsXG4gICAgXCLQmNGO0LvRjFwiLFwi0JDQstCz0YPRgdGCXCIsXCLQodC10L3RgtGP0LHRgNGMXCIsXCLQntC60YLRj9Cx0YDRjFwiLFwi0J3QvtGP0LHRgNGMXCIsXCLQlNC10LrQsNCx0YDRjFwiIF0sXG4gICAgY2hhbmdlTW9udGg6IHRydWUsXG4gICAgY2hhbmdlWWVhcjogdHJ1ZSxcbiAgICB5ZWFyUmFuZ2U6ICcxOTAwOisxMCcsXG4gICAgYmVmb3JlU2hvdzogZnVuY3Rpb24oKSB7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcudWktZGF0ZXBpY2tlci1tb250aCcpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXIteWVhcicpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgIH0sIDApO1xuICAgIH0sXG5cbiAgICBvbkNoYW5nZU1vbnRoWWVhcjogZnVuY3Rpb24oKSB7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcudWktZGF0ZXBpY2tlci1tb250aCcpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXIteWVhcicpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgIH0sIDApO1xuICAgIH0sXG4gIH0pO1xuXG4gICQoJy5pbnB1dC1kYXRlLXRyaWdnZXInKS5kYXRlcGlja2VyKHtcbiAgICBkYXRlRm9ybWF0OiAnZGQubW0ueXknLFxuICAgIHNob3dPdGhlck1vbnRoczogdHJ1ZSxcbiAgICByZWdpb25hbDogJ3J1JyxcbiAgICBtb250aE5hbWVzU2hvcnQ6IFsgXCLQr9C90LLQsNGA0YxcIixcItCk0LXQstGA0LDQu9GMXCIsXCLQnNCw0YDRglwiLFwi0JDQv9GA0LXQu9GMXCIsXCLQnNCw0LlcIixcItCY0Y7QvdGMXCIsXG4gICAgXCLQmNGO0LvRjFwiLFwi0JDQstCz0YPRgdGCXCIsXCLQodC10L3RgtGP0LHRgNGMXCIsXCLQntC60YLRj9Cx0YDRjFwiLFwi0J3QvtGP0LHRgNGMXCIsXCLQlNC10LrQsNCx0YDRjFwiIF0sXG4gICAgY2hhbmdlTW9udGg6IHRydWUsXG4gICAgY2hhbmdlWWVhcjogdHJ1ZSxcbiAgICB5ZWFyUmFuZ2U6ICcxOTAwOisxMCcsXG5cbiAgICBvbkNoYW5nZU1vbnRoWWVhcjogZnVuY3Rpb24oKSB7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcudWktZGF0ZXBpY2tlci1tb250aCcpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXIteWVhcicpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgIH0sIDApO1xuICAgIH0sXG5cbiAgICBvblNlbGVjdDogZnVuY3Rpb24oKSB7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcudWktZGF0ZXBpY2tlci1tb250aCcpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXIteWVhcicpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgIH0sIDApO1xuICAgIH0sXG4gIH0pO1xuXG4gICQoJy5pbnB1dC1kYXRlLXRyaWdnZXItc2luZ2xlJykuZGF0ZXBpY2tlcih7XG4gICAgZGF0ZUZvcm1hdDogJ2RkLm1tLnl5JyxcbiAgICBzaG93T3RoZXJNb250aHM6IHRydWUsXG4gICAgcmVnaW9uYWw6ICdydScsXG4gICAgbW9udGhOYW1lc1Nob3J0OiBbIFwi0K/QvdCy0LDRgNGMXCIsXCLQpNC10LLRgNCw0LvRjFwiLFwi0JzQsNGA0YJcIixcItCQ0L/RgNC10LvRjFwiLFwi0JzQsNC5XCIsXCLQmNGO0L3RjFwiLFxuICAgIFwi0JjRjtC70YxcIixcItCQ0LLQs9GD0YHRglwiLFwi0KHQtdC90YLRj9Cx0YDRjFwiLFwi0J7QutGC0Y/QsdGA0YxcIixcItCd0L7Rj9Cx0YDRjFwiLFwi0JTQtdC60LDQsdGA0YxcIiBdLFxuICAgIGNoYW5nZU1vbnRoOiB0cnVlLFxuICAgIGNoYW5nZVllYXI6IHRydWUsXG4gICAgeWVhclJhbmdlOiAnMTkwMDorMTAnLFxuXG4gICAgb25DaGFuZ2VNb250aFllYXI6IGZ1bmN0aW9uKCkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXItbW9udGgnKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICAgICAgICQoJy51aS1kYXRlcGlja2VyLXllYXInKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICAgICB9LCAwKTtcbiAgICB9LFxuXG4gICAgb25TZWxlY3Q6IGZ1bmN0aW9uKCkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXItbW9udGgnKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICAgICAgICQoJy51aS1kYXRlcGlja2VyLXllYXInKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICAgICB9LCAwKTtcbiAgICB9LFxuICB9KTtcblxuICAkKCcuaW5wdXQtZGF0ZS10cmlnZ2VyLXJhbmdlJykuZGF0ZXBpY2tlcih7XG4gICAgcmFuZ2U6ICdwZXJpb2QnLFxuICAgIGRhdGVGb3JtYXQ6ICdkZC5tbS55eScsXG4gICAgc2hvd090aGVyTW9udGhzOiB0cnVlLFxuICAgIHJlZ2lvbmFsOiAncnUnLFxuICAgIG1vbnRoTmFtZXNTaG9ydDogWyBcItCv0L3QstCw0YDRjFwiLFwi0KTQtdCy0YDQsNC70YxcIixcItCc0LDRgNGCXCIsXCLQkNC/0YDQtdC70YxcIixcItCc0LDQuVwiLFwi0JjRjtC90YxcIixcbiAgICBcItCY0Y7Qu9GMXCIsXCLQkNCy0LPRg9GB0YJcIixcItCh0LXQvdGC0Y/QsdGA0YxcIixcItCe0LrRgtGP0LHRgNGMXCIsXCLQndC+0Y/QsdGA0YxcIixcItCU0LXQutCw0LHRgNGMXCIgXSxcbiAgICBjaGFuZ2VNb250aDogdHJ1ZSxcbiAgICBjaGFuZ2VZZWFyOiB0cnVlLFxuICAgIHllYXJSYW5nZTogJzE5MDA6KzEwJyxcblxuICAgIG9uQ2hhbmdlTW9udGhZZWFyOiBmdW5jdGlvbigpIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICQoJy51aS1kYXRlcGlja2VyLW1vbnRoJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgICAkKCcudWktZGF0ZXBpY2tlci15ZWFyJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgfSwgMCk7XG4gICAgfSxcblxuICAgIG9uU2VsZWN0OiBmdW5jdGlvbihpbnB1dCwgaW5zdCkge1xuICAgICAgY29uc29sZS5sb2coaW5zdCk7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICQoJy5pbnB1dC1kYXRlLXRyaWdnZXItcmFuZ2UnKS5maW5kKCcudWktZGF0ZXBpY2tlci1tb250aCcpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgICAgJCgnLmlucHV0LWRhdGUtdHJpZ2dlci1yYW5nZScpLmZpbmQoJy51aS1kYXRlcGlja2VyLXllYXInKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICAgICB9LCAxMDApO1xuICAgIH0sXG5cbiAgICBiZWZvcmVTaG93OiBmdW5jdGlvbihpbnB1dCwgaW5zdCkge1xuICAgICAgY29uc29sZS5sb2coaW5zdCk7XG4gICAgfVxuICB9KTtcblxuICBjb25zdCBjdXJyZW50ID0gbW9tZW50KCk7XG4gIGNvbnN0IGRheSA9IGN1cnJlbnQuZm9ybWF0KCdERCcpO1xuICBjb25zdCBtb250aCA9IGN1cnJlbnQuZm9ybWF0KCdNTScpO1xuICBjb25zdCB5ZWFyID0gY3VycmVudC5mb3JtYXQoJ1lZWVknKTtcbiAgbGV0IHBpY2tlZERhdGUgPSAnJztcbiAgbGV0IHBpY2tlZFBlcmlvZCA9IFtdO1xuICBsZXQgaG92ZXJEYXRlID0gJyc7XG5cbiAgaWYgKGRheSAhPT0gJzE1Jykge1xuICAgIHBpY2tlZERhdGUgPSAxNSArICcuJyArIG1vbnRoICsgJy4nICsgeWVhcjtcbiAgfSBlbHNlIHtcbiAgICBwaWNrZWREYXRlID0gMTcgKyAnLicgKyBtb250aCArICcuJyArIHllYXI7XG4gIH1cblxuICBpZiAoZGF5ICE9PSAnMTMnKSB7XG4gICAgaG92ZXJEYXRlID0gJzEzJztcbiAgfSBlbHNlIHtcbiAgICBob3ZlckRhdGUgPSAnMTInO1xuICB9XG5cbiAgZGF5ID4gMTVcbiAgICA/IHBpY2tlZFBlcmlvZCA9IFsnMDIuJyArIG1vbnRoICsgJy4nICsgeWVhciwgJzExLicgKyBtb250aCArICcuJyArIHllYXJdXG4gICAgOiBwaWNrZWRQZXJpb2QgPSBbJzE3LicgKyBtb250aCArICcuJyArIHllYXIsICcyNi4nICsgbW9udGggKyAnLicgKyB5ZWFyXVxuXG4gICQoJy5pbnB1dC1kYXRlLXRyaWdnZXInKS5kYXRlcGlja2VyKCdzZXREYXRlJywgcGlja2VkRGF0ZSk7XG4gICQoJy5pbnB1dC1kYXRlLXRyaWdnZXItc2luZ2xlJykuZGF0ZXBpY2tlcignc2V0RGF0ZScsIHBpY2tlZERhdGUpO1xuICAkKCcuaW5wdXQtZGF0ZS10cmlnZ2VyLXJhbmdlJykuZGF0ZXBpY2tlcignc2V0RGF0ZScsIHBpY2tlZFBlcmlvZCk7XG5cblxuXG4gICQoJy5pbnB1dC1kYXRlLXRyaWdnZXItc2luZ2xlIC51aS1kYXRlcGlja2VyLWNhbGVuZGFyIHRkIGEnKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgIGlmICgkKHRoaXMpLnRleHQoKSA9PT0gaG92ZXJEYXRlKSB7XG4gICAgICAkKHRoaXMpLmFkZENsYXNzKCdob3ZlcmVkJyk7XG4gICAgfVxuICB9KTtcblxuXG5cbiAgJCgnLnVpLWRhdGVwaWNrZXItbW9udGgnKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICQoJy51aS1kYXRlcGlja2VyLXllYXInKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG5cbiAgJCgnLmlucHV0LWRhdGUnKS5kYXRlcGlja2VyKCdyZWZyZXNoJyk7XG5cbiAgJCgnLmlucHV0LWRhdGUnKS5pbnB1dG1hc2soXCI5OS45OS45OTk5XCIsIHtcbiAgICAvL21hc2s6ICdtbS9kZC95eXl5JyxcbiAgICBwbGFjZWhvbGRlcjogJycsXG4gICAgc2hvd01hc2tPbkhvdmVyOiBmYWxzZSxcbiAgICBzaG93TWFza09uRm9jdXM6IGZhbHNlLFxuICAgIGppdE1hc2tpbmc6IHRydWVcbiAgfSk7XG5cblxuICAkKCcuaW5wdXQtZGF0ZScpLm9uKCdmb2N1cycsIGZ1bmN0aW9uKGUpIHtcbiAgICBjb25zdCB0YXJnZXQgPSAkKGUudGFyZ2V0KTtcbiAgICBjb25zdCB2YWwgPSB0YXJnZXQudmFsKCk7XG5cbiAgICBpZiAodmFsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGFyZ2V0LnBhcmVudCgpLmFkZENsYXNzKCdkYXRlLXBsYWNlaG9sZGVyJyk7XG4gICAgfVxuICB9KTtcblxuICAkKCcuaW5wdXQtZGF0ZScpLm9uKCdibHVyJywgZnVuY3Rpb24oZSkge1xuICAgIGNvbnN0IHRhcmdldCA9ICQoZS50YXJnZXQpO1xuICAgIGNvbnN0IHZhbCA9IHRhcmdldC52YWwoKTtcblxuICAgIHRhcmdldC5wYXJlbnQoKS5yZW1vdmVDbGFzcygnZGF0ZS1wbGFjZWhvbGRlcicpO1xuICB9KTtcblxuICAkKCcuaW5wdXQtZGF0ZScpLm9uKCdpbnB1dCcsIGZ1bmN0aW9uKGUpIHtcbiAgICBjb25zdCB0YXJnZXQgPSAkKGUudGFyZ2V0KTtcbiAgICBjb25zdCB2YWwgPSB0YXJnZXQudmFsKCk7XG5cbiAgICBpZiAodmFsLmxlbmd0aCA+IDApIHtcbiAgICAgIHRhcmdldC5wYXJlbnQoKS5yZW1vdmVDbGFzcygnZGF0ZS1wbGFjZWhvbGRlcicpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXQucGFyZW50KCkuYWRkQ2xhc3MoJ2RhdGUtcGxhY2Vob2xkZXInKTtcbiAgICB9XG5cbiAgICBjb25zdCBpc1ZhbGlkID0gbW9tZW50KCQodGhpcykudmFsKCksICdERC5NTS5ZWVlZJywgdHJ1ZSkuaXNWYWxpZCgpO1xuICAgIGlmIChpc1ZhbGlkKSB7XG4gICAgICAkKHRoaXMpLmRhdGVwaWNrZXIoJ2hpZGUnKTtcbiAgICAgICQodGhpcykuZGF0ZXBpY2tlcignc2hvdycpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gIC8vICAgZnVuY3Rpb24gZjEoKSB7XG4gIC8vICAgICAkKCcuaW5wdXQtZGF0ZScpLmRhdGVwaWNrZXIoJ3JlZnJlc2gnKTtcbiAgLy8gICB9O1xuXG4gIC8vICAgZnVuY3Rpb24gZjIoKSB7XG4gIC8vICAgICBjb25zb2xlLmxvZygkKCcudWktZGF0ZXBpY2tlci1tb250aCcpWzBdKTtcbiAgLy8gICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gIC8vICAgICAgICQoJy51aS1kYXRlcGlja2VyLW1vbnRoJykuc2VsZWN0MigpO1xuICAvLyAgICAgfSwgNTAwMCk7XG4gIC8vICAgICAvLyQoJy51aS1kYXRlcGlja2VyLW1vbnRoJykuc2VsZWN0MigpO1xuICAvLyAgIH07XG5cbiAgLy8gICB2YXIgZGZkID0gJC5EZWZlcnJlZCgpO1xuXG4gIC8vICAgZGZkLmRvbmUoZjEpLmRvbmUoZjIpO1xuXG4gIC8vICAgZGZkLnJlc29sdmUoJ2EnKTtcblxuICAvLyB9KTtcblxuICAkKCcjY2FsZW5kYXItZHJvcGRvd24tbW9udGgnKS5zZWxlY3QyKHtcbiAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHksXG4gICAgZHJvcGRvd25Dc3NDbGFzczogWydjYWxlbmRhci1kcm9wZG93bicsICdjYWxlbmRhci1kcm9wZG93bi1wZXJtYW5lbnQnXSxcbiAgICBjbG9zZU9uU2VsZWN0OiBmYWxzZVxuICB9KS5vbihcInNlbGVjdDI6Y2xvc2luZ1wiLCBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9KS5vbihcInNlbGVjdDI6Y2xvc2VkXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICBsaXN0LnNlbGVjdDIoXCJvcGVuXCIpO1xuICB9KTtcblxuICAkKCcjY2FsZW5kYXItZHJvcGRvd24tbW9udGgnKS5zZWxlY3QyKCdvcGVuJyk7XG5cbiAgJCgnI2NhbGVuZGFyLWRyb3Bkb3duLXllYXInKS5zZWxlY3QyKHtcbiAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHksXG4gICAgZHJvcGRvd25Dc3NDbGFzczogWydjYWxlbmRhci1kcm9wZG93bicsICdjYWxlbmRhci1kcm9wZG93bi1wZXJtYW5lbnQnXSxcbiAgICBjbG9zZU9uU2VsZWN0OiBmYWxzZVxuICB9KS5vbihcInNlbGVjdDI6Y2xvc2luZ1wiLCBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9KS5vbihcInNlbGVjdDI6Y2xvc2VkXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICBsaXN0LnNlbGVjdDIoXCJvcGVuXCIpO1xuICB9KTtcblxuICAkKCcjY2FsZW5kYXItZHJvcGRvd24teWVhcicpLnNlbGVjdDIoJ29wZW4nKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICQoJy5pbnB1dC1wYXNzd29yZC1idG4nKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICBjb25zdCAkYnRuID0gJCh0aGlzKTtcbiAgICBjb25zdCAkaW5wdXQgPSAkYnRuLnByZXYoKTtcblxuICAgICRidG4udG9nZ2xlQ2xhc3MoJ3Nob3duJyk7XG5cbiAgICBpZiAoJGJ0bi5oYXNDbGFzcygnc2hvd24nKSkge1xuICAgICAgJGlucHV0LmF0dHIoJ3R5cGUnLCAndGV4dCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkaW5wdXQuYXR0cigndHlwZScsICdwYXNzd29yZCcpO1xuICAgIH1cbiAgfSlcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICQoJy5saW5rW3RhYmluZGV4PVwiLTFcIl0nKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9KVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgLy8gY29uc3QgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmlucHV0LXBob25lJyk7XG5cbiAgLy8gaWYgKCFpbnB1dHNbMF0pIHtcbiAgLy8gICByZXR1cm47XG4gIC8vIH1cblxuICAvLyBjb25zdCBpbSA9IG5ldyBJbnB1dG1hc2soXCIrNyg5OTkpIDk5OS05OS05OVwiKTtcblxuICAvLyBpbnB1dHMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gIC8vICAgaW0ubWFzayhpdGVtKTtcbiAgLy8gfSlcblxuICAkKCcuaW5wdXQtcGhvbmUnKS5pbnB1dG1hc2soJys3KDk5OSkgOTk5LTk5LTk5Jyk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICBjb25zdCBzY3JvbGxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2Nyb2xsLXRvLXRvcCcpO1xuICBjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyJyk7XG5cbiAgaWYgKCFzY3JvbGxCdG4pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBnZXRIZWFkZXJIZWlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gaGVhZGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCArIDUwO1xuICB9O1xuXG4gIGxldCBpc1Njcm9sbGVkID0gd2luZG93LnBhZ2VZT2Zmc2V0ID4gZ2V0SGVhZGVySGVpZ2h0KCk7XG5cbiAgY29uc3Qgc2hvd0J0biA9IGZ1bmN0aW9uKCkge1xuICAgICFzY3JvbGxCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKVxuICAgICYmIHNjcm9sbEJ0bi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgfVxuXG4gIGNvbnN0IGhpZGVIZWFkZXIgPSBmdW5jdGlvbigpIHtcbiAgICBzY3JvbGxCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKVxuICAgICYmIHNjcm9sbEJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgfVxuXG4gIGNvbnN0IG9uU2Nyb2xsID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCFpc1Njcm9sbGVkICYmIHdpbmRvdy5wYWdlWU9mZnNldCA+IGdldEhlYWRlckhlaWdodCgpKSB7XG4gICAgICBzaG93QnRuKCk7XG4gICAgICBpc1Njcm9sbGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoaXNTY3JvbGxlZCAmJiB3aW5kb3cucGFnZVlPZmZzZXQgPCBnZXRIZWFkZXJIZWlnaHQoKSkge1xuICAgICAgaGlkZUhlYWRlcigpO1xuICAgICAgaXNTY3JvbGxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGlmIChpc1Njcm9sbGVkKSB7XG4gICAgc2hvd0J0bigpO1xuICB9XG5cbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgb25TY3JvbGwpO1xuICBzY3JvbGxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGhlYWRlci5zY3JvbGxJbnRvVmlldyh7YmxvY2s6IGBzdGFydGAsIGJlaGF2aW9yOiBgc21vb3RoYH0pO1xuICB9KVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgbGV0IG1vdXNldXAgPSBmYWxzZTtcblxuXG4gICQoJy5zd2l0Y2hlcl9fbGFiZWwnKS5tb3VzZXVwKGZ1bmN0aW9uKGUpIHtcbiAgICBtb3VzZXVwID0gdHJ1ZTtcbiAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdmb2N1c2VkJyk7XG4gIH0pO1xuXG4gICQoJy5zd2l0Y2hlcl9faW5wdXQnKS5mb2N1cyhmdW5jdGlvbihlKSB7XG4gICAgICBpZiAoIW1vdXNldXApIHtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcygnZm9jdXNlZCcpO1xuICAgICAgfVxuICAgICAgbW91c2V1cCA9IGZhbHNlO1xuICB9KTtcblxuICAkKCcuc3dpdGNoZXJfX2lucHV0JykuYmx1cihmdW5jdGlvbihlKSB7XG4gICAgJCh0aGlzKS5wYXJlbnQoKS5yZW1vdmVDbGFzcygnZm9jdXNlZCcpO1xuICB9KTtcblxuXG4gICQoJy5zd2l0Y2hlci10ZXh0X19sYWJlbCcpLm1vdXNldXAoZnVuY3Rpb24oZSkge1xuICAgIG1vdXNldXAgPSB0cnVlO1xuICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2ZvY3VzZWQnKTtcbiAgfSk7XG5cbiAgJCgnLnN3aXRjaGVyLXRleHRfX2lucHV0JykuZm9jdXMoZnVuY3Rpb24oZSkge1xuICAgICAgaWYgKCFtb3VzZXVwKSB7XG4gICAgICAgICQodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoJ2ZvY3VzZWQnKTtcbiAgICAgIH1cbiAgICAgIG1vdXNldXAgPSBmYWxzZTtcbiAgfSk7XG5cbiAgJCgnLnN3aXRjaGVyLXRleHRfX2lucHV0JykuYmx1cihmdW5jdGlvbihlKSB7XG4gICAgJCh0aGlzKS5wYXJlbnQoKS5yZW1vdmVDbGFzcygnZm9jdXNlZCcpO1xuICB9KTtcblxuXG4gICQoJy5zd2l0Y2hlci1pY29uX19sYWJlbCcpLm1vdXNldXAoZnVuY3Rpb24oZSkge1xuICAgIG1vdXNldXAgPSB0cnVlO1xuICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2ZvY3VzZWQnKTtcbiAgfSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAkKCcudGFic19fYnV0dG9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgaWYgKCEkKHRoaXMpLmhhc0NsYXNzKCdhY3RpdmUnKSAmJiAhJCh0aGlzKS5oYXNDbGFzcygnZGlzYWJsZWQnKSkge1xuICAgICAgJCh0aGlzKVxuICAgICAgICAucGFyZW50cygnLnRhYnMnKVxuICAgICAgICAuZmluZCgnLnRhYnNfX2J1dHRvbicpXG4gICAgICAgIC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH1cbiAgfSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICBsZXQgbW91c2V1cCA9IGZhbHNlO1xuXG5cbiAgJCgnLnRvZ2dsZScpLm1vdXNldXAoZnVuY3Rpb24oZSkge1xuICAgIG1vdXNldXAgPSB0cnVlO1xuICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2ZvY3VzZWQnKTtcbiAgfSk7XG5cbiAgJCgnLnRvZ2dsZV9faW5wdXQnKS5mb2N1cyhmdW5jdGlvbihlKSB7XG4gICAgICBpZiAoIW1vdXNldXApIHtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcygnZm9jdXNlZCcpO1xuICAgICAgfVxuICAgICAgbW91c2V1cCA9IGZhbHNlO1xuICB9KTtcblxuICAkKCcudG9nZ2xlX19pbnB1dCcpLmJsdXIoZnVuY3Rpb24oZSkge1xuICAgICQodGhpcykucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ2ZvY3VzZWQnKTtcbiAgfSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICBjb25zdCB1cGxvYWRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnVwbG9hZCcpO1xuXG4gIGlmICghdXBsb2Fkc1swXSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0cyAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGhpZ2hsaWdodChlKSB7XG4gICAgZS5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZ2hsaWdodCcpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHVuaGlnaGxpZ2h0KGUpIHtcbiAgICBlLmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlnaGxpZ2h0Jyk7XG4gIH07XG5cbiAgZnVuY3Rpb24gZ2V0UmVzdWx0QmxvY2soaW5wdXQpIHtcbiAgICBjb25zdCAkaWR4ID0gJChpbnB1dCkucGFyZW50KCkuYXR0cignZGF0YS1pbnB1dCcpO1xuICAgIHJldHVybiAkKGlucHV0KS5wYXJlbnRzKCcudXBsb2FkJykuZmluZChcIltkYXRhLXJlc3VsdD0nXCIgKyAkaWR4ICtcIiddXCIpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGZpbGxSZXN1bHQoaW5wdXQpIHtcbiAgICBjb25zdCAkcmVzdWx0ID0gZ2V0UmVzdWx0QmxvY2soaW5wdXQpO1xuICAgIGNvbnN0ICRuYW1lID0gJHJlc3VsdC5maW5kKCcudXBsb2FkX19uYW1lJyk7XG4gICAgJG5hbWUudGV4dChpbnB1dC5maWxlc1swXS5uYW1lKTtcbiAgfTtcblxuICBmdW5jdGlvbiBzaG93UmVzdWx0KGlucHV0KSB7XG4gICAgY29uc3QgJHJlc3VsdCA9IGdldFJlc3VsdEJsb2NrKGlucHV0KTtcbiAgICAkcmVzdWx0LmFkZENsYXNzKCdzaG93Jyk7XG4gIH07XG5cbiAgZnVuY3Rpb24gaGlkZVJlc3VsdChpbnB1dCkge1xuICAgIGNvbnN0ICRyZXN1bHQgPSBnZXRSZXN1bHRCbG9jayhpbnB1dCk7XG4gICAgJHJlc3VsdC5yZW1vdmVDbGFzcygnc2hvdycpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHNob3dMYWJlbChpbnB1dCkge1xuICAgIGNvbnN0ICRsYWJlbCA9ICQoaW5wdXQpLnBhcmVudCgpO1xuICAgICRsYWJlbC5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gIH07XG5cbiAgZnVuY3Rpb24gaGlkZUxhYmVsKGlucHV0KSB7XG4gICAgY29uc3QgJGxhYmVsID0gJChpbnB1dCkucGFyZW50KCk7XG4gICAgJGxhYmVsLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgfTtcblxuICBmdW5jdGlvbiBhZGRMb2FkZXIoaW5wdXQpIHtcbiAgICBjb25zdCAkcmVzdWx0ID0gZ2V0UmVzdWx0QmxvY2soaW5wdXQpO1xuICAgICRyZXN1bHQuYWRkQ2xhc3MoJ2xvYWRlcicpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHJlbW92ZUxvYWRlcihpbnB1dCkge1xuICAgIGNvbnN0ICRyZXN1bHQgPSBnZXRSZXN1bHRCbG9jayhpbnB1dCk7XG4gICAgJHJlc3VsdC5yZW1vdmVDbGFzcygnbG9hZGVyJyk7XG4gIH07XG5cbiAgY29uc3QgcmVhZFVybCA9IChpbnB1dCkgPT4ge1xuICAgIGlmIChpbnB1dC5maWxlcyAmJiBpbnB1dC5maWxlc1swXSkge1xuICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG5cbiAgICAgIHJlYWRlci5vbmxvYWRzdGFydCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIC8vcHJvZ3Jlc3MuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuXG4gICAgICAgIGFkZExvYWRlcihpbnB1dCk7XG4gICAgICAgIGZpbGxSZXN1bHQoaW5wdXQpO1xuICAgICAgICBzaG93UmVzdWx0KGlucHV0KTtcbiAgICAgIH07XG5cbiAgICAgIHJlYWRlci5vbnByb2dyZXNzID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIH1cblxuICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIC8vIGZpbGVJbWcuc2V0QXR0cmlidXRlKCdzcmMnLCBlLnRhcmdldC5yZXN1bHQpO1xuICAgICAgICAvLyBmaWxlTmFtZS50ZXh0Q29udGVudCA9IGlucHV0LmZpbGVzWzBdLm5hbWU7XG4gICAgICAgIC8vICFmaWxlUmVzdWx0LmNsYXNzTGlzdC5jb250YWlucygnc2hvdycpICYmIGZpbGVSZXN1bHQuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuXG4gICAgICAgIC8vIHByb2dyZXNzLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICAgICAgLy8gYmFyLnN0eWxlLndpZHRoID0gMDtcbiAgICAgICAgcmVtb3ZlTG9hZGVyKGlucHV0KTtcbiAgICAgICAgaGlkZUxhYmVsKGlucHV0KTtcblxuICAgICAgICBjb25zdCBibG9jayA9ICQoaW5wdXQpLnBhcmVudHMoJy51cGxvYWQnKTtcblxuICAgICAgICBpZiAoYmxvY2suaGFzQ2xhc3MoJ211bHRpJykpIHtcbiAgICAgICAgICBjb25zdCBuZXdJZHggPSAkKCcudXBsb2FkX19pbnB1dC13cmFwIC51cGxvYWRfX2xhYmVsJykubGVuZ3RoO1xuXG4gICAgICAgICAgY29uc3QgJHJlc3VsdCA9IGdldFJlc3VsdEJsb2NrKGlucHV0KTtcbiAgICAgICAgICBjb25zdCAkcmVzdWx0V3JhcCA9ICRyZXN1bHQucGFyZW50KCk7XG4gICAgICAgICAgY29uc3QgJG5ld1Jlc3VsdCA9ICRyZXN1bHQuY2xvbmUodHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgJG5ld1Jlc3VsdC5yZW1vdmVDbGFzcygnc2hvdycpO1xuICAgICAgICAgIC8vJG5ld1Jlc3VsdC5hdHRyKCdkYXRhLXJlc3VsdCcsIG5ld0lkeCk7XG4gICAgICAgICAgJHJlc3VsdFdyYXAucHJlcGVuZCgkbmV3UmVzdWx0KTtcbiAgICAgICAgICAkcmVzdWx0LnBhcmVudHMoJy51cGxvYWRfX2lucHV0LXJlc3VsdHMnKVxuICAgICAgICAgICAgLmZpbmQoJy51cGxvYWRfX3Jlc3VsdCcpLmVhY2goZnVuY3Rpb24oaWQsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLXJlc3VsdCcsIGlkKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY29uc3QgJGxhYmVsV3JhcCA9ICQoaW5wdXQpLnBhcmVudCgpLnBhcmVudCgpO1xuICAgICAgICAgIGNvbnN0ICRsYWJlbCA9ICQoaW5wdXQpLnBhcmVudCgpO1xuICAgICAgICAgIGNvbnN0ICRuZXdMYWJlbCA9ICRsYWJlbC5jbG9uZSh0cnVlLCB0cnVlKTtcbiAgICAgICAgICAkbmV3TGFiZWwucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgIC8vJG5ld0xhYmVsLmF0dHIoJ2RhdGEtaW5wdXQnLCBuZXdJZHgpO1xuICAgICAgICAgICRsYWJlbFdyYXAucHJlcGVuZCgkbmV3TGFiZWwpO1xuICAgICAgICAgICRsYWJlbC5wYXJlbnRzKCcudXBsb2FkX19pbnB1dC13cmFwJylcbiAgICAgICAgICAgIC5maW5kKCcudXBsb2FkX19sYWJlbCcpLmVhY2goZnVuY3Rpb24oaWQsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLWlucHV0JywgaWQpO1xuICAgICAgICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCdpbnB1dCcpLmF0dHIoJ25hbWUnLCAnZmlsZS0nICsgaWQpO1xuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXJzKCRuZXdMYWJlbCwgJG5ld1Jlc3VsdCk7XG5cbiAgICAgICAgICAvLyAkbmV3TGFiZWwuY2hpbGRyZW4oJ2lucHV0JylbMF0uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgb25GaWxlQ2hhbmdlKTtcblxuICAgICAgICAgIC8vIFsnZHJhZ2VudGVyJywgJ2RyYWdvdmVyJywgJ2RyYWdsZWF2ZScsICdkcm9wJ10uZm9yRWFjaChldmVudE5hbWUgPT4ge1xuICAgICAgICAgIC8vICAgJG5ld0xhYmVsWzBdLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBwcmV2ZW50RGVmYXVsdHMsIGZhbHNlKVxuICAgICAgICAgIC8vIH0pO1xuXG4gICAgICAgICAgLy8gWydkcmFnZW50ZXInLCAnZHJhZ292ZXInXS5mb3JFYWNoKGV2ZW50TmFtZSA9PiB7XG4gICAgICAgICAgLy8gICAkbmV3TGFiZWxbMF0uYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGhpZ2hsaWdodCwgZmFsc2UpXG4gICAgICAgICAgLy8gfSk7XG5cbiAgICAgICAgICAvLyBbJ2RyYWdsZWF2ZScsICdkcm9wJ10uZm9yRWFjaChldmVudE5hbWUgPT4ge1xuICAgICAgICAgIC8vICAgJG5ld0xhYmVsWzBdLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCB1bmhpZ2hsaWdodCwgZmFsc2UpXG4gICAgICAgICAgLy8gfSk7XG4gICAgICAgICAgLy8gJG5ld0xhYmVsWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBoYW5kbGVEcm9wLCBmYWxzZSk7XG4gICAgICAgICAgLy8gJG5ld1Jlc3VsdC5jaGlsZHJlbignLnVwbG9hZF9fY2xvc2UnKVswXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uRmlsZUNsZWFyKTtcbiAgICAgICAgfVxuXG5cbiAgICAgIH1cblxuXG4gICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChpbnB1dC5maWxlc1swXSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3Qgb25GaWxlQ2hhbmdlID0gKGUpID0+IHtcbiAgICByZWFkVXJsKGUuY3VycmVudFRhcmdldCk7XG4gICAgY29uc29sZS5sb2coZS5jdXJyZW50VGFyZ2V0KTtcbiAgfTtcblxuICBmdW5jdGlvbiBvbkZpbGVEcm9wKGlucHV0KSB7XG4gICAgcmVhZFVybChpbnB1dCk7XG4gIH07XG5cbiAgZnVuY3Rpb24gaGFuZGxlRHJvcChlKSB7XG4gICAgbGV0IGR0ID0gZS5kYXRhVHJhbnNmZXJcbiAgICBsZXQgZmlsZXMgPSBkdC5maWxlc1xuXG4gICAgY29uc3QgdGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0O1xuICAgIGNvbnN0IGlucHV0ID0gdGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0Jyk7XG5cbiAgICBpZiAoaW5wdXQuZmlsZXMgJiYgaW5wdXQuZmlsZXNbMF0pIHtcbiAgICAgIGlucHV0LnZhbHVlID0gJyc7XG5cbiAgICAgIGlmKCEvc2FmYXJpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSl7XG4gICAgICAgIGlucHV0LnR5cGUgPSAnJztcbiAgICAgICAgaW5wdXQudHlwZSA9ICdmaWxlJztcbiAgICAgIH1cblxuICAgICAgLy8gZmlsZVJlc3VsdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICAvLyBmaWxlTmFtZS50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgLy8gZmlsZUltZy5yZW1vdmVBdHRyaWJ1dGUoJ3NyYycpO1xuICAgIH1cblxuICAgIGlucHV0LmZpbGVzID0gZmlsZXM7XG4gICAgb25GaWxlRHJvcChpbnB1dCk7XG5cbiAgICAvL2hhbmRsZUZpbGVzKGZpbGVzKVxuICB9O1xuXG4gIGZ1bmN0aW9uIHNldElkcyhyZXN1bHQsIGlkeCkge1xuICAgIHJlc3VsdC5wYXJlbnRzKCcudXBsb2FkJykuZmluZCgnLnVwbG9hZF9fbGFiZWwnKS5lYWNoKGZ1bmN0aW9uKGlkLCBlbGVtZW50KSB7XG4gICAgICBpZiAoaWQgPiBpZHgpIHtcbiAgICAgICAgY29uc3QgbmV3SWQgPSBpZCAtIDE7XG4gICAgICAgICQodGhpcykuYXR0cignZGF0YS1pbnB1dCcsIG5ld0lkKTtcbiAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignaW5wdXQnKS5hdHRyKCduYW1lJywgJ2ZpbGUtJyArIG5ld0lkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQodGhpcykuYXR0cignZGF0YS1pbnB1dCcsIGlkKTtcbiAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignaW5wdXQnKS5hdHRyKCduYW1lJywgJ2ZpbGUtJyArIGlkKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJlc3VsdC5wYXJlbnRzKCcudXBsb2FkJykuZmluZCgnLnVwbG9hZF9fcmVzdWx0JykuZWFjaChmdW5jdGlvbihpZCwgZWxlbWVudCkge1xuICAgICAgaWYgKGlkID4gaWR4KSB7XG4gICAgICAgICQodGhpcykuYXR0cignZGF0YS1yZXN1bHQnLCBpZCAtIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLXJlc3VsdCcsIGlkKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBmdW5jdGlvbiBvbkZpbGVDbGVhcihlKSB7XG4gICAgY29uc3QgJHRhcmdldCA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICBjb25zdCAkcmVzdWx0ID0gJHRhcmdldC5wYXJlbnRzKCcudXBsb2FkX19yZXN1bHQnKTtcbiAgICBjb25zdCAkaWR4ID0gJHJlc3VsdC5hdHRyKCdkYXRhLXJlc3VsdCcpO1xuICAgIGNvbnN0ICRsYWJlbCA9ICRyZXN1bHQucGFyZW50cygnLnVwbG9hZCcpLmZpbmQoXCJbZGF0YS1pbnB1dD0nXCIgKyAkaWR4ICtcIiddXCIpO1xuICAgIGNvbnN0IGlucHV0ID0gJGxhYmVsLmNoaWxkcmVuKCdpbnB1dCcpWzBdO1xuXG4gICAgY29uc3QgJGJsb2NrID0gJHRhcmdldC5wYXJlbnRzKCcudXBsb2FkJyk7XG5cbiAgICBpZiAoJGJsb2NrLmhhc0NsYXNzKCdtdWx0aScpKSB7XG4gICAgICBzZXRJZHMoJHJlc3VsdCwgJGlkeCk7XG5cbiAgICAgICRyZXN1bHQucmVtb3ZlKCk7XG4gICAgICAkbGFiZWwucmVtb3ZlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlucHV0LnZhbHVlID0gJyc7XG5cbiAgICAgIGlmKCEvc2FmYXJpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSl7XG4gICAgICAgIGlucHV0LnR5cGUgPSAnJztcbiAgICAgICAgaW5wdXQudHlwZSA9ICdmaWxlJztcbiAgICAgIH1cblxuICAgICAgJGxhYmVsLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICRyZXN1bHQucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcbiAgICB9XG5cblxuICB9XG5cbiAgZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcnMoJGlucHV0TGFiZWwsICRyZXN1bHQpIHtcbiAgICAvLyBjb25zdCBmaWxlTGFiZWwgPSAkKGJsb2NrKS5maW5kKFwiW2RhdGEtaW5wdXQ9J1wiICsgaWR4ICtcIiddXCIpWzBdO1xuICAgIC8vIGNvbnN0IGZpbGVJbnB1dCA9ICQoZmlsZUxhYmVsKS5maW5kKCdpbnB1dCcpWzBdO1xuICAgIC8vIGNvbnN0IGZpbGVSZXN1bHQgPSAkKGJsb2NrKS5maW5kKFwiW2RhdGEtcmVzdWx0PSdcIiArIGlkeCArXCInXVwiKVswXTtcbiAgICAvLyBjb25zdCBmaWxlQ2xlYXJCdG4gPSAkKGZpbGVSZXN1bHQpLmZpbmQoJy51cGxvYWRfX2Nsb3NlJylbMF07XG4gICAgY29uc3QgaW5wdXQgPSAkaW5wdXRMYWJlbC5jaGlsZHJlbignaW5wdXQnKVswXTtcbiAgICBjb25zdCBpbnB1dExhYmVsID0gJGlucHV0TGFiZWxbMF07XG4gICAgY29uc3QgZmlsZUNsZWFyQnRuID0gJHJlc3VsdC5maW5kKCcudXBsb2FkX19jbG9zZScpWzBdO1xuXG4gICAgWydkcmFnZW50ZXInLCAnZHJhZ292ZXInLCAnZHJhZ2xlYXZlJywgJ2Ryb3AnXS5mb3JFYWNoKGV2ZW50TmFtZSA9PiB7XG4gICAgICBpbnB1dExhYmVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBwcmV2ZW50RGVmYXVsdHMsIGZhbHNlKVxuICAgIH0pO1xuXG4gICAgWydkcmFnZW50ZXInLCAnZHJhZ292ZXInXS5mb3JFYWNoKGV2ZW50TmFtZSA9PiB7XG4gICAgICBpbnB1dExhYmVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoaWdobGlnaHQsIGZhbHNlKVxuICAgIH0pO1xuXG4gICAgWydkcmFnbGVhdmUnLCAnZHJvcCddLmZvckVhY2goZXZlbnROYW1lID0+IHtcbiAgICAgIGlucHV0TGFiZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIHVuaGlnaGxpZ2h0LCBmYWxzZSlcbiAgICB9KVxuXG4gICAgaW5wdXRMYWJlbC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgaGFuZGxlRHJvcCwgZmFsc2UpO1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG9uRmlsZUNoYW5nZSk7XG4gICAgZmlsZUNsZWFyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25GaWxlQ2xlYXIpO1xuICB9XG5cbiAgLy8gZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoYmxvY2ssIGlkeCkge1xuICAvLyAgIGNvbnN0IGZpbGVMYWJlbCA9ICQoYmxvY2spLmZpbmQoXCJbZGF0YS1pbnB1dD0nXCIgKyBpZHggK1wiJ11cIilbMF07XG4gIC8vICAgY29uc3QgZmlsZUlucHV0ID0gJChmaWxlTGFiZWwpLmZpbmQoJ2lucHV0JylbMF07XG5cbiAgLy8gICBbJ2RyYWdlbnRlcicsICdkcmFnb3ZlcicsICdkcmFnbGVhdmUnLCAnZHJvcCddLmZvckVhY2goZXZlbnROYW1lID0+IHtcbiAgLy8gICAgIGZpbGVMYWJlbC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgcHJldmVudERlZmF1bHRzLCBmYWxzZSlcbiAgLy8gICB9KTtcblxuICAvLyAgIFsnZHJhZ2VudGVyJywgJ2RyYWdvdmVyJ10uZm9yRWFjaChldmVudE5hbWUgPT4ge1xuICAvLyAgICAgZmlsZUxhYmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoaWdobGlnaHQsIGZhbHNlKVxuICAvLyAgIH0pO1xuXG4gIC8vICAgWydkcmFnbGVhdmUnLCAnZHJvcCddLmZvckVhY2goZXZlbnROYW1lID0+IHtcbiAgLy8gICAgIGZpbGVMYWJlbC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgdW5oaWdobGlnaHQsIGZhbHNlKVxuICAvLyAgIH0pXG5cbiAgLy8gICBmaWxlTGFiZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJvcCcsIGhhbmRsZURyb3AsIGZhbHNlKTtcbiAgLy8gICBmaWxlSW5wdXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgb25GaWxlQ2hhbmdlKTtcbiAgLy8gfVxuXG5cblxuXG4gIHVwbG9hZHMuZm9yRWFjaChmdW5jdGlvbih1cGxvYWQpIHtcblxuICAgIGNvbnN0ICRpbnB1dExhYmVsID0gJCh1cGxvYWQpLmZpbmQoJy51cGxvYWRfX2xhYmVsJyk7XG4gICAgY29uc3QgJHJlc3VsdCA9ICQodXBsb2FkKS5maW5kKCcudXBsb2FkX19yZXN1bHQnKTtcblxuICAgIGlmICghJCh1cGxvYWQpLmhhc0NsYXNzKCdkaXNhYmxlZCcpKSB7XG4gICAgICBhZGRFdmVudExpc3RlbmVycygkaW5wdXRMYWJlbCwgJHJlc3VsdCk7XG4gICAgfVxuXG5cbiAgICAvLyAvLyDQodCx0YDQsNGB0YvQstCw0LXQvCDRgdGC0LDQvdC00LDRgNGC0L3Ri9C1INGB0L7QsdGL0YLQuNGPINC/0YDQuCDQv9C10YDQtdGC0LDRgdC60LjQstCw0L3QuNC4INGE0LDQudC70LBcblxuICAgIC8vIFsnZHJhZ2VudGVyJywgJ2RyYWdvdmVyJywgJ2RyYWdsZWF2ZScsICdkcm9wJ10uZm9yRWFjaChldmVudE5hbWUgPT4ge1xuICAgIC8vICAgZmlsZUxhYmVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBwcmV2ZW50RGVmYXVsdHMsIGZhbHNlKVxuICAgIC8vIH0pO1xuXG4gICAgLy8gLy8g0JTQvtCx0LDQstC70Y/QtdC8INGB0YLQuNC70Lgg0L/RgNC4INC/0LXRgNC10YLQsNGB0LrQuNCy0LDQvdC40Lgg0YTQsNC50LvQsCDQvdCw0LQg0L3Rg9C20L3QvtC5INC+0LHQu9Cw0YHRgtGM0Y5cblxuICAgIC8vIFsnZHJhZ2VudGVyJywgJ2RyYWdvdmVyJ10uZm9yRWFjaChldmVudE5hbWUgPT4ge1xuICAgIC8vICAgZmlsZUxhYmVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoaWdobGlnaHQsIGZhbHNlKVxuICAgIC8vIH0pO1xuXG4gICAgLy8gWydkcmFnbGVhdmUnLCAnZHJvcCddLmZvckVhY2goZXZlbnROYW1lID0+IHtcbiAgICAvLyAgIGZpbGVMYWJlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgdW5oaWdobGlnaHQsIGZhbHNlKVxuICAgIC8vIH0pXG5cbiAgICAvLyAvL1xuXG5cbiAgICAvLyBmaWxlTGFiZWwuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGhhbmRsZURyb3AsIGZhbHNlKTtcbiAgICAvLyBmaWxlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgb25GaWxlQ2hhbmdlKTtcbiAgfSk7XG5cblxuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAvLyB2YXIgRGVmYXVsdHMgPSAkLmZuLnNlbGVjdDIuYW1kLnJlcXVpcmUoJ3NlbGVjdDIvZGVmYXVsdHMnKTtcblxuICAvLyAkLmV4dGVuZChEZWZhdWx0cy5kZWZhdWx0cywge1xuICAvLyAgICAgc2VhcmNoSW5wdXRQbGFjZWhvbGRlcjogJydcbiAgLy8gfSk7XG5cbiAgLy8gdmFyIFNlYXJjaERyb3Bkb3duID0gJC5mbi5zZWxlY3QyLmFtZC5yZXF1aXJlKCdzZWxlY3QyL2Ryb3Bkb3duL3NlYXJjaCcpO1xuXG4gIC8vIHZhciBfcmVuZGVyU2VhcmNoRHJvcGRvd24gPSBTZWFyY2hEcm9wZG93bi5wcm90b3R5cGUucmVuZGVyO1xuXG4gIC8vIFNlYXJjaERyb3Bkb3duLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbihkZWNvcmF0ZWQpIHtcblxuICAvLyAgICAgLy8gaW52b2tlIHBhcmVudCBtZXRob2RcbiAgLy8gICAgIHZhciAkcmVuZGVyZWQgPSBfcmVuZGVyU2VhcmNoRHJvcGRvd24uYXBwbHkodGhpcywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpO1xuXG4gIC8vICAgICB0aGlzLiRzZWFyY2guYXR0cigncGxhY2Vob2xkZXInLCB0aGlzLm9wdGlvbnMuZ2V0KCdzZWFyY2hJbnB1dFBsYWNlaG9sZGVyJykpO1xuXG4gIC8vICAgICByZXR1cm4gJHJlbmRlcmVkO1xuICAvLyB9O1xuXG4gICQoJzxkaXYvPicsIHtcbiAgICAnY2xhc3MnOiAncHJlbG9hZGVyJ1xuICB9KS5jc3Moe1xuICAgICdwb3NpdGlvbic6ICdmaXhlZCcsXG4gICAgJ3RvcCc6ICcwJyxcbiAgICAnbGVmdCc6ICcwJyxcbiAgICAnd2lkdGgnOiAnMTAwdncnLFxuICAgICdoZWlnaHQnOiAnMTAwdmgnLFxuICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogJyNmZmYnLFxuICAgICd6LWluZGV4JzogJzMwMDAnXG4gIH0pLmFwcGVuZFRvKCdodG1sJyk7XG5cblxuICBjb25zdCBjaGVja0lucHV0ID0gZnVuY3Rpb24oZSkge1xuICAgIGlmIChlLnRhcmdldC52YWx1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAkKGUudGFyZ2V0KS5hZGRDbGFzcygnaW5wdXRlZCcpXG4gICAgfSBlbHNlIHtcbiAgICAgICQoZS50YXJnZXQpLnJlbW92ZUNsYXNzKCdpbnB1dGVkJylcbiAgICB9XG4gIH07XG5cbiAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgJCgnLmpzLXNlbGVjdC1jb21ibycpLnNlbGVjdDIoe1xuICAgICAgLy9taW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHlcbiAgICAgIHBsYWNlaG9sZGVyOiBcItCS0LLQtdC00LjRgtC1INC40LvQuCDQstGL0LHQtdGA0LjRgtC1INCy0LDRgNC40LDQvdGCXCIsXG4gICAgICBkcm9wZG93bkNzc0NsYXNzOiAnc2VsZWN0LWRyb3Bkb3duJyxcbiAgICAgIFwibGFuZ3VhZ2VcIjoge1xuICAgICAgICBcIm5vUmVzdWx0c1wiOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgcmV0dXJuICfQndC40YfQtdCz0L4g0L3QtSDQvdCw0LnQtNC10L3Qvic7XG4gICAgICAgIH0sXG4gICAgICAgIHNlYXJjaGluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIFwi0JfQsNCz0YDRg9C30LrQsC4uLlwiO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvL3NlYXJjaElucHV0UGxhY2Vob2xkZXI6ICdNeSBjdXN0b20gcGxhY2Vob2xkZXIuLi4nXG4gICAgfSk7XG5cbiAgICAkKCcuanMtc2VsZWN0LWNvbWJvJykub24oJ3NlbGVjdDI6b3BlbicsIGZ1bmN0aW9uKCkge1xuICAgICAgJCgnLnNlbGVjdDItc2VhcmNoIGlucHV0Jykub2ZmKCdpbnB1dCcsIGNoZWNrSW5wdXQpO1xuICAgICAgJCgnLnNlbGVjdDItc2VhcmNoIGlucHV0Jykub24oJ2lucHV0JywgY2hlY2tJbnB1dCk7XG4gICAgfSk7XG5cbiAgICAkKCcuanMtc2VsZWN0LWNvbWJvJykub24oJ3NlbGVjdDI6Y2xvc2luZycsIGZ1bmN0aW9uKCkge1xuICAgICAgJCgnLnNlbGVjdDItc2VhcmNoIGlucHV0JykucmVtb3ZlQ2xhc3MoJ2lucHV0ZWQnKTtcbiAgICB9KTtcblxuXG5cblxuXG4gICAgJCgnLmpzLXNlbGVjdC1jb21iby1vcGVuJykuc2VsZWN0Mih7XG4gICAgICAvL21pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eVxuICAgICAgcGxhY2Vob2xkZXI6IFwi0JLQstC10LTQuNGC0LUg0LjQu9C4INCy0YvQsdC10YDQuNGC0LUg0LLQsNGA0LjQsNC90YJcIixcbiAgICAgIGRyb3Bkb3duQ3NzQ2xhc3M6IFsnc2VsZWN0LWRyb3Bkb3duJywgJ3NlbGVjdC1kcm9wZG93bi1tdWx0aScsICdzZWxlY3QtZHJvcGRvd24tLW9wZW5lZCddLFxuICAgICAgXCJsYW5ndWFnZVwiOiB7XG4gICAgICAgIFwibm9SZXN1bHRzXCI6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICByZXR1cm4gJ9Cd0LjRh9C10LPQviDQvdC1INC90LDQudC00LXQvdC+JztcbiAgICAgICAgfSxcbiAgICAgICAgc2VhcmNoaW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gXCLQl9Cw0LPRgNGD0LfQutCwLi4uXCI7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvL3NlYXJjaElucHV0UGxhY2Vob2xkZXI6ICdNeSBjdXN0b20gcGxhY2Vob2xkZXIuLi4nXG4gICAgfSkub24oXCJzZWxlY3QyOmNsb3NpbmdcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pLm9uKFwic2VsZWN0MjpjbG9zZWRcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBsaXN0LnNlbGVjdDIoXCJvcGVuXCIpO1xuICAgIH0pO1xuXG4gICAgJCgnLmpzLXNlbGVjdC1jb21iby1vcGVuJykuc2VsZWN0Mignb3BlbicpO1xuICAgICQoJy5zZWxlY3QtZHJvcGRvd24tbXVsdGkgaW5wdXQnKS5vbignaW5wdXQnLCBjaGVja0lucHV0KTtcblxuXG5cblxuXG4gICAgJCgnLmpzLXNlbGVjdC1jb21iby1zZWFyY2hpbmcnKS5zZWxlY3QyKHtcbiAgICAgIC8vbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5XG4gICAgICBwbGFjZWhvbGRlcjogXCLQktCy0LXQtNC40YLQtSDQuNC70Lgg0LLRi9Cx0LXRgNC40YLQtSDQstCw0YDQuNCw0L3RglwiLFxuICAgICAgZHJvcGRvd25Dc3NDbGFzczogW1xuICAgICAgICAnc2VsZWN0LWRyb3Bkb3duJyxcbiAgICAgICAgJ3NlbGVjdC1kcm9wZG93bi0tb3BlbmVkJyxcbiAgICAgICAgJ3NlbGVjdC1kcm9wZG93bi0tc2VhcmNoaW5nJ1xuICAgICAgXSxcbiAgICAgIFwibGFuZ3VhZ2VcIjoge1xuICAgICAgICBcIm5vUmVzdWx0c1wiOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgcmV0dXJuICfQndC40YfQtdCz0L4g0L3QtSDQvdCw0LnQtNC10L3Qvic7XG4gICAgICAgIH0sXG4gICAgICAgIHNlYXJjaGluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIFwi0JfQsNCz0YDRg9C30LrQsC4uLlwiO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgYWpheDoge1xuICAgICAgICBkZWxheTogNTAwMDAwMDAwLFxuICAgICAgICB1cmw6ICdodHRwczovL2FudGlicmVlei5naXRodWIuaW8vc2VsZWN0LWRhdGEvc2VsZWN0LWRhdGEuanNvbicsXG4gICAgICB9XG4gICAgICAvL3NlYXJjaElucHV0UGxhY2Vob2xkZXI6ICdNeSBjdXN0b20gcGxhY2Vob2xkZXIuLi4nXG4gICAgfSkub24oXCJzZWxlY3QyOmNsb3NpbmdcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pLm9uKFwic2VsZWN0MjpjbG9zZWRcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBsaXN0LnNlbGVjdDIoXCJvcGVuXCIpO1xuICAgIH0pO1xuXG4gICAgdmFyIGV2ZW50ID0gbmV3IEV2ZW50KCdpbnB1dCcsIHtcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgIH0pO1xuXG4gICAgJCgnLmpzLXNlbGVjdC1jb21iby1zZWFyY2hpbmcnKS5zZWxlY3QyKCdvcGVuJyk7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGlmICgkKCcuc2VsZWN0LWRyb3Bkb3duLS1zZWFyY2hpbmcgaW5wdXQnKVswXSkge1xuICAgICAgICAkKCcuc2VsZWN0LWRyb3Bkb3duLS1zZWFyY2hpbmcgaW5wdXQnKVswXS5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgIH1cbiAgICB9LCA1MDApO1xuXG5cblxuXG4gICAgJCgnLmpzLXNlbGVjdC1jb21iby1ub3QtZm91bmQnKS5zZWxlY3QyKHtcbiAgICAgIC8vbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5XG4gICAgICBkcm9wZG93bkNzc0NsYXNzOiBbJ3NlbGVjdC1kcm9wZG93bicsICdzZWxlY3QtZHJvcGRvd24tLW9wZW5lZCcsICdzZWxlY3QtZHJvcGRvd24tLW5vdC1mb3VuZCddLFxuICAgICAgXCJsYW5ndWFnZVwiOiB7XG4gICAgICAgIFwibm9SZXN1bHRzXCI6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICByZXR1cm4gJ9Cd0LjRh9C10LPQviDQvdC1INC90LDQudC00LXQvdC+JztcbiAgICAgICAgfSxcbiAgICAgICAgc2VhcmNoaW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gXCLQl9Cw0LPRgNGD0LfQutCwLi4uXCI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vc2VhcmNoSW5wdXRQbGFjZWhvbGRlcjogJ015IGN1c3RvbSBwbGFjZWhvbGRlci4uLidcbiAgICB9KS5vbihcInNlbGVjdDI6Y2xvc2luZ1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSkub24oXCJzZWxlY3QyOmNsb3NlZFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGxpc3Quc2VsZWN0MihcIm9wZW5cIik7XG4gICAgfSk7XG5cbiAgICAkKCcuanMtc2VsZWN0LWNvbWJvLW5vdC1mb3VuZCcpLnNlbGVjdDIoJ29wZW4nKTtcbiAgICAkKCcuc2VsZWN0LWRyb3Bkb3duLS1ub3QtZm91bmQgaW5wdXQnKS52YWwoJ9GE0YvQstCw0L/QsCcpO1xuXG4gICAgaWYgKCQoJy5zZWxlY3QtZHJvcGRvd24tLW5vdC1mb3VuZCBpbnB1dCcpWzBdKSB7XG4gICAgICAkKCcuc2VsZWN0LWRyb3Bkb3duLS1ub3QtZm91bmQgaW5wdXQnKVswXS5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICB9XG5cblxuXG4gICAgJCgnLmpzLXNlbGVjdC1zaW5nbGUnKS5zZWxlY3QyKHtcbiAgICAgIHBsYWNlaG9sZGVyOiBcItCS0YvQsdC10YDQuNGC0LUg0LLQsNGA0LjQsNC90YJcIixcbiAgICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcbiAgICAgIGRyb3Bkb3duQ3NzQ2xhc3M6IFsnc2VsZWN0LWRyb3Bkb3duJywnc2VsZWN0LWRyb3Bkb3duLS1zaW5nbGUnXVxuICAgIH0pXG5cbiAgICB2YXIgbGlzdCA9ICQoXCIuanMtc2VsZWN0LXNpbmdsZS1vcGVuXCIpLnNlbGVjdDIoe1xuICAgICAgcGxhY2Vob2xkZXI6IFwi0JLRi9Cx0LXRgNC40YLQtSDQstCw0YDQuNCw0L3RglwiLFxuICAgICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5LFxuICAgICAgZHJvcGRvd25Dc3NDbGFzczogW1xuICAgICAgICAnc2VsZWN0LWRyb3Bkb3duJyxcbiAgICAgICAgJ3NlbGVjdC1kcm9wZG93bi0tc2luZ2xlJyxcbiAgICAgICAgJ3NlbGVjdC1kcm9wZG93bi0tb3BlbmVkJ1xuICAgICAgXSxcbiAgICAgIGNsb3NlT25TZWxlY3Q6IGZhbHNlXG4gICAgfSkub24oXCJzZWxlY3QyOmNsb3NpbmdcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSkub24oXCJzZWxlY3QyOmNsb3NlZFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGxpc3Quc2VsZWN0MihcIm9wZW5cIik7XG4gICAgfSk7XG5cbiAgICBsaXN0LnNlbGVjdDIoJ29wZW4nKTtcblxuXG5cblxuXG5cblxuICAgICQoJy5qcy1zZWxlY3QtbXVsdGknKS5zZWxlY3QyKHtcbiAgICAgIC8vbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5XG4gICAgICBwbGFjZWhvbGRlcjogXCLQktGL0LHQtdGA0LjRgtC1INCy0LDRgNC40LDQvdGC0YtcIixcbiAgICAgIGRyb3Bkb3duQ3NzQ2xhc3M6IFtcbiAgICAgICAgJ3NlbGVjdC1kcm9wZG93bicsXG4gICAgICAgICdzZWxlY3QtZHJvcGRvd24tbXVsdGknXG4gICAgICBdLFxuICAgICAgXCJsYW5ndWFnZVwiOiB7XG4gICAgICAgIFwibm9SZXN1bHRzXCI6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICByZXR1cm4gJ9Cd0LjRh9C10LPQviDQvdC1INC90LDQudC00LXQvdC+JztcbiAgICAgICAgfSxcbiAgICAgICAgc2VhcmNoaW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gXCLQl9Cw0LPRgNGD0LfQutCwLi4uXCI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vc2VhcmNoSW5wdXRQbGFjZWhvbGRlcjogJ015IGN1c3RvbSBwbGFjZWhvbGRlci4uLidcbiAgICB9KTtcblxuICAgICQoJy5qcy1zZWxlY3QtbXVsdGknKS5vbignc2VsZWN0MjpvcGVuJywgZnVuY3Rpb24oKSB7XG4gICAgICAkKCcuc2VsZWN0Mi1zZWFyY2ggaW5wdXQnKS5vZmYoJ2lucHV0JywgY2hlY2tJbnB1dCk7XG4gICAgICAkKCcuc2VsZWN0Mi1zZWFyY2ggaW5wdXQnKS5vbignaW5wdXQnLCBjaGVja0lucHV0KTtcbiAgICB9KTtcblxuICAgICQoJy5qcy1zZWxlY3QtbXVsdGknKS5vbignc2VsZWN0MjpjbG9zaW5nJywgZnVuY3Rpb24oKSB7XG4gICAgICAkKCcuc2VsZWN0Mi1zZWFyY2ggaW5wdXQnKS5yZW1vdmVDbGFzcygnaW5wdXRlZCcpO1xuICAgIH0pO1xuXG5cbiAgICAkKCcuanMtc2VsZWN0LW11bHRpLW9wZW4nKS5zZWxlY3QyKHtcbiAgICAgIC8vbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5XG4gICAgICBwbGFjZWhvbGRlcjogXCLQktGL0LHQtdGA0LjRgtC1INCy0LDRgNC40LDQvdGC0YtcIixcbiAgICAgIG1heGltdW1TZWxlY3Rpb25MZW5ndGg6IDMsXG4gICAgICBkcm9wZG93bkNzc0NsYXNzOiBbXG4gICAgICAgICdzZWxlY3QtZHJvcGRvd24nLFxuICAgICAgICAnc2VsZWN0LWRyb3Bkb3duLS1vcGVuZWQnLFxuICAgICAgICAnc2VsZWN0LWRyb3Bkb3duLW11bHRpJ1xuICAgICAgXSxcbiAgICAgIFwibGFuZ3VhZ2VcIjoge1xuICAgICAgICBcIm5vUmVzdWx0c1wiOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgcmV0dXJuICfQndC40YfQtdCz0L4g0L3QtSDQvdCw0LnQtNC10L3Qvic7XG4gICAgICAgIH0sXG4gICAgICAgIHNlYXJjaGluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIFwi0JfQsNCz0YDRg9C30LrQsC4uLlwiO1xuICAgICAgICB9LFxuICAgICAgICBtYXhpbXVtU2VsZWN0ZWQ6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgcmV0dXJuIFwi0JzQsNC60YEuINC60L7Qu9C40YfQtdGB0YLQstC+INCy0LDRgNC40LDQvdGC0L7QsiAtIFwiICsgZS5tYXhpbXVtO1xuICAgICAgICB9LFxuICAgICAgfVxuICAgICAgLy9zZWFyY2hJbnB1dFBsYWNlaG9sZGVyOiAnTXkgY3VzdG9tIHBsYWNlaG9sZGVyLi4uJ1xuICAgIH0pLm9uKFwic2VsZWN0MjpjbG9zaW5nXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSkub24oXCJzZWxlY3QyOmNsb3NlZFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGxpc3Quc2VsZWN0MihcIm9wZW5cIik7XG4gICAgfSk7XG5cbiAgICAkKCcuanMtc2VsZWN0LW11bHRpLW9wZW4nKS5zZWxlY3QyKCdvcGVuJyk7XG5cblxuXG5cblxuXG5cblxuXG4gICAgJCgnLmpzLXNlbGVjdC1tdWx0aS1zZWFyY2hpbmcnKS5zZWxlY3QyKHtcbiAgICAgIC8vbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5XG4gICAgICBwbGFjZWhvbGRlcjogXCLQktGL0LHQtdGA0LjRgtC1INCy0LDRgNC40LDQvdGC0YtcIixcbiAgICAgIGRyb3Bkb3duQ3NzQ2xhc3M6IFtcbiAgICAgICAgJ3NlbGVjdC1kcm9wZG93bicsXG4gICAgICAgICdzZWxlY3QtZHJvcGRvd24tLW9wZW5lZCcsXG4gICAgICAgICdzZWxlY3QtZHJvcGRvd24tLXNlYXJjaGluZy1tdWx0aSdcbiAgICAgIF0sXG4gICAgICBcImxhbmd1YWdlXCI6IHtcbiAgICAgICAgXCJub1Jlc3VsdHNcIjogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHJldHVybiAn0J3QuNGH0LXQs9C+INC90LUg0L3QsNC50LTQtdC90L4nO1xuICAgICAgICB9LFxuICAgICAgICBzZWFyY2hpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBcItCX0LDQs9GA0YPQt9C60LAuLi5cIjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGFqYXg6IHtcbiAgICAgICAgZGVsYXk6IDUwMDAwMDAwMCxcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9hbnRpYnJlZXouZ2l0aHViLmlvL3NlbGVjdC1kYXRhL3NlbGVjdC1kYXRhLmpzb24nLFxuICAgICAgfVxuICAgICAgLy9zZWFyY2hJbnB1dFBsYWNlaG9sZGVyOiAnTXkgY3VzdG9tIHBsYWNlaG9sZGVyLi4uJ1xuICAgIH0pLm9uKFwic2VsZWN0MjpjbG9zaW5nXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KS5vbihcInNlbGVjdDI6Y2xvc2VkXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgbGlzdC5zZWxlY3QyKFwib3BlblwiKTtcbiAgICB9KTtcblxuICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgnaW5wdXQnLCB7XG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICB9KTtcblxuICAgICQoJy5qcy1zZWxlY3QtbXVsdGktc2VhcmNoaW5nJykuc2VsZWN0Mignb3BlbicpO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoJCgnLnNlbGVjdC1kcm9wZG93bi0tc2VhcmNoaW5nLW11bHRpICBpbnB1dCcpWzBdKSB7XG4gICAgICAgICQoJy5zZWxlY3QtZHJvcGRvd24tLXNlYXJjaGluZy1tdWx0aSAgaW5wdXQnKVswXS5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgIH1cbiAgICB9LCA1MDApO1xuXG5cblxuXG5cblxuXG5cblxuICAgICQoJy5qcy1zZWxlY3QtbXVsdGktbm90LWZvdW5kJykuc2VsZWN0Mih7XG4gICAgICAvL21pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eVxuICAgICAgZHJvcGRvd25Dc3NDbGFzczogW1xuICAgICAgICAnc2VsZWN0LWRyb3Bkb3duJyxcbiAgICAgICAgJ3NlbGVjdC1kcm9wZG93bi0tb3BlbmVkJyxcbiAgICAgICAgJ3NlbGVjdC1kcm9wZG93bi0tbm90LWZvdW5kLW11bHRpJ1xuICAgICAgXSxcbiAgICAgIFwibGFuZ3VhZ2VcIjoge1xuICAgICAgICBcIm5vUmVzdWx0c1wiOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgcmV0dXJuICfQndC40YfQtdCz0L4g0L3QtSDQvdCw0LnQtNC10L3Qvic7XG4gICAgICAgIH0sXG4gICAgICAgIHNlYXJjaGluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIFwi0JfQsNCz0YDRg9C30LrQsC4uLlwiO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvL3NlYXJjaElucHV0UGxhY2Vob2xkZXI6ICdNeSBjdXN0b20gcGxhY2Vob2xkZXIuLi4nXG4gICAgfSkub24oXCJzZWxlY3QyOmNsb3NpbmdcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pLm9uKFwic2VsZWN0MjpjbG9zZWRcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBsaXN0LnNlbGVjdDIoXCJvcGVuXCIpO1xuICAgIH0pO1xuXG4gICAgJCgnLmpzLXNlbGVjdC1tdWx0aS1ub3QtZm91bmQnKS5zZWxlY3QyKCdvcGVuJyk7XG4gICAgJCgnLnNlbGVjdC1kcm9wZG93bi0tbm90LWZvdW5kLW11bHRpIGlucHV0JykudmFsKCfRhNGL0LLQsNC/0LAnKTtcblxuICAgICQoJy5zZWxlY3QtZHJvcGRvd24tLW5vdC1mb3VuZC1tdWx0aSBpbnB1dCcpWzBdXG4gICAgICAmJiAkKCcuc2VsZWN0LWRyb3Bkb3duLS1ub3QtZm91bmQtbXVsdGkgaW5wdXQnKVswXS5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcblxuICB9KTtcblxuXG5cblxuXG5cblxuICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgIHdpbmRvdy5zY3JvbGxUbygwLDApO1xuICAgICQoJy5wcmVsb2FkZXInKS5oaWRlKCk7XG4gIH0sIDUwMClcbiAgLy8gJCgnI3lvdXItc2VsZWN0LWlkJykub25lKCdzZWxlY3QyOm9wZW4nLCBmdW5jdGlvbihlKSB7XG4gIC8vICAgJCgnaW5wdXQuc2VsZWN0Mi1zZWFyY2hfX2ZpZWxkJykucHJvcCgncGxhY2Vob2xkZXInLCAnZW50ZXIgdXNlcm5hbWUgb3IgY2l0eScpO1xuICAvLyB9KTtcbn0pKCk7XG4iXX0=
