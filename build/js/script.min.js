"use strict";!function(e){"function"==typeof define&&define.amd?define(["../widgets/datepicker"],e):e(jQuery.datepicker)}((function(e){return e.regional.ru={closeText:"Закрыть",prevText:"&#x3C;Пред",nextText:"След&#x3E;",currentText:"Сегодня",monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthNamesShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],dayNames:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],dayNamesShort:["вск","пнд","втр","срд","чтв","птн","сбт"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],weekHeader:"Нед",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.setDefaults(e.regional.ru),e.regional.ru})),$(".dropdown:not(.dropdown-opened").select2({minimumResultsForSearch:1/0,dropdownCssClass:["calendar-dropdown"]}),$(".dropdown-opened").select2({minimumResultsForSearch:1/0,dropdownCssClass:["calendar-dropdown","calendar-dropdown-permanent"]}).on("select2:closing",(function(e){e.preventDefault()})).on("select2:closed",(function(e){list.select2("open")})),$(".dropdown").on("select2:close",(function(){$(this).next().find(".select2-selection").blur()})),$(".dropdown + .select2 .select2-selection__rendered").attr("tabindex","-1"),$(".dropdown-opened").select2("open"),function(){var e={minimumResultsForSearch:1/0,dropdownCssClass:"calendar-dropdown"};$(".input-date").datepicker({dateFormat:"dd.mm.yy",showOtherMonths:!0,regional:"ru",monthNamesShort:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],changeMonth:!0,changeYear:!0,yearRange:"1900:+10",beforeShow:function(){setTimeout((function(){$(".ui-datepicker-month").select2(e),$(".ui-datepicker-year").select2(e)}),0)},onChangeMonthYear:function(){setTimeout((function(){$(".ui-datepicker-month").select2(e),$(".ui-datepicker-year").select2(e)}),0)}}),$(".input-date-trigger").datepicker({dateFormat:"dd.mm.yy",showOtherMonths:!0,regional:"ru",monthNamesShort:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],changeMonth:!0,changeYear:!0,yearRange:"1900:+10",onChangeMonthYear:function(){setTimeout((function(){$(".ui-datepicker-month").select2(e),$(".ui-datepicker-year").select2(e)}),0)},onSelect:function(){setTimeout((function(){$(".ui-datepicker-month").select2(e),$(".ui-datepicker-year").select2(e)}),0)}}),$(".input-date-trigger-single").datepicker({dateFormat:"dd.mm.yy",showOtherMonths:!0,regional:"ru",monthNamesShort:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],changeMonth:!0,changeYear:!0,yearRange:"1900:+10",onChangeMonthYear:function(){setTimeout((function(){$(".ui-datepicker-month").select2(e),$(".ui-datepicker-year").select2(e)}),0)},onSelect:function(){setTimeout((function(){$(".ui-datepicker-month").select2(e),$(".ui-datepicker-year").select2(e)}),0)}}),$(".input-date-trigger-range").datepicker({range:"period",dateFormat:"dd.mm.yy",showOtherMonths:!0,regional:"ru",monthNamesShort:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],changeMonth:!0,changeYear:!0,yearRange:"1900:+10",onChangeMonthYear:function(){setTimeout((function(){$(".ui-datepicker-month").select2(e),$(".ui-datepicker-year").select2(e)}),0)},onSelect:function(t,n){console.log(n),setTimeout((function(){$(".input-date-trigger-range").find(".ui-datepicker-month").select2(e),$(".input-date-trigger-range").find(".ui-datepicker-year").select2(e)}),100)},beforeShow:function(e,t){console.log(t)}});var t=moment(),n=t.format("DD"),o=t.format("MM"),s=t.format("YYYY"),c="",a=[],r="";c="15"!==n?"15."+o+"."+s:"17."+o+"."+s,r="13"!==n?"13":"12",a=n>15?["02."+o+"."+s,"11."+o+"."+s]:["17."+o+"."+s,"26."+o+"."+s],$(".input-date-trigger").datepicker("setDate",c),$(".input-date-trigger-single").datepicker("setDate",c),$(".input-date-trigger-range").datepicker("setDate",a),$(".input-date-trigger-single .ui-datepicker-calendar td a").each((function(){$(this).text()===r&&$(this).addClass("hovered")})),$(".ui-datepicker-month").select2(e),$(".ui-datepicker-year").select2(e),$(".input-date").datepicker("refresh"),$(".input-date").inputmask("99.99.9999",{placeholder:"",showMaskOnHover:!1,showMaskOnFocus:!1,jitMasking:!0}),$(".input-date").on("focus",(function(e){var t=$(e.target);0===t.val().length&&t.parent().addClass("date-placeholder")})),$(".input-date").on("blur",(function(e){var t=$(e.target);t.val();t.parent().removeClass("date-placeholder")})),$(".input-date").on("input",(function(e){var t=$(e.target);t.val().length>0?t.parent().removeClass("date-placeholder"):t.parent().addClass("date-placeholder"),moment($(this).val(),"DD.MM.YYYY",!0).isValid()&&($(this).datepicker("hide"),$(this).datepicker("show"))})),$("#calendar-dropdown-month").select2({minimumResultsForSearch:1/0,dropdownCssClass:["calendar-dropdown","calendar-dropdown-permanent"],closeOnSelect:!1}).on("select2:closing",(function(e){e.preventDefault()})).on("select2:closed",(function(e){list.select2("open")})),$("#calendar-dropdown-month").select2("open"),$("#calendar-dropdown-year").select2({minimumResultsForSearch:1/0,dropdownCssClass:["calendar-dropdown","calendar-dropdown-permanent"],closeOnSelect:!1}).on("select2:closing",(function(e){e.preventDefault()})).on("select2:closed",(function(e){list.select2("open")})),$("#calendar-dropdown-year").select2("open")}(),$(".input-password-btn").on("click",(function(){var e=$(this),t=e.prev();e.toggleClass("shown"),e.hasClass("shown")?t.attr("type","text"):t.attr("type","password")})),$(".input-phone").inputmask("+7(999) 999-99-99"),function(){var e=document.querySelector(".scroll-to-top"),t=document.querySelector(".header");if(e){var n=function(){return t.getBoundingClientRect().height+50},o=window.pageYOffset>n(),s=function(){!e.classList.contains("active")&&e.classList.add("active")};o&&s(),document.addEventListener("scroll",(function(){!o&&window.pageYOffset>n()&&(s(),o=!0),o&&window.pageYOffset<n()&&(e.classList.contains("active")&&e.classList.remove("active"),o=!1)})),e.addEventListener("click",(function(e){e.preventDefault(),t.scrollIntoView({block:"start",behavior:"smooth"})}))}}(),function(){var e=function(e){e.target.value.length>0?$(e.target).addClass("inputed"):$(e.target).removeClass("inputed")};$(document).ready((function(){$(".js-select-combo").select2({placeholder:"Введите или выберите вариант",dropdownCssClass:"select-dropdown",language:{noResults:function(){return"Ничего не найдено"},searching:function(){return"Загрузка..."}}}),$(".js-select-combo").on("select2:open",(function(){$(".select2-search input").off("input",e),$(".select2-search input").on("input",e)})),$(".js-select-combo").on("select2:closing",(function(){$(".select2-search input").removeClass("inputed")})),$(".js-select-combo-open").select2({placeholder:"Введите или выберите вариант",dropdownCssClass:["select-dropdown","select-dropdown-multi","select-dropdown--opened"],language:{noResults:function(){return"Ничего не найдено"},searching:function(){return"Загрузка..."}}}).on("select2:closing",(function(e){e.preventDefault()})).on("select2:closed",(function(e){n.select2("open")})),$(".js-select-combo-open").select2("open"),$(".select-dropdown-multi input").on("input",e),$(".js-select-combo-searching").select2({placeholder:"Введите или выберите вариант",dropdownCssClass:["select-dropdown","select-dropdown--opened","select-dropdown--searching"],language:{noResults:function(){return"Ничего не найдено"},searching:function(){return"Загрузка..."}},ajax:{delay:5e8,url:"https://antibreez.github.io/select-data/select-data.json"}}).on("select2:closing",(function(e){e.preventDefault()})).on("select2:closed",(function(e){n.select2("open")}));var t=new Event("input",{bubbles:!0,cancelable:!0});$(".js-select-combo-searching").select2("open"),setTimeout((function(){$(".select-dropdown--searching input")[0].dispatchEvent(t)}),500),$(".js-select-combo-not-found").select2({dropdownCssClass:["select-dropdown","select-dropdown--opened","select-dropdown--not-found"],language:{noResults:function(){return"Ничего не найдено"},searching:function(){return"Загрузка..."}}}).on("select2:closing",(function(e){e.preventDefault()})).on("select2:closed",(function(e){n.select2("open")})),$(".js-select-combo-not-found").select2("open"),$(".select-dropdown--not-found input").val("фывапа"),$(".select-dropdown--not-found input")[0].dispatchEvent(t),$(".js-select-single").select2({placeholder:"Выберите вариант",minimumResultsForSearch:1/0,dropdownCssClass:["select-dropdown","select-dropdown--single"]});var n=$(".js-select-single-open").select2({placeholder:"Выберите вариант",minimumResultsForSearch:1/0,dropdownCssClass:["select-dropdown","select-dropdown--single","select-dropdown--opened"],closeOnSelect:!1}).on("select2:closing",(function(e){e.preventDefault()})).on("select2:closed",(function(e){n.select2("open")}));n.select2("open")}))}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyIsImRhdGVwaWNrZXItcnUuanMiLCJkcm9wZG93bi5qcyIsImlucHV0LWRhdGUuanMiLCJpbnB1dC5qcyIsInBob25lLW1hc2suanMiLCJzY3JvbGwuanMiLCJmb3Jtcy5qcyJdLCJuYW1lcyI6WyJmYWN0b3J5IiwiZGVmaW5lIiwiYW1kIiwialF1ZXJ5IiwiZGF0ZXBpY2tlciIsInJlZ2lvbmFsIiwicnUiLCJjbG9zZVRleHQiLCJwcmV2VGV4dCIsIm5leHRUZXh0IiwiY3VycmVudFRleHQiLCJtb250aE5hbWVzIiwibW9udGhOYW1lc1Nob3J0IiwiZGF5TmFtZXMiLCJkYXlOYW1lc1Nob3J0IiwiZGF5TmFtZXNNaW4iLCJ3ZWVrSGVhZGVyIiwiZGF0ZUZvcm1hdCIsImZpcnN0RGF5IiwiaXNSVEwiLCJzaG93TW9udGhBZnRlclllYXIiLCJ5ZWFyU3VmZml4Iiwic2V0RGVmYXVsdHMiLCIkIiwic2VsZWN0MiIsIm1pbmltdW1SZXN1bHRzRm9yU2VhcmNoIiwiSW5maW5pdHkiLCJkcm9wZG93bkNzc0NsYXNzIiwib24iLCJlIiwicHJldmVudERlZmF1bHQiLCJsaXN0IiwidGhpcyIsIm5leHQiLCJmaW5kIiwiYmx1ciIsImF0dHIiLCJzZWxlY3RPcHQiLCJzaG93T3RoZXJNb250aHMiLCJjaGFuZ2VNb250aCIsImNoYW5nZVllYXIiLCJ5ZWFyUmFuZ2UiLCJiZWZvcmVTaG93Iiwic2V0VGltZW91dCIsIm9uQ2hhbmdlTW9udGhZZWFyIiwib25TZWxlY3QiLCJyYW5nZSIsImlucHV0IiwiaW5zdCIsImNvbnNvbGUiLCJsb2ciLCJjdXJyZW50IiwibW9tZW50IiwiZGF5IiwiZm9ybWF0IiwibW9udGgiLCJ5ZWFyIiwicGlja2VkRGF0ZSIsInBpY2tlZFBlcmlvZCIsImhvdmVyRGF0ZSIsImVhY2giLCJ0ZXh0IiwiYWRkQ2xhc3MiLCJpbnB1dG1hc2siLCJwbGFjZWhvbGRlciIsInNob3dNYXNrT25Ib3ZlciIsInNob3dNYXNrT25Gb2N1cyIsImppdE1hc2tpbmciLCJ0YXJnZXQiLCJ2YWwiLCJsZW5ndGgiLCJwYXJlbnQiLCJyZW1vdmVDbGFzcyIsImlzVmFsaWQiLCJjbG9zZU9uU2VsZWN0IiwiJGJ0biIsIiRpbnB1dCIsInByZXYiLCJ0b2dnbGVDbGFzcyIsImhhc0NsYXNzIiwic2Nyb2xsQnRuIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaGVhZGVyIiwiZ2V0SGVhZGVySGVpZ2h0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiaGVpZ2h0IiwiaXNTY3JvbGxlZCIsIndpbmRvdyIsInBhZ2VZT2Zmc2V0Iiwic2hvd0J0biIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZSIsInNjcm9sbEludG9WaWV3IiwiYmxvY2siLCJiZWhhdmlvciIsImNoZWNrSW5wdXQiLCJ2YWx1ZSIsInJlYWR5IiwibGFuZ3VhZ2UiLCJub1Jlc3VsdHMiLCJzZWFyY2hpbmciLCJvZmYiLCJhamF4IiwiZGVsYXkiLCJ1cmwiLCJldmVudCIsIkV2ZW50IiwiYnViYmxlcyIsImNhbmNlbGFibGUiLCJkaXNwYXRjaEV2ZW50Il0sIm1hcHBpbmdzIjoiQUFBQSxjQ0VBLFNBQUFBLEdBQ0EsbUJBQUFDLFFBQUFBLE9BQUFDLElBR0FELE9BQUEsQ0FBQSx5QkFBQUQsR0FJQUEsRUFBQUcsT0FBQUMsWUFSQSxFQVVBLFNBQUFBLEdBc0JBLE9BcEJBQSxFQUFBQyxTQUFBQyxHQUFBLENBQ0FDLFVBQUEsVUFDQUMsU0FBQSxhQUNBQyxTQUFBLGFBQ0FDLFlBQUEsVUFDQUMsV0FBQSxDQUFBLFNBQUEsVUFBQSxPQUFBLFNBQUEsTUFBQSxPQUNBLE9BQUEsU0FBQSxXQUFBLFVBQUEsU0FBQSxXQUNBQyxnQkFBQSxDQUFBLE1BQUEsTUFBQSxNQUFBLE1BQUEsTUFBQSxNQUNBLE1BQUEsTUFBQSxNQUFBLE1BQUEsTUFBQSxPQUNBQyxTQUFBLENBQUEsY0FBQSxjQUFBLFVBQUEsUUFBQSxVQUFBLFVBQUEsV0FDQUMsY0FB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SUFBQUksRUFBQVIsRUFBQSwwQkFBQUMsUUFBQSxDQUNBd0MsWUFBQSxtQkFDQXZDLHdCQUFBQyxFQUFBQSxFQUNBQyxpQkFBQSxDQUNBLGtCQUNBLDBCQUNBLDJCQUVBK0MsZUFBQSxJQUNBOUMsR0FBQSxtQkFBQSxTQUFBQyxHQUNBQSxFQUFBQyxvQkFDQUYsR0FBQSxrQkFBQSxTQUFBQyxHQUNBRSxFQUFBUCxRQUFBLFdBR0FPLEVBQUFQLFFBQUEsV0F0S0EiLCJmaWxlIjoic2NyaXB0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG4vKiBSdXNzaWFuIChVVEYtOCkgaW5pdGlhbGlzYXRpb24gZm9yIHRoZSBqUXVlcnkgVUkgZGF0ZSBwaWNrZXIgcGx1Z2luLiAqL1xuXG4vKiBXcml0dGVuIGJ5IEFuZHJldyBTdHJvbW5vdiAoc3Ryb21ub3ZAZ21haWwuY29tKS4gKi9cbihmdW5jdGlvbiAoZmFjdG9yeSkge1xuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXG4gICAgZGVmaW5lKFtcIi4uL3dpZGdldHMvZGF0ZXBpY2tlclwiXSwgZmFjdG9yeSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gQnJvd3NlciBnbG9iYWxzXG4gICAgZmFjdG9yeShqUXVlcnkuZGF0ZXBpY2tlcik7XG4gIH1cbn0pKGZ1bmN0aW9uIChkYXRlcGlja2VyKSB7XG4gIGRhdGVwaWNrZXIucmVnaW9uYWwucnUgPSB7XG4gICAgY2xvc2VUZXh0OiBcItCX0LDQutGA0YvRgtGMXCIsXG4gICAgcHJldlRleHQ6IFwiJiN4M0M70J/RgNC10LRcIixcbiAgICBuZXh0VGV4dDogXCLQodC70LXQtCYjeDNFO1wiLFxuICAgIGN1cnJlbnRUZXh0OiBcItCh0LXQs9C+0LTQvdGPXCIsXG4gICAgbW9udGhOYW1lczogW1wi0K/QvdCy0LDRgNGMXCIsIFwi0KTQtdCy0YDQsNC70YxcIiwgXCLQnNCw0YDRglwiLCBcItCQ0L/RgNC10LvRjFwiLCBcItCc0LDQuVwiLCBcItCY0Y7QvdGMXCIsIFwi0JjRjtC70YxcIiwgXCLQkNCy0LPRg9GB0YJcIiwgXCLQodC10L3RgtGP0LHRgNGMXCIsIFwi0J7QutGC0Y/QsdGA0YxcIiwgXCLQndC+0Y/QsdGA0YxcIiwgXCLQlNC10LrQsNCx0YDRjFwiXSxcbiAgICBtb250aE5hbWVzU2hvcnQ6IFtcItCv0L3QslwiLCBcItCk0LXQslwiLCBcItCc0LDRgFwiLCBcItCQ0L/RgFwiLCBcItCc0LDQuVwiLCBcItCY0Y7QvVwiLCBcItCY0Y7Qu1wiLCBcItCQ0LLQs1wiLCBcItCh0LXQvVwiLCBcItCe0LrRglwiLCBcItCd0L7Rj1wiLCBcItCU0LXQulwiXSxcbiAgICBkYXlOYW1lczogW1wi0LLQvtGB0LrRgNC10YHQtdC90YzQtVwiLCBcItC/0L7QvdC10LTQtdC70YzQvdC40LpcIiwgXCLQstGC0L7RgNC90LjQulwiLCBcItGB0YDQtdC00LBcIiwgXCLRh9C10YLQstC10YDQs1wiLCBcItC/0Y/RgtC90LjRhtCwXCIsIFwi0YHRg9Cx0LHQvtGC0LBcIl0sXG4gICAgZGF5TmFtZXNTaG9ydDogW1wi0LLRgdC6XCIsIFwi0L/QvdC0XCIsIFwi0LLRgtGAXCIsIFwi0YHRgNC0XCIsIFwi0YfRgtCyXCIsIFwi0L/RgtC9XCIsIFwi0YHQsdGCXCJdLFxuICAgIGRheU5hbWVzTWluOiBbXCLQktGBXCIsIFwi0J/QvVwiLCBcItCS0YJcIiwgXCLQodGAXCIsIFwi0KfRglwiLCBcItCf0YJcIiwgXCLQodCxXCJdLFxuICAgIHdlZWtIZWFkZXI6IFwi0J3QtdC0XCIsXG4gICAgZGF0ZUZvcm1hdDogXCJkZC5tbS55eVwiLFxuICAgIGZpcnN0RGF5OiAxLFxuICAgIGlzUlRMOiBmYWxzZSxcbiAgICBzaG93TW9udGhBZnRlclllYXI6IGZhbHNlLFxuICAgIHllYXJTdWZmaXg6IFwiXCJcbiAgfTtcbiAgZGF0ZXBpY2tlci5zZXREZWZhdWx0cyhkYXRlcGlja2VyLnJlZ2lvbmFsLnJ1KTtcbiAgcmV0dXJuIGRhdGVwaWNrZXIucmVnaW9uYWwucnU7XG59KTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgJCgnLmRyb3Bkb3duOm5vdCguZHJvcGRvd24tb3BlbmVkJykuc2VsZWN0Mih7XG4gICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5LFxuICAgIGRyb3Bkb3duQ3NzQ2xhc3M6IFsnY2FsZW5kYXItZHJvcGRvd24nXVxuICB9KTtcbiAgJCgnLmRyb3Bkb3duLW9wZW5lZCcpLnNlbGVjdDIoe1xuICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcbiAgICBkcm9wZG93bkNzc0NsYXNzOiBbJ2NhbGVuZGFyLWRyb3Bkb3duJywgJ2NhbGVuZGFyLWRyb3Bkb3duLXBlcm1hbmVudCddXG4gIH0pLm9uKFwic2VsZWN0MjpjbG9zaW5nXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9KS5vbihcInNlbGVjdDI6Y2xvc2VkXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgbGlzdC5zZWxlY3QyKFwib3BlblwiKTtcbiAgfSk7XG4gICQoJy5kcm9wZG93bicpLm9uKCdzZWxlY3QyOmNsb3NlJywgZnVuY3Rpb24gKCkge1xuICAgICQodGhpcykubmV4dCgpLmZpbmQoJy5zZWxlY3QyLXNlbGVjdGlvbicpLmJsdXIoKTtcbiAgfSk7XG4gICQoJy5kcm9wZG93biArIC5zZWxlY3QyIC5zZWxlY3QyLXNlbGVjdGlvbl9fcmVuZGVyZWQnKS5hdHRyKCd0YWJpbmRleCcsICctMScpO1xuICAkKCcuZHJvcGRvd24tb3BlbmVkJykuc2VsZWN0Mignb3BlbicpO1xufSkoKTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIHNlbGVjdE9wdCA9IHtcbiAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHksXG4gICAgZHJvcGRvd25Dc3NDbGFzczogJ2NhbGVuZGFyLWRyb3Bkb3duJ1xuICB9O1xuICAkKCcuaW5wdXQtZGF0ZScpLmRhdGVwaWNrZXIoe1xuICAgIGRhdGVGb3JtYXQ6ICdkZC5tbS55eScsXG4gICAgc2hvd090aGVyTW9udGhzOiB0cnVlLFxuICAgIHJlZ2lvbmFsOiAncnUnLFxuICAgIG1vbnRoTmFtZXNTaG9ydDogW1wi0K/QvdCy0LDRgNGMXCIsIFwi0KTQtdCy0YDQsNC70YxcIiwgXCLQnNCw0YDRglwiLCBcItCQ0L/RgNC10LvRjFwiLCBcItCc0LDQuVwiLCBcItCY0Y7QvdGMXCIsIFwi0JjRjtC70YxcIiwgXCLQkNCy0LPRg9GB0YJcIiwgXCLQodC10L3RgtGP0LHRgNGMXCIsIFwi0J7QutGC0Y/QsdGA0YxcIiwgXCLQndC+0Y/QsdGA0YxcIiwgXCLQlNC10LrQsNCx0YDRjFwiXSxcbiAgICBjaGFuZ2VNb250aDogdHJ1ZSxcbiAgICBjaGFuZ2VZZWFyOiB0cnVlLFxuICAgIHllYXJSYW5nZTogJzE5MDA6KzEwJyxcbiAgICBiZWZvcmVTaG93OiBmdW5jdGlvbiBiZWZvcmVTaG93KCkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy51aS1kYXRlcGlja2VyLW1vbnRoJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgICAkKCcudWktZGF0ZXBpY2tlci15ZWFyJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgfSwgMCk7XG4gICAgfSxcbiAgICBvbkNoYW5nZU1vbnRoWWVhcjogZnVuY3Rpb24gb25DaGFuZ2VNb250aFllYXIoKSB7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXItbW9udGgnKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICAgICAgICQoJy51aS1kYXRlcGlja2VyLXllYXInKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICAgICB9LCAwKTtcbiAgICB9XG4gIH0pO1xuICAkKCcuaW5wdXQtZGF0ZS10cmlnZ2VyJykuZGF0ZXBpY2tlcih7XG4gICAgZGF0ZUZvcm1hdDogJ2RkLm1tLnl5JyxcbiAgICBzaG93T3RoZXJNb250aHM6IHRydWUsXG4gICAgcmVnaW9uYWw6ICdydScsXG4gICAgbW9udGhOYW1lc1Nob3J0OiBbXCLQr9C90LLQsNGA0YxcIiwgXCLQpNC10LLRgNCw0LvRjFwiLCBcItCc0LDRgNGCXCIsIFwi0JDQv9GA0LXQu9GMXCIsIFwi0JzQsNC5XCIsIFwi0JjRjtC90YxcIiwgXCLQmNGO0LvRjFwiLCBcItCQ0LLQs9GD0YHRglwiLCBcItCh0LXQvdGC0Y/QsdGA0YxcIiwgXCLQntC60YLRj9Cx0YDRjFwiLCBcItCd0L7Rj9Cx0YDRjFwiLCBcItCU0LXQutCw0LHRgNGMXCJdLFxuICAgIGNoYW5nZU1vbnRoOiB0cnVlLFxuICAgIGNoYW5nZVllYXI6IHRydWUsXG4gICAgeWVhclJhbmdlOiAnMTkwMDorMTAnLFxuICAgIG9uQ2hhbmdlTW9udGhZZWFyOiBmdW5jdGlvbiBvbkNoYW5nZU1vbnRoWWVhcigpIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcudWktZGF0ZXBpY2tlci1tb250aCcpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXIteWVhcicpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgIH0sIDApO1xuICAgIH0sXG4gICAgb25TZWxlY3Q6IGZ1bmN0aW9uIG9uU2VsZWN0KCkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy51aS1kYXRlcGlja2VyLW1vbnRoJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgICAkKCcudWktZGF0ZXBpY2tlci15ZWFyJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgfSwgMCk7XG4gICAgfVxuICB9KTtcbiAgJCgnLmlucHV0LWRhdGUtdHJpZ2dlci1zaW5nbGUnKS5kYXRlcGlja2VyKHtcbiAgICBkYXRlRm9ybWF0OiAnZGQubW0ueXknLFxuICAgIHNob3dPdGhlck1vbnRoczogdHJ1ZSxcbiAgICByZWdpb25hbDogJ3J1JyxcbiAgICBtb250aE5hbWVzU2hvcnQ6IFtcItCv0L3QstCw0YDRjFwiLCBcItCk0LXQstGA0LDQu9GMXCIsIFwi0JzQsNGA0YJcIiwgXCLQkNC/0YDQtdC70YxcIiwgXCLQnNCw0LlcIiwgXCLQmNGO0L3RjFwiLCBcItCY0Y7Qu9GMXCIsIFwi0JDQstCz0YPRgdGCXCIsIFwi0KHQtdC90YLRj9Cx0YDRjFwiLCBcItCe0LrRgtGP0LHRgNGMXCIsIFwi0J3QvtGP0LHRgNGMXCIsIFwi0JTQtdC60LDQsdGA0YxcIl0sXG4gICAgY2hhbmdlTW9udGg6IHRydWUsXG4gICAgY2hhbmdlWWVhcjogdHJ1ZSxcbiAgICB5ZWFyUmFuZ2U6ICcxOTAwOisxMCcsXG4gICAgb25DaGFuZ2VNb250aFllYXI6IGZ1bmN0aW9uIG9uQ2hhbmdlTW9udGhZZWFyKCkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy51aS1kYXRlcGlja2VyLW1vbnRoJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgICAkKCcudWktZGF0ZXBpY2tlci15ZWFyJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgfSwgMCk7XG4gICAgfSxcbiAgICBvblNlbGVjdDogZnVuY3Rpb24gb25TZWxlY3QoKSB7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXItbW9udGgnKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICAgICAgICQoJy51aS1kYXRlcGlja2VyLXllYXInKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICAgICB9LCAwKTtcbiAgICB9XG4gIH0pO1xuICAkKCcuaW5wdXQtZGF0ZS10cmlnZ2VyLXJhbmdlJykuZGF0ZXBpY2tlcih7XG4gICAgcmFuZ2U6ICdwZXJpb2QnLFxuICAgIGRhdGVGb3JtYXQ6ICdkZC5tbS55eScsXG4gICAgc2hvd090aGVyTW9udGhzOiB0cnVlLFxuICAgIHJlZ2lvbmFsOiAncnUnLFxuICAgIG1vbnRoTmFtZXNTaG9ydDogW1wi0K/QvdCy0LDRgNGMXCIsIFwi0KTQtdCy0YDQsNC70YxcIiwgXCLQnNCw0YDRglwiLCBcItCQ0L/RgNC10LvRjFwiLCBcItCc0LDQuVwiLCBcItCY0Y7QvdGMXCIsIFwi0JjRjtC70YxcIiwgXCLQkNCy0LPRg9GB0YJcIiwgXCLQodC10L3RgtGP0LHRgNGMXCIsIFwi0J7QutGC0Y/QsdGA0YxcIiwgXCLQndC+0Y/QsdGA0YxcIiwgXCLQlNC10LrQsNCx0YDRjFwiXSxcbiAgICBjaGFuZ2VNb250aDogdHJ1ZSxcbiAgICBjaGFuZ2VZZWFyOiB0cnVlLFxuICAgIHllYXJSYW5nZTogJzE5MDA6KzEwJyxcbiAgICBvbkNoYW5nZU1vbnRoWWVhcjogZnVuY3Rpb24gb25DaGFuZ2VNb250aFllYXIoKSB7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXItbW9udGgnKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICAgICAgICQoJy51aS1kYXRlcGlja2VyLXllYXInKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICAgICB9LCAwKTtcbiAgICB9LFxuICAgIG9uU2VsZWN0OiBmdW5jdGlvbiBvblNlbGVjdChpbnB1dCwgaW5zdCkge1xuICAgICAgY29uc29sZS5sb2coaW5zdCk7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLmlucHV0LWRhdGUtdHJpZ2dlci1yYW5nZScpLmZpbmQoJy51aS1kYXRlcGlja2VyLW1vbnRoJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgICAkKCcuaW5wdXQtZGF0ZS10cmlnZ2VyLXJhbmdlJykuZmluZCgnLnVpLWRhdGVwaWNrZXIteWVhcicpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgIH0sIDEwMCk7XG4gICAgfSxcbiAgICBiZWZvcmVTaG93OiBmdW5jdGlvbiBiZWZvcmVTaG93KGlucHV0LCBpbnN0KSB7XG4gICAgICBjb25zb2xlLmxvZyhpbnN0KTtcbiAgICB9XG4gIH0pO1xuICB2YXIgY3VycmVudCA9IG1vbWVudCgpO1xuICB2YXIgZGF5ID0gY3VycmVudC5mb3JtYXQoJ0REJyk7XG4gIHZhciBtb250aCA9IGN1cnJlbnQuZm9ybWF0KCdNTScpO1xuICB2YXIgeWVhciA9IGN1cnJlbnQuZm9ybWF0KCdZWVlZJyk7XG4gIHZhciBwaWNrZWREYXRlID0gJyc7XG4gIHZhciBwaWNrZWRQZXJpb2QgPSBbXTtcbiAgdmFyIGhvdmVyRGF0ZSA9ICcnO1xuXG4gIGlmIChkYXkgIT09ICcxNScpIHtcbiAgICBwaWNrZWREYXRlID0gMTUgKyAnLicgKyBtb250aCArICcuJyArIHllYXI7XG4gIH0gZWxzZSB7XG4gICAgcGlja2VkRGF0ZSA9IDE3ICsgJy4nICsgbW9udGggKyAnLicgKyB5ZWFyO1xuICB9XG5cbiAgaWYgKGRheSAhPT0gJzEzJykge1xuICAgIGhvdmVyRGF0ZSA9ICcxMyc7XG4gIH0gZWxzZSB7XG4gICAgaG92ZXJEYXRlID0gJzEyJztcbiAgfVxuXG4gIGRheSA+IDE1ID8gcGlja2VkUGVyaW9kID0gWycwMi4nICsgbW9udGggKyAnLicgKyB5ZWFyLCAnMTEuJyArIG1vbnRoICsgJy4nICsgeWVhcl0gOiBwaWNrZWRQZXJpb2QgPSBbJzE3LicgKyBtb250aCArICcuJyArIHllYXIsICcyNi4nICsgbW9udGggKyAnLicgKyB5ZWFyXTtcbiAgJCgnLmlucHV0LWRhdGUtdHJpZ2dlcicpLmRhdGVwaWNrZXIoJ3NldERhdGUnLCBwaWNrZWREYXRlKTtcbiAgJCgnLmlucHV0LWRhdGUtdHJpZ2dlci1zaW5nbGUnKS5kYXRlcGlja2VyKCdzZXREYXRlJywgcGlja2VkRGF0ZSk7XG4gICQoJy5pbnB1dC1kYXRlLXRyaWdnZXItcmFuZ2UnKS5kYXRlcGlja2VyKCdzZXREYXRlJywgcGlja2VkUGVyaW9kKTtcbiAgJCgnLmlucHV0LWRhdGUtdHJpZ2dlci1zaW5nbGUgLnVpLWRhdGVwaWNrZXItY2FsZW5kYXIgdGQgYScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgIGlmICgkKHRoaXMpLnRleHQoKSA9PT0gaG92ZXJEYXRlKSB7XG4gICAgICAkKHRoaXMpLmFkZENsYXNzKCdob3ZlcmVkJyk7XG4gICAgfVxuICB9KTtcbiAgJCgnLnVpLWRhdGVwaWNrZXItbW9udGgnKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICQoJy51aS1kYXRlcGlja2VyLXllYXInKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICQoJy5pbnB1dC1kYXRlJykuZGF0ZXBpY2tlcigncmVmcmVzaCcpO1xuICAkKCcuaW5wdXQtZGF0ZScpLmlucHV0bWFzayhcIjk5Ljk5Ljk5OTlcIiwge1xuICAgIC8vbWFzazogJ21tL2RkL3l5eXknLFxuICAgIHBsYWNlaG9sZGVyOiAnJyxcbiAgICBzaG93TWFza09uSG92ZXI6IGZhbHNlLFxuICAgIHNob3dNYXNrT25Gb2N1czogZmFsc2UsXG4gICAgaml0TWFza2luZzogdHJ1ZVxuICB9KTtcbiAgJCgnLmlucHV0LWRhdGUnKS5vbignZm9jdXMnLCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciB0YXJnZXQgPSAkKGUudGFyZ2V0KTtcbiAgICB2YXIgdmFsID0gdGFyZ2V0LnZhbCgpO1xuXG4gICAgaWYgKHZhbC5sZW5ndGggPT09IDApIHtcbiAgICAgIHRhcmdldC5wYXJlbnQoKS5hZGRDbGFzcygnZGF0ZS1wbGFjZWhvbGRlcicpO1xuICAgIH1cbiAgfSk7XG4gICQoJy5pbnB1dC1kYXRlJykub24oJ2JsdXInLCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciB0YXJnZXQgPSAkKGUudGFyZ2V0KTtcbiAgICB2YXIgdmFsID0gdGFyZ2V0LnZhbCgpO1xuICAgIHRhcmdldC5wYXJlbnQoKS5yZW1vdmVDbGFzcygnZGF0ZS1wbGFjZWhvbGRlcicpO1xuICB9KTtcbiAgJCgnLmlucHV0LWRhdGUnKS5vbignaW5wdXQnLCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciB0YXJnZXQgPSAkKGUudGFyZ2V0KTtcbiAgICB2YXIgdmFsID0gdGFyZ2V0LnZhbCgpO1xuXG4gICAgaWYgKHZhbC5sZW5ndGggPiAwKSB7XG4gICAgICB0YXJnZXQucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ2RhdGUtcGxhY2Vob2xkZXInKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGFyZ2V0LnBhcmVudCgpLmFkZENsYXNzKCdkYXRlLXBsYWNlaG9sZGVyJyk7XG4gICAgfVxuXG4gICAgdmFyIGlzVmFsaWQgPSBtb21lbnQoJCh0aGlzKS52YWwoKSwgJ0RELk1NLllZWVknLCB0cnVlKS5pc1ZhbGlkKCk7XG5cbiAgICBpZiAoaXNWYWxpZCkge1xuICAgICAgJCh0aGlzKS5kYXRlcGlja2VyKCdoaWRlJyk7XG4gICAgICAkKHRoaXMpLmRhdGVwaWNrZXIoJ3Nob3cnKTtcbiAgICB9XG4gIH0pOyAvLyAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgLy8gICBmdW5jdGlvbiBmMSgpIHtcbiAgLy8gICAgICQoJy5pbnB1dC1kYXRlJykuZGF0ZXBpY2tlcigncmVmcmVzaCcpO1xuICAvLyAgIH07XG4gIC8vICAgZnVuY3Rpb24gZjIoKSB7XG4gIC8vICAgICBjb25zb2xlLmxvZygkKCcudWktZGF0ZXBpY2tlci1tb250aCcpWzBdKTtcbiAgLy8gICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gIC8vICAgICAgICQoJy51aS1kYXRlcGlja2VyLW1vbnRoJykuc2VsZWN0MigpO1xuICAvLyAgICAgfSwgNTAwMCk7XG4gIC8vICAgICAvLyQoJy51aS1kYXRlcGlja2VyLW1vbnRoJykuc2VsZWN0MigpO1xuICAvLyAgIH07XG4gIC8vICAgdmFyIGRmZCA9ICQuRGVmZXJyZWQoKTtcbiAgLy8gICBkZmQuZG9uZShmMSkuZG9uZShmMik7XG4gIC8vICAgZGZkLnJlc29sdmUoJ2EnKTtcbiAgLy8gfSk7XG5cbiAgJCgnI2NhbGVuZGFyLWRyb3Bkb3duLW1vbnRoJykuc2VsZWN0Mih7XG4gICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5LFxuICAgIGRyb3Bkb3duQ3NzQ2xhc3M6IFsnY2FsZW5kYXItZHJvcGRvd24nLCAnY2FsZW5kYXItZHJvcGRvd24tcGVybWFuZW50J10sXG4gICAgY2xvc2VPblNlbGVjdDogZmFsc2VcbiAgfSkub24oXCJzZWxlY3QyOmNsb3NpbmdcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIH0pLm9uKFwic2VsZWN0MjpjbG9zZWRcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICBsaXN0LnNlbGVjdDIoXCJvcGVuXCIpO1xuICB9KTtcbiAgJCgnI2NhbGVuZGFyLWRyb3Bkb3duLW1vbnRoJykuc2VsZWN0Mignb3BlbicpO1xuICAkKCcjY2FsZW5kYXItZHJvcGRvd24teWVhcicpLnNlbGVjdDIoe1xuICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcbiAgICBkcm9wZG93bkNzc0NsYXNzOiBbJ2NhbGVuZGFyLWRyb3Bkb3duJywgJ2NhbGVuZGFyLWRyb3Bkb3duLXBlcm1hbmVudCddLFxuICAgIGNsb3NlT25TZWxlY3Q6IGZhbHNlXG4gIH0pLm9uKFwic2VsZWN0MjpjbG9zaW5nXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9KS5vbihcInNlbGVjdDI6Y2xvc2VkXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgbGlzdC5zZWxlY3QyKFwib3BlblwiKTtcbiAgfSk7XG4gICQoJyNjYWxlbmRhci1kcm9wZG93bi15ZWFyJykuc2VsZWN0Mignb3BlbicpO1xufSkoKTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgJCgnLmlucHV0LXBhc3N3b3JkLWJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgJGJ0biA9ICQodGhpcyk7XG4gICAgdmFyICRpbnB1dCA9ICRidG4ucHJldigpO1xuICAgICRidG4udG9nZ2xlQ2xhc3MoJ3Nob3duJyk7XG5cbiAgICBpZiAoJGJ0bi5oYXNDbGFzcygnc2hvd24nKSkge1xuICAgICAgJGlucHV0LmF0dHIoJ3R5cGUnLCAndGV4dCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkaW5wdXQuYXR0cigndHlwZScsICdwYXNzd29yZCcpO1xuICAgIH1cbiAgfSk7XG59KSgpO1xuXG4oZnVuY3Rpb24gKCkge1xuICAvLyBjb25zdCBpbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaW5wdXQtcGhvbmUnKTtcbiAgLy8gaWYgKCFpbnB1dHNbMF0pIHtcbiAgLy8gICByZXR1cm47XG4gIC8vIH1cbiAgLy8gY29uc3QgaW0gPSBuZXcgSW5wdXRtYXNrKFwiKzcoOTk5KSA5OTktOTktOTlcIik7XG4gIC8vIGlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgLy8gICBpbS5tYXNrKGl0ZW0pO1xuICAvLyB9KVxuICAkKCcuaW5wdXQtcGhvbmUnKS5pbnB1dG1hc2soJys3KDk5OSkgOTk5LTk5LTk5Jyk7XG59KSgpO1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgc2Nyb2xsQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNjcm9sbC10by10b3AnKTtcbiAgdmFyIGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXInKTtcblxuICBpZiAoIXNjcm9sbEJ0bikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBnZXRIZWFkZXJIZWlnaHQgPSBmdW5jdGlvbiBnZXRIZWFkZXJIZWlnaHQoKSB7XG4gICAgcmV0dXJuIGhlYWRlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgKyA1MDtcbiAgfTtcblxuICB2YXIgaXNTY3JvbGxlZCA9IHdpbmRvdy5wYWdlWU9mZnNldCA+IGdldEhlYWRlckhlaWdodCgpO1xuXG4gIHZhciBzaG93QnRuID0gZnVuY3Rpb24gc2hvd0J0bigpIHtcbiAgICAhc2Nyb2xsQnRuLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykgJiYgc2Nyb2xsQnRuLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICB9O1xuXG4gIHZhciBoaWRlSGVhZGVyID0gZnVuY3Rpb24gaGlkZUhlYWRlcigpIHtcbiAgICBzY3JvbGxCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSAmJiBzY3JvbGxCdG4uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gIH07XG5cbiAgdmFyIG9uU2Nyb2xsID0gZnVuY3Rpb24gb25TY3JvbGwoKSB7XG4gICAgaWYgKCFpc1Njcm9sbGVkICYmIHdpbmRvdy5wYWdlWU9mZnNldCA+IGdldEhlYWRlckhlaWdodCgpKSB7XG4gICAgICBzaG93QnRuKCk7XG4gICAgICBpc1Njcm9sbGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoaXNTY3JvbGxlZCAmJiB3aW5kb3cucGFnZVlPZmZzZXQgPCBnZXRIZWFkZXJIZWlnaHQoKSkge1xuICAgICAgaGlkZUhlYWRlcigpO1xuICAgICAgaXNTY3JvbGxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfTtcblxuICBpZiAoaXNTY3JvbGxlZCkge1xuICAgIHNob3dCdG4oKTtcbiAgfVxuXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIG9uU2Nyb2xsKTtcbiAgc2Nyb2xsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgaGVhZGVyLnNjcm9sbEludG9WaWV3KHtcbiAgICAgIGJsb2NrOiBcInN0YXJ0XCIsXG4gICAgICBiZWhhdmlvcjogXCJzbW9vdGhcIlxuICAgIH0pO1xuICB9KTtcbn0pKCk7XG5cbihmdW5jdGlvbiAoKSB7XG4gIC8vIHZhciBEZWZhdWx0cyA9ICQuZm4uc2VsZWN0Mi5hbWQucmVxdWlyZSgnc2VsZWN0Mi9kZWZhdWx0cycpO1xuICAvLyAkLmV4dGVuZChEZWZhdWx0cy5kZWZhdWx0cywge1xuICAvLyAgICAgc2VhcmNoSW5wdXRQbGFjZWhvbGRlcjogJydcbiAgLy8gfSk7XG4gIC8vIHZhciBTZWFyY2hEcm9wZG93biA9ICQuZm4uc2VsZWN0Mi5hbWQucmVxdWlyZSgnc2VsZWN0Mi9kcm9wZG93bi9zZWFyY2gnKTtcbiAgLy8gdmFyIF9yZW5kZXJTZWFyY2hEcm9wZG93biA9IFNlYXJjaERyb3Bkb3duLnByb3RvdHlwZS5yZW5kZXI7XG4gIC8vIFNlYXJjaERyb3Bkb3duLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbihkZWNvcmF0ZWQpIHtcbiAgLy8gICAgIC8vIGludm9rZSBwYXJlbnQgbWV0aG9kXG4gIC8vICAgICB2YXIgJHJlbmRlcmVkID0gX3JlbmRlclNlYXJjaERyb3Bkb3duLmFwcGx5KHRoaXMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpKTtcbiAgLy8gICAgIHRoaXMuJHNlYXJjaC5hdHRyKCdwbGFjZWhvbGRlcicsIHRoaXMub3B0aW9ucy5nZXQoJ3NlYXJjaElucHV0UGxhY2Vob2xkZXInKSk7XG4gIC8vICAgICByZXR1cm4gJHJlbmRlcmVkO1xuICAvLyB9O1xuICB2YXIgY2hlY2tJbnB1dCA9IGZ1bmN0aW9uIGNoZWNrSW5wdXQoZSkge1xuICAgIGlmIChlLnRhcmdldC52YWx1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAkKGUudGFyZ2V0KS5hZGRDbGFzcygnaW5wdXRlZCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkKGUudGFyZ2V0KS5yZW1vdmVDbGFzcygnaW5wdXRlZCcpO1xuICAgIH1cbiAgfTtcblxuICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgJCgnLmpzLXNlbGVjdC1jb21ibycpLnNlbGVjdDIoe1xuICAgICAgLy9taW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHlcbiAgICAgIHBsYWNlaG9sZGVyOiBcItCS0LLQtdC00LjRgtC1INC40LvQuCDQstGL0LHQtdGA0LjRgtC1INCy0LDRgNC40LDQvdGCXCIsXG4gICAgICBkcm9wZG93bkNzc0NsYXNzOiAnc2VsZWN0LWRyb3Bkb3duJyxcbiAgICAgIFwibGFuZ3VhZ2VcIjoge1xuICAgICAgICBcIm5vUmVzdWx0c1wiOiBmdW5jdGlvbiBub1Jlc3VsdHMoKSB7XG4gICAgICAgICAgcmV0dXJuICfQndC40YfQtdCz0L4g0L3QtSDQvdCw0LnQtNC10L3Qvic7XG4gICAgICAgIH0sXG4gICAgICAgIHNlYXJjaGluZzogZnVuY3Rpb24gc2VhcmNoaW5nKCkge1xuICAgICAgICAgIHJldHVybiBcItCX0LDQs9GA0YPQt9C60LAuLi5cIjtcbiAgICAgICAgfVxuICAgICAgfSAvL3NlYXJjaElucHV0UGxhY2Vob2xkZXI6ICdNeSBjdXN0b20gcGxhY2Vob2xkZXIuLi4nXG5cbiAgICB9KTtcbiAgICAkKCcuanMtc2VsZWN0LWNvbWJvJykub24oJ3NlbGVjdDI6b3BlbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICQoJy5zZWxlY3QyLXNlYXJjaCBpbnB1dCcpLm9mZignaW5wdXQnLCBjaGVja0lucHV0KTtcbiAgICAgICQoJy5zZWxlY3QyLXNlYXJjaCBpbnB1dCcpLm9uKCdpbnB1dCcsIGNoZWNrSW5wdXQpO1xuICAgIH0pO1xuICAgICQoJy5qcy1zZWxlY3QtY29tYm8nKS5vbignc2VsZWN0MjpjbG9zaW5nJywgZnVuY3Rpb24gKCkge1xuICAgICAgJCgnLnNlbGVjdDItc2VhcmNoIGlucHV0JykucmVtb3ZlQ2xhc3MoJ2lucHV0ZWQnKTtcbiAgICB9KTtcbiAgICAkKCcuanMtc2VsZWN0LWNvbWJvLW9wZW4nKS5zZWxlY3QyKHtcbiAgICAgIC8vbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5XG4gICAgICBwbGFjZWhvbGRlcjogXCLQktCy0LXQtNC40YLQtSDQuNC70Lgg0LLRi9Cx0LXRgNC40YLQtSDQstCw0YDQuNCw0L3RglwiLFxuICAgICAgZHJvcGRvd25Dc3NDbGFzczogWydzZWxlY3QtZHJvcGRvd24nLCAnc2VsZWN0LWRyb3Bkb3duLW11bHRpJywgJ3NlbGVjdC1kcm9wZG93bi0tb3BlbmVkJ10sXG4gICAgICBcImxhbmd1YWdlXCI6IHtcbiAgICAgICAgXCJub1Jlc3VsdHNcIjogZnVuY3Rpb24gbm9SZXN1bHRzKCkge1xuICAgICAgICAgIHJldHVybiAn0J3QuNGH0LXQs9C+INC90LUg0L3QsNC50LTQtdC90L4nO1xuICAgICAgICB9LFxuICAgICAgICBzZWFyY2hpbmc6IGZ1bmN0aW9uIHNlYXJjaGluZygpIHtcbiAgICAgICAgICByZXR1cm4gXCLQl9Cw0LPRgNGD0LfQutCwLi4uXCI7XG4gICAgICAgIH1cbiAgICAgIH0gLy9zZWFyY2hJbnB1dFBsYWNlaG9sZGVyOiAnTXkgY3VzdG9tIHBsYWNlaG9sZGVyLi4uJ1xuXG4gICAgfSkub24oXCJzZWxlY3QyOmNsb3NpbmdcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KS5vbihcInNlbGVjdDI6Y2xvc2VkXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBsaXN0LnNlbGVjdDIoXCJvcGVuXCIpO1xuICAgIH0pO1xuICAgICQoJy5qcy1zZWxlY3QtY29tYm8tb3BlbicpLnNlbGVjdDIoJ29wZW4nKTtcbiAgICAkKCcuc2VsZWN0LWRyb3Bkb3duLW11bHRpIGlucHV0Jykub24oJ2lucHV0JywgY2hlY2tJbnB1dCk7XG4gICAgJCgnLmpzLXNlbGVjdC1jb21iby1zZWFyY2hpbmcnKS5zZWxlY3QyKHtcbiAgICAgIC8vbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5XG4gICAgICBwbGFjZWhvbGRlcjogXCLQktCy0LXQtNC40YLQtSDQuNC70Lgg0LLRi9Cx0LXRgNC40YLQtSDQstCw0YDQuNCw0L3RglwiLFxuICAgICAgZHJvcGRvd25Dc3NDbGFzczogWydzZWxlY3QtZHJvcGRvd24nLCAnc2VsZWN0LWRyb3Bkb3duLS1vcGVuZWQnLCAnc2VsZWN0LWRyb3Bkb3duLS1zZWFyY2hpbmcnXSxcbiAgICAgIFwibGFuZ3VhZ2VcIjoge1xuICAgICAgICBcIm5vUmVzdWx0c1wiOiBmdW5jdGlvbiBub1Jlc3VsdHMoKSB7XG4gICAgICAgICAgcmV0dXJuICfQndC40YfQtdCz0L4g0L3QtSDQvdCw0LnQtNC10L3Qvic7XG4gICAgICAgIH0sXG4gICAgICAgIHNlYXJjaGluZzogZnVuY3Rpb24gc2VhcmNoaW5nKCkge1xuICAgICAgICAgIHJldHVybiBcItCX0LDQs9GA0YPQt9C60LAuLi5cIjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGFqYXg6IHtcbiAgICAgICAgZGVsYXk6IDUwMDAwMDAwMCxcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9hbnRpYnJlZXouZ2l0aHViLmlvL3NlbGVjdC1kYXRhL3NlbGVjdC1kYXRhLmpzb24nXG4gICAgICB9IC8vc2VhcmNoSW5wdXRQbGFjZWhvbGRlcjogJ015IGN1c3RvbSBwbGFjZWhvbGRlci4uLidcblxuICAgIH0pLm9uKFwic2VsZWN0MjpjbG9zaW5nXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSkub24oXCJzZWxlY3QyOmNsb3NlZFwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgbGlzdC5zZWxlY3QyKFwib3BlblwiKTtcbiAgICB9KTtcbiAgICB2YXIgZXZlbnQgPSBuZXcgRXZlbnQoJ2lucHV0Jywge1xuICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICB9KTtcbiAgICAkKCcuanMtc2VsZWN0LWNvbWJvLXNlYXJjaGluZycpLnNlbGVjdDIoJ29wZW4nKTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICQoJy5zZWxlY3QtZHJvcGRvd24tLXNlYXJjaGluZyBpbnB1dCcpWzBdLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgIH0sIDUwMCk7XG4gICAgJCgnLmpzLXNlbGVjdC1jb21iby1ub3QtZm91bmQnKS5zZWxlY3QyKHtcbiAgICAgIC8vbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5XG4gICAgICBkcm9wZG93bkNzc0NsYXNzOiBbJ3NlbGVjdC1kcm9wZG93bicsICdzZWxlY3QtZHJvcGRvd24tLW9wZW5lZCcsICdzZWxlY3QtZHJvcGRvd24tLW5vdC1mb3VuZCddLFxuICAgICAgXCJsYW5ndWFnZVwiOiB7XG4gICAgICAgIFwibm9SZXN1bHRzXCI6IGZ1bmN0aW9uIG5vUmVzdWx0cygpIHtcbiAgICAgICAgICByZXR1cm4gJ9Cd0LjRh9C10LPQviDQvdC1INC90LDQudC00LXQvdC+JztcbiAgICAgICAgfSxcbiAgICAgICAgc2VhcmNoaW5nOiBmdW5jdGlvbiBzZWFyY2hpbmcoKSB7XG4gICAgICAgICAgcmV0dXJuIFwi0JfQsNCz0YDRg9C30LrQsC4uLlwiO1xuICAgICAgICB9XG4gICAgICB9IC8vc2VhcmNoSW5wdXRQbGFjZWhvbGRlcjogJ015IGN1c3RvbSBwbGFjZWhvbGRlci4uLidcblxuICAgIH0pLm9uKFwic2VsZWN0MjpjbG9zaW5nXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSkub24oXCJzZWxlY3QyOmNsb3NlZFwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgbGlzdC5zZWxlY3QyKFwib3BlblwiKTtcbiAgICB9KTtcbiAgICAkKCcuanMtc2VsZWN0LWNvbWJvLW5vdC1mb3VuZCcpLnNlbGVjdDIoJ29wZW4nKTtcbiAgICAkKCcuc2VsZWN0LWRyb3Bkb3duLS1ub3QtZm91bmQgaW5wdXQnKS52YWwoJ9GE0YvQstCw0L/QsCcpO1xuICAgICQoJy5zZWxlY3QtZHJvcGRvd24tLW5vdC1mb3VuZCBpbnB1dCcpWzBdLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICQoJy5qcy1zZWxlY3Qtc2luZ2xlJykuc2VsZWN0Mih7XG4gICAgICBwbGFjZWhvbGRlcjogXCLQktGL0LHQtdGA0LjRgtC1INCy0LDRgNC40LDQvdGCXCIsXG4gICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHksXG4gICAgICBkcm9wZG93bkNzc0NsYXNzOiBbJ3NlbGVjdC1kcm9wZG93bicsICdzZWxlY3QtZHJvcGRvd24tLXNpbmdsZSddXG4gICAgfSk7XG4gICAgdmFyIGxpc3QgPSAkKFwiLmpzLXNlbGVjdC1zaW5nbGUtb3BlblwiKS5zZWxlY3QyKHtcbiAgICAgIHBsYWNlaG9sZGVyOiBcItCS0YvQsdC10YDQuNGC0LUg0LLQsNGA0LjQsNC90YJcIixcbiAgICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcbiAgICAgIGRyb3Bkb3duQ3NzQ2xhc3M6IFsnc2VsZWN0LWRyb3Bkb3duJywgJ3NlbGVjdC1kcm9wZG93bi0tc2luZ2xlJywgJ3NlbGVjdC1kcm9wZG93bi0tb3BlbmVkJ10sXG4gICAgICBjbG9zZU9uU2VsZWN0OiBmYWxzZVxuICAgIH0pLm9uKFwic2VsZWN0MjpjbG9zaW5nXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSkub24oXCJzZWxlY3QyOmNsb3NlZFwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgbGlzdC5zZWxlY3QyKFwib3BlblwiKTtcbiAgICB9KTtcbiAgICBsaXN0LnNlbGVjdDIoJ29wZW4nKTtcbiAgfSk7IC8vICQoJyN5b3VyLXNlbGVjdC1pZCcpLm9uZSgnc2VsZWN0MjpvcGVuJywgZnVuY3Rpb24oZSkge1xuICAvLyAgICQoJ2lucHV0LnNlbGVjdDItc2VhcmNoX19maWVsZCcpLnByb3AoJ3BsYWNlaG9sZGVyJywgJ2VudGVyIHVzZXJuYW1lIG9yIGNpdHknKTtcbiAgLy8gfSk7XG59KSgpOyIsIi8qIFJ1c3NpYW4gKFVURi04KSBpbml0aWFsaXNhdGlvbiBmb3IgdGhlIGpRdWVyeSBVSSBkYXRlIHBpY2tlciBwbHVnaW4uICovXG4vKiBXcml0dGVuIGJ5IEFuZHJldyBTdHJvbW5vdiAoc3Ryb21ub3ZAZ21haWwuY29tKS4gKi9cbiggZnVuY3Rpb24oIGZhY3RvcnkgKSB7XG5cdGlmICggdHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQgKSB7XG5cblx0XHQvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXG5cdFx0ZGVmaW5lKCBbIFwiLi4vd2lkZ2V0cy9kYXRlcGlja2VyXCIgXSwgZmFjdG9yeSApO1xuXHR9IGVsc2Uge1xuXG5cdFx0Ly8gQnJvd3NlciBnbG9iYWxzXG5cdFx0ZmFjdG9yeSggalF1ZXJ5LmRhdGVwaWNrZXIgKTtcblx0fVxufSggZnVuY3Rpb24oIGRhdGVwaWNrZXIgKSB7XG5cbmRhdGVwaWNrZXIucmVnaW9uYWwucnUgPSB7XG5cdGNsb3NlVGV4dDogXCLQl9Cw0LrRgNGL0YLRjFwiLFxuXHRwcmV2VGV4dDogXCImI3gzQzvQn9GA0LXQtFwiLFxuXHRuZXh0VGV4dDogXCLQodC70LXQtCYjeDNFO1wiLFxuXHRjdXJyZW50VGV4dDogXCLQodC10LPQvtC00L3Rj1wiLFxuXHRtb250aE5hbWVzOiBbIFwi0K/QvdCy0LDRgNGMXCIsXCLQpNC10LLRgNCw0LvRjFwiLFwi0JzQsNGA0YJcIixcItCQ0L/RgNC10LvRjFwiLFwi0JzQsNC5XCIsXCLQmNGO0L3RjFwiLFxuXHRcItCY0Y7Qu9GMXCIsXCLQkNCy0LPRg9GB0YJcIixcItCh0LXQvdGC0Y/QsdGA0YxcIixcItCe0LrRgtGP0LHRgNGMXCIsXCLQndC+0Y/QsdGA0YxcIixcItCU0LXQutCw0LHRgNGMXCIgXSxcblx0bW9udGhOYW1lc1Nob3J0OiBbIFwi0K/QvdCyXCIsXCLQpNC10LJcIixcItCc0LDRgFwiLFwi0JDQv9GAXCIsXCLQnNCw0LlcIixcItCY0Y7QvVwiLFxuXHRcItCY0Y7Qu1wiLFwi0JDQstCzXCIsXCLQodC10L1cIixcItCe0LrRglwiLFwi0J3QvtGPXCIsXCLQlNC10LpcIiBdLFxuXHRkYXlOYW1lczogWyBcItCy0L7RgdC60YDQtdGB0LXQvdGM0LVcIixcItC/0L7QvdC10LTQtdC70YzQvdC40LpcIixcItCy0YLQvtGA0L3QuNC6XCIsXCLRgdGA0LXQtNCwXCIsXCLRh9C10YLQstC10YDQs1wiLFwi0L/Rj9GC0L3QuNGG0LBcIixcItGB0YPQsdCx0L7RgtCwXCIgXSxcblx0ZGF5TmFtZXNTaG9ydDogWyBcItCy0YHQulwiLFwi0L/QvdC0XCIsXCLQstGC0YBcIixcItGB0YDQtFwiLFwi0YfRgtCyXCIsXCLQv9GC0L1cIixcItGB0LHRglwiIF0sXG5cdGRheU5hbWVzTWluOiBbIFwi0JLRgVwiLFwi0J/QvVwiLFwi0JLRglwiLFwi0KHRgFwiLFwi0KfRglwiLFwi0J/RglwiLFwi0KHQsVwiIF0sXG5cdHdlZWtIZWFkZXI6IFwi0J3QtdC0XCIsXG5cdGRhdGVGb3JtYXQ6IFwiZGQubW0ueXlcIixcblx0Zmlyc3REYXk6IDEsXG5cdGlzUlRMOiBmYWxzZSxcblx0c2hvd01vbnRoQWZ0ZXJZZWFyOiBmYWxzZSxcblx0eWVhclN1ZmZpeDogXCJcIiB9O1xuZGF0ZXBpY2tlci5zZXREZWZhdWx0cyggZGF0ZXBpY2tlci5yZWdpb25hbC5ydSApO1xuXG5yZXR1cm4gZGF0ZXBpY2tlci5yZWdpb25hbC5ydTtcblxufSApICk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAkKCcuZHJvcGRvd246bm90KC5kcm9wZG93bi1vcGVuZWQnKS5zZWxlY3QyKHtcbiAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHksXG4gICAgZHJvcGRvd25Dc3NDbGFzczogWydjYWxlbmRhci1kcm9wZG93biddLFxuICB9KTtcblxuICAkKCcuZHJvcGRvd24tb3BlbmVkJykuc2VsZWN0Mih7XG4gICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5LFxuICAgIGRyb3Bkb3duQ3NzQ2xhc3M6IFsnY2FsZW5kYXItZHJvcGRvd24nLCAnY2FsZW5kYXItZHJvcGRvd24tcGVybWFuZW50J10sXG4gIH0pLm9uKFwic2VsZWN0MjpjbG9zaW5nXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIH0pLm9uKFwic2VsZWN0MjpjbG9zZWRcIiwgZnVuY3Rpb24oZSkge1xuICAgIGxpc3Quc2VsZWN0MihcIm9wZW5cIik7XG4gIH0pO1xuXG4gICQoJy5kcm9wZG93bicpLm9uKCdzZWxlY3QyOmNsb3NlJywgZnVuY3Rpb24oKSB7XG4gICAgJCh0aGlzKS5uZXh0KCkuZmluZCgnLnNlbGVjdDItc2VsZWN0aW9uJykuYmx1cigpO1xuICB9KTtcblxuICAkKCcuZHJvcGRvd24gKyAuc2VsZWN0MiAuc2VsZWN0Mi1zZWxlY3Rpb25fX3JlbmRlcmVkJykuYXR0cigndGFiaW5kZXgnLCAnLTEnKTtcbiAgJCgnLmRyb3Bkb3duLW9wZW5lZCcpLnNlbGVjdDIoJ29wZW4nKVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgY29uc3Qgc2VsZWN0T3B0ID0ge1xuICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcbiAgICBkcm9wZG93bkNzc0NsYXNzOiAnY2FsZW5kYXItZHJvcGRvd24nXG4gIH07XG5cbiAgJCgnLmlucHV0LWRhdGUnKS5kYXRlcGlja2VyKHtcbiAgICBkYXRlRm9ybWF0OiAnZGQubW0ueXknLFxuICAgIHNob3dPdGhlck1vbnRoczogdHJ1ZSxcbiAgICByZWdpb25hbDogJ3J1JyxcbiAgICBtb250aE5hbWVzU2hvcnQ6IFsgXCLQr9C90LLQsNGA0YxcIixcItCk0LXQstGA0LDQu9GMXCIsXCLQnNCw0YDRglwiLFwi0JDQv9GA0LXQu9GMXCIsXCLQnNCw0LlcIixcItCY0Y7QvdGMXCIsXG4gICAgXCLQmNGO0LvRjFwiLFwi0JDQstCz0YPRgdGCXCIsXCLQodC10L3RgtGP0LHRgNGMXCIsXCLQntC60YLRj9Cx0YDRjFwiLFwi0J3QvtGP0LHRgNGMXCIsXCLQlNC10LrQsNCx0YDRjFwiIF0sXG4gICAgY2hhbmdlTW9udGg6IHRydWUsXG4gICAgY2hhbmdlWWVhcjogdHJ1ZSxcbiAgICB5ZWFyUmFuZ2U6ICcxOTAwOisxMCcsXG4gICAgYmVmb3JlU2hvdzogZnVuY3Rpb24oKSB7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcudWktZGF0ZXBpY2tlci1tb250aCcpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXIteWVhcicpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgIH0sIDApO1xuICAgIH0sXG5cbiAgICBvbkNoYW5nZU1vbnRoWWVhcjogZnVuY3Rpb24oKSB7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcudWktZGF0ZXBpY2tlci1tb250aCcpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXIteWVhcicpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgIH0sIDApO1xuICAgIH0sXG4gIH0pO1xuXG4gICQoJy5pbnB1dC1kYXRlLXRyaWdnZXInKS5kYXRlcGlja2VyKHtcbiAgICBkYXRlRm9ybWF0OiAnZGQubW0ueXknLFxuICAgIHNob3dPdGhlck1vbnRoczogdHJ1ZSxcbiAgICByZWdpb25hbDogJ3J1JyxcbiAgICBtb250aE5hbWVzU2hvcnQ6IFsgXCLQr9C90LLQsNGA0YxcIixcItCk0LXQstGA0LDQu9GMXCIsXCLQnNCw0YDRglwiLFwi0JDQv9GA0LXQu9GMXCIsXCLQnNCw0LlcIixcItCY0Y7QvdGMXCIsXG4gICAgXCLQmNGO0LvRjFwiLFwi0JDQstCz0YPRgdGCXCIsXCLQodC10L3RgtGP0LHRgNGMXCIsXCLQntC60YLRj9Cx0YDRjFwiLFwi0J3QvtGP0LHRgNGMXCIsXCLQlNC10LrQsNCx0YDRjFwiIF0sXG4gICAgY2hhbmdlTW9udGg6IHRydWUsXG4gICAgY2hhbmdlWWVhcjogdHJ1ZSxcbiAgICB5ZWFyUmFuZ2U6ICcxOTAwOisxMCcsXG5cbiAgICBvbkNoYW5nZU1vbnRoWWVhcjogZnVuY3Rpb24oKSB7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcudWktZGF0ZXBpY2tlci1tb250aCcpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXIteWVhcicpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgIH0sIDApO1xuICAgIH0sXG5cbiAgICBvblNlbGVjdDogZnVuY3Rpb24oKSB7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcudWktZGF0ZXBpY2tlci1tb250aCcpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXIteWVhcicpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgIH0sIDApO1xuICAgIH0sXG4gIH0pO1xuXG4gICQoJy5pbnB1dC1kYXRlLXRyaWdnZXItc2luZ2xlJykuZGF0ZXBpY2tlcih7XG4gICAgZGF0ZUZvcm1hdDogJ2RkLm1tLnl5JyxcbiAgICBzaG93T3RoZXJNb250aHM6IHRydWUsXG4gICAgcmVnaW9uYWw6ICdydScsXG4gICAgbW9udGhOYW1lc1Nob3J0OiBbIFwi0K/QvdCy0LDRgNGMXCIsXCLQpNC10LLRgNCw0LvRjFwiLFwi0JzQsNGA0YJcIixcItCQ0L/RgNC10LvRjFwiLFwi0JzQsNC5XCIsXCLQmNGO0L3RjFwiLFxuICAgIFwi0JjRjtC70YxcIixcItCQ0LLQs9GD0YHRglwiLFwi0KHQtdC90YLRj9Cx0YDRjFwiLFwi0J7QutGC0Y/QsdGA0YxcIixcItCd0L7Rj9Cx0YDRjFwiLFwi0JTQtdC60LDQsdGA0YxcIiBdLFxuICAgIGNoYW5nZU1vbnRoOiB0cnVlLFxuICAgIGNoYW5nZVllYXI6IHRydWUsXG4gICAgeWVhclJhbmdlOiAnMTkwMDorMTAnLFxuXG4gICAgb25DaGFuZ2VNb250aFllYXI6IGZ1bmN0aW9uKCkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXItbW9udGgnKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICAgICAgICQoJy51aS1kYXRlcGlja2VyLXllYXInKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICAgICB9LCAwKTtcbiAgICB9LFxuXG4gICAgb25TZWxlY3Q6IGZ1bmN0aW9uKCkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXItbW9udGgnKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICAgICAgICQoJy51aS1kYXRlcGlja2VyLXllYXInKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICAgICB9LCAwKTtcbiAgICB9LFxuICB9KTtcblxuICAkKCcuaW5wdXQtZGF0ZS10cmlnZ2VyLXJhbmdlJykuZGF0ZXBpY2tlcih7XG4gICAgcmFuZ2U6ICdwZXJpb2QnLFxuICAgIGRhdGVGb3JtYXQ6ICdkZC5tbS55eScsXG4gICAgc2hvd090aGVyTW9udGhzOiB0cnVlLFxuICAgIHJlZ2lvbmFsOiAncnUnLFxuICAgIG1vbnRoTmFtZXNTaG9ydDogWyBcItCv0L3QstCw0YDRjFwiLFwi0KTQtdCy0YDQsNC70YxcIixcItCc0LDRgNGCXCIsXCLQkNC/0YDQtdC70YxcIixcItCc0LDQuVwiLFwi0JjRjtC90YxcIixcbiAgICBcItCY0Y7Qu9GMXCIsXCLQkNCy0LPRg9GB0YJcIixcItCh0LXQvdGC0Y/QsdGA0YxcIixcItCe0LrRgtGP0LHRgNGMXCIsXCLQndC+0Y/QsdGA0YxcIixcItCU0LXQutCw0LHRgNGMXCIgXSxcbiAgICBjaGFuZ2VNb250aDogdHJ1ZSxcbiAgICBjaGFuZ2VZZWFyOiB0cnVlLFxuICAgIHllYXJSYW5nZTogJzE5MDA6KzEwJyxcblxuICAgIG9uQ2hhbmdlTW9udGhZZWFyOiBmdW5jdGlvbigpIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICQoJy51aS1kYXRlcGlja2VyLW1vbnRoJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgICAkKCcudWktZGF0ZXBpY2tlci15ZWFyJykuc2VsZWN0MihzZWxlY3RPcHQpO1xuICAgICAgfSwgMCk7XG4gICAgfSxcblxuICAgIG9uU2VsZWN0OiBmdW5jdGlvbihpbnB1dCwgaW5zdCkge1xuICAgICAgY29uc29sZS5sb2coaW5zdCk7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICQoJy5pbnB1dC1kYXRlLXRyaWdnZXItcmFuZ2UnKS5maW5kKCcudWktZGF0ZXBpY2tlci1tb250aCcpLnNlbGVjdDIoc2VsZWN0T3B0KTtcbiAgICAgICAgJCgnLmlucHV0LWRhdGUtdHJpZ2dlci1yYW5nZScpLmZpbmQoJy51aS1kYXRlcGlja2VyLXllYXInKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICAgICB9LCAxMDApO1xuICAgIH0sXG5cbiAgICBiZWZvcmVTaG93OiBmdW5jdGlvbihpbnB1dCwgaW5zdCkge1xuICAgICAgY29uc29sZS5sb2coaW5zdCk7XG4gICAgfVxuICB9KTtcblxuICBjb25zdCBjdXJyZW50ID0gbW9tZW50KCk7XG4gIGNvbnN0IGRheSA9IGN1cnJlbnQuZm9ybWF0KCdERCcpO1xuICBjb25zdCBtb250aCA9IGN1cnJlbnQuZm9ybWF0KCdNTScpO1xuICBjb25zdCB5ZWFyID0gY3VycmVudC5mb3JtYXQoJ1lZWVknKTtcbiAgbGV0IHBpY2tlZERhdGUgPSAnJztcbiAgbGV0IHBpY2tlZFBlcmlvZCA9IFtdO1xuICBsZXQgaG92ZXJEYXRlID0gJyc7XG5cbiAgaWYgKGRheSAhPT0gJzE1Jykge1xuICAgIHBpY2tlZERhdGUgPSAxNSArICcuJyArIG1vbnRoICsgJy4nICsgeWVhcjtcbiAgfSBlbHNlIHtcbiAgICBwaWNrZWREYXRlID0gMTcgKyAnLicgKyBtb250aCArICcuJyArIHllYXI7XG4gIH1cblxuICBpZiAoZGF5ICE9PSAnMTMnKSB7XG4gICAgaG92ZXJEYXRlID0gJzEzJztcbiAgfSBlbHNlIHtcbiAgICBob3ZlckRhdGUgPSAnMTInO1xuICB9XG5cbiAgZGF5ID4gMTVcbiAgICA/IHBpY2tlZFBlcmlvZCA9IFsnMDIuJyArIG1vbnRoICsgJy4nICsgeWVhciwgJzExLicgKyBtb250aCArICcuJyArIHllYXJdXG4gICAgOiBwaWNrZWRQZXJpb2QgPSBbJzE3LicgKyBtb250aCArICcuJyArIHllYXIsICcyNi4nICsgbW9udGggKyAnLicgKyB5ZWFyXVxuXG4gICQoJy5pbnB1dC1kYXRlLXRyaWdnZXInKS5kYXRlcGlja2VyKCdzZXREYXRlJywgcGlja2VkRGF0ZSk7XG4gICQoJy5pbnB1dC1kYXRlLXRyaWdnZXItc2luZ2xlJykuZGF0ZXBpY2tlcignc2V0RGF0ZScsIHBpY2tlZERhdGUpO1xuICAkKCcuaW5wdXQtZGF0ZS10cmlnZ2VyLXJhbmdlJykuZGF0ZXBpY2tlcignc2V0RGF0ZScsIHBpY2tlZFBlcmlvZCk7XG5cblxuXG4gICQoJy5pbnB1dC1kYXRlLXRyaWdnZXItc2luZ2xlIC51aS1kYXRlcGlja2VyLWNhbGVuZGFyIHRkIGEnKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgIGlmICgkKHRoaXMpLnRleHQoKSA9PT0gaG92ZXJEYXRlKSB7XG4gICAgICAkKHRoaXMpLmFkZENsYXNzKCdob3ZlcmVkJyk7XG4gICAgfVxuICB9KTtcblxuXG5cbiAgJCgnLnVpLWRhdGVwaWNrZXItbW9udGgnKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG4gICQoJy51aS1kYXRlcGlja2VyLXllYXInKS5zZWxlY3QyKHNlbGVjdE9wdCk7XG5cbiAgJCgnLmlucHV0LWRhdGUnKS5kYXRlcGlja2VyKCdyZWZyZXNoJyk7XG5cbiAgJCgnLmlucHV0LWRhdGUnKS5pbnB1dG1hc2soXCI5OS45OS45OTk5XCIsIHtcbiAgICAvL21hc2s6ICdtbS9kZC95eXl5JyxcbiAgICBwbGFjZWhvbGRlcjogJycsXG4gICAgc2hvd01hc2tPbkhvdmVyOiBmYWxzZSxcbiAgICBzaG93TWFza09uRm9jdXM6IGZhbHNlLFxuICAgIGppdE1hc2tpbmc6IHRydWVcbiAgfSk7XG5cblxuICAkKCcuaW5wdXQtZGF0ZScpLm9uKCdmb2N1cycsIGZ1bmN0aW9uKGUpIHtcbiAgICBjb25zdCB0YXJnZXQgPSAkKGUudGFyZ2V0KTtcbiAgICBjb25zdCB2YWwgPSB0YXJnZXQudmFsKCk7XG5cbiAgICBpZiAodmFsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGFyZ2V0LnBhcmVudCgpLmFkZENsYXNzKCdkYXRlLXBsYWNlaG9sZGVyJyk7XG4gICAgfVxuICB9KTtcblxuICAkKCcuaW5wdXQtZGF0ZScpLm9uKCdibHVyJywgZnVuY3Rpb24oZSkge1xuICAgIGNvbnN0IHRhcmdldCA9ICQoZS50YXJnZXQpO1xuICAgIGNvbnN0IHZhbCA9IHRhcmdldC52YWwoKTtcblxuICAgIHRhcmdldC5wYXJlbnQoKS5yZW1vdmVDbGFzcygnZGF0ZS1wbGFjZWhvbGRlcicpO1xuICB9KTtcblxuICAkKCcuaW5wdXQtZGF0ZScpLm9uKCdpbnB1dCcsIGZ1bmN0aW9uKGUpIHtcbiAgICBjb25zdCB0YXJnZXQgPSAkKGUudGFyZ2V0KTtcbiAgICBjb25zdCB2YWwgPSB0YXJnZXQudmFsKCk7XG5cbiAgICBpZiAodmFsLmxlbmd0aCA+IDApIHtcbiAgICAgIHRhcmdldC5wYXJlbnQoKS5yZW1vdmVDbGFzcygnZGF0ZS1wbGFjZWhvbGRlcicpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXQucGFyZW50KCkuYWRkQ2xhc3MoJ2RhdGUtcGxhY2Vob2xkZXInKTtcbiAgICB9XG5cbiAgICBjb25zdCBpc1ZhbGlkID0gbW9tZW50KCQodGhpcykudmFsKCksICdERC5NTS5ZWVlZJywgdHJ1ZSkuaXNWYWxpZCgpO1xuICAgIGlmIChpc1ZhbGlkKSB7XG4gICAgICAkKHRoaXMpLmRhdGVwaWNrZXIoJ2hpZGUnKTtcbiAgICAgICQodGhpcykuZGF0ZXBpY2tlcignc2hvdycpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gIC8vICAgZnVuY3Rpb24gZjEoKSB7XG4gIC8vICAgICAkKCcuaW5wdXQtZGF0ZScpLmRhdGVwaWNrZXIoJ3JlZnJlc2gnKTtcbiAgLy8gICB9O1xuXG4gIC8vICAgZnVuY3Rpb24gZjIoKSB7XG4gIC8vICAgICBjb25zb2xlLmxvZygkKCcudWktZGF0ZXBpY2tlci1tb250aCcpWzBdKTtcbiAgLy8gICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gIC8vICAgICAgICQoJy51aS1kYXRlcGlja2VyLW1vbnRoJykuc2VsZWN0MigpO1xuICAvLyAgICAgfSwgNTAwMCk7XG4gIC8vICAgICAvLyQoJy51aS1kYXRlcGlja2VyLW1vbnRoJykuc2VsZWN0MigpO1xuICAvLyAgIH07XG5cbiAgLy8gICB2YXIgZGZkID0gJC5EZWZlcnJlZCgpO1xuXG4gIC8vICAgZGZkLmRvbmUoZjEpLmRvbmUoZjIpO1xuXG4gIC8vICAgZGZkLnJlc29sdmUoJ2EnKTtcblxuICAvLyB9KTtcblxuICAkKCcjY2FsZW5kYXItZHJvcGRvd24tbW9udGgnKS5zZWxlY3QyKHtcbiAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHksXG4gICAgZHJvcGRvd25Dc3NDbGFzczogWydjYWxlbmRhci1kcm9wZG93bicsICdjYWxlbmRhci1kcm9wZG93bi1wZXJtYW5lbnQnXSxcbiAgICBjbG9zZU9uU2VsZWN0OiBmYWxzZVxuICB9KS5vbihcInNlbGVjdDI6Y2xvc2luZ1wiLCBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9KS5vbihcInNlbGVjdDI6Y2xvc2VkXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICBsaXN0LnNlbGVjdDIoXCJvcGVuXCIpO1xuICB9KTtcblxuICAkKCcjY2FsZW5kYXItZHJvcGRvd24tbW9udGgnKS5zZWxlY3QyKCdvcGVuJyk7XG5cbiAgJCgnI2NhbGVuZGFyLWRyb3Bkb3duLXllYXInKS5zZWxlY3QyKHtcbiAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHksXG4gICAgZHJvcGRvd25Dc3NDbGFzczogWydjYWxlbmRhci1kcm9wZG93bicsICdjYWxlbmRhci1kcm9wZG93bi1wZXJtYW5lbnQnXSxcbiAgICBjbG9zZU9uU2VsZWN0OiBmYWxzZVxuICB9KS5vbihcInNlbGVjdDI6Y2xvc2luZ1wiLCBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9KS5vbihcInNlbGVjdDI6Y2xvc2VkXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICBsaXN0LnNlbGVjdDIoXCJvcGVuXCIpO1xuICB9KTtcblxuICAkKCcjY2FsZW5kYXItZHJvcGRvd24teWVhcicpLnNlbGVjdDIoJ29wZW4nKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICQoJy5pbnB1dC1wYXNzd29yZC1idG4nKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICBjb25zdCAkYnRuID0gJCh0aGlzKTtcbiAgICBjb25zdCAkaW5wdXQgPSAkYnRuLnByZXYoKTtcblxuICAgICRidG4udG9nZ2xlQ2xhc3MoJ3Nob3duJyk7XG5cbiAgICBpZiAoJGJ0bi5oYXNDbGFzcygnc2hvd24nKSkge1xuICAgICAgJGlucHV0LmF0dHIoJ3R5cGUnLCAndGV4dCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkaW5wdXQuYXR0cigndHlwZScsICdwYXNzd29yZCcpO1xuICAgIH1cbiAgfSlcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gIC8vIGNvbnN0IGlucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbnB1dC1waG9uZScpO1xuXG4gIC8vIGlmICghaW5wdXRzWzBdKSB7XG4gIC8vICAgcmV0dXJuO1xuICAvLyB9XG5cbiAgLy8gY29uc3QgaW0gPSBuZXcgSW5wdXRtYXNrKFwiKzcoOTk5KSA5OTktOTktOTlcIik7XG5cbiAgLy8gaW5wdXRzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAvLyAgIGltLm1hc2soaXRlbSk7XG4gIC8vIH0pXG5cbiAgJCgnLmlucHV0LXBob25lJykuaW5wdXRtYXNrKCcrNyg5OTkpIDk5OS05OS05OScpO1xufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgY29uc3Qgc2Nyb2xsQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNjcm9sbC10by10b3AnKTtcbiAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcicpO1xuXG4gIGlmICghc2Nyb2xsQnRuKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgZ2V0SGVhZGVySGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGhlYWRlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgKyA1MDtcbiAgfTtcblxuICBsZXQgaXNTY3JvbGxlZCA9IHdpbmRvdy5wYWdlWU9mZnNldCA+IGdldEhlYWRlckhlaWdodCgpO1xuXG4gIGNvbnN0IHNob3dCdG4gPSBmdW5jdGlvbigpIHtcbiAgICAhc2Nyb2xsQnRuLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJylcbiAgICAmJiBzY3JvbGxCdG4uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gIH1cblxuICBjb25zdCBoaWRlSGVhZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgc2Nyb2xsQnRuLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJylcbiAgICAmJiBzY3JvbGxCdG4uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gIH1cblxuICBjb25zdCBvblNjcm9sbCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghaXNTY3JvbGxlZCAmJiB3aW5kb3cucGFnZVlPZmZzZXQgPiBnZXRIZWFkZXJIZWlnaHQoKSkge1xuICAgICAgc2hvd0J0bigpO1xuICAgICAgaXNTY3JvbGxlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKGlzU2Nyb2xsZWQgJiYgd2luZG93LnBhZ2VZT2Zmc2V0IDwgZ2V0SGVhZGVySGVpZ2h0KCkpIHtcbiAgICAgIGhpZGVIZWFkZXIoKTtcbiAgICAgIGlzU2Nyb2xsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBpZiAoaXNTY3JvbGxlZCkge1xuICAgIHNob3dCdG4oKTtcbiAgfVxuXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIG9uU2Nyb2xsKTtcbiAgc2Nyb2xsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBoZWFkZXIuc2Nyb2xsSW50b1ZpZXcoe2Jsb2NrOiBgc3RhcnRgLCBiZWhhdmlvcjogYHNtb290aGB9KTtcbiAgfSlcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gIC8vIHZhciBEZWZhdWx0cyA9ICQuZm4uc2VsZWN0Mi5hbWQucmVxdWlyZSgnc2VsZWN0Mi9kZWZhdWx0cycpO1xuXG4gIC8vICQuZXh0ZW5kKERlZmF1bHRzLmRlZmF1bHRzLCB7XG4gIC8vICAgICBzZWFyY2hJbnB1dFBsYWNlaG9sZGVyOiAnJ1xuICAvLyB9KTtcblxuICAvLyB2YXIgU2VhcmNoRHJvcGRvd24gPSAkLmZuLnNlbGVjdDIuYW1kLnJlcXVpcmUoJ3NlbGVjdDIvZHJvcGRvd24vc2VhcmNoJyk7XG5cbiAgLy8gdmFyIF9yZW5kZXJTZWFyY2hEcm9wZG93biA9IFNlYXJjaERyb3Bkb3duLnByb3RvdHlwZS5yZW5kZXI7XG5cbiAgLy8gU2VhcmNoRHJvcGRvd24ucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uKGRlY29yYXRlZCkge1xuXG4gIC8vICAgICAvLyBpbnZva2UgcGFyZW50IG1ldGhvZFxuICAvLyAgICAgdmFyICRyZW5kZXJlZCA9IF9yZW5kZXJTZWFyY2hEcm9wZG93bi5hcHBseSh0aGlzLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSk7XG5cbiAgLy8gICAgIHRoaXMuJHNlYXJjaC5hdHRyKCdwbGFjZWhvbGRlcicsIHRoaXMub3B0aW9ucy5nZXQoJ3NlYXJjaElucHV0UGxhY2Vob2xkZXInKSk7XG5cbiAgLy8gICAgIHJldHVybiAkcmVuZGVyZWQ7XG4gIC8vIH07XG5cblxuICBjb25zdCBjaGVja0lucHV0ID0gZnVuY3Rpb24oZSkge1xuICAgIGlmIChlLnRhcmdldC52YWx1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAkKGUudGFyZ2V0KS5hZGRDbGFzcygnaW5wdXRlZCcpXG4gICAgfSBlbHNlIHtcbiAgICAgICQoZS50YXJnZXQpLnJlbW92ZUNsYXNzKCdpbnB1dGVkJylcbiAgICB9XG4gIH07XG5cbiAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgJCgnLmpzLXNlbGVjdC1jb21ibycpLnNlbGVjdDIoe1xuICAgICAgLy9taW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHlcbiAgICAgIHBsYWNlaG9sZGVyOiBcItCS0LLQtdC00LjRgtC1INC40LvQuCDQstGL0LHQtdGA0LjRgtC1INCy0LDRgNC40LDQvdGCXCIsXG4gICAgICBkcm9wZG93bkNzc0NsYXNzOiAnc2VsZWN0LWRyb3Bkb3duJyxcbiAgICAgIFwibGFuZ3VhZ2VcIjoge1xuICAgICAgICBcIm5vUmVzdWx0c1wiOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgcmV0dXJuICfQndC40YfQtdCz0L4g0L3QtSDQvdCw0LnQtNC10L3Qvic7XG4gICAgICAgIH0sXG4gICAgICAgIHNlYXJjaGluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIFwi0JfQsNCz0YDRg9C30LrQsC4uLlwiO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvL3NlYXJjaElucHV0UGxhY2Vob2xkZXI6ICdNeSBjdXN0b20gcGxhY2Vob2xkZXIuLi4nXG4gICAgfSk7XG5cbiAgICAkKCcuanMtc2VsZWN0LWNvbWJvJykub24oJ3NlbGVjdDI6b3BlbicsIGZ1bmN0aW9uKCkge1xuICAgICAgJCgnLnNlbGVjdDItc2VhcmNoIGlucHV0Jykub2ZmKCdpbnB1dCcsIGNoZWNrSW5wdXQpO1xuICAgICAgJCgnLnNlbGVjdDItc2VhcmNoIGlucHV0Jykub24oJ2lucHV0JywgY2hlY2tJbnB1dCk7XG4gICAgfSk7XG5cbiAgICAkKCcuanMtc2VsZWN0LWNvbWJvJykub24oJ3NlbGVjdDI6Y2xvc2luZycsIGZ1bmN0aW9uKCkge1xuICAgICAgJCgnLnNlbGVjdDItc2VhcmNoIGlucHV0JykucmVtb3ZlQ2xhc3MoJ2lucHV0ZWQnKTtcbiAgICB9KTtcblxuXG5cblxuXG4gICAgJCgnLmpzLXNlbGVjdC1jb21iby1vcGVuJykuc2VsZWN0Mih7XG4gICAgICAvL21pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eVxuICAgICAgcGxhY2Vob2xkZXI6IFwi0JLQstC10LTQuNGC0LUg0LjQu9C4INCy0YvQsdC10YDQuNGC0LUg0LLQsNGA0LjQsNC90YJcIixcbiAgICAgIGRyb3Bkb3duQ3NzQ2xhc3M6IFsnc2VsZWN0LWRyb3Bkb3duJywgJ3NlbGVjdC1kcm9wZG93bi1tdWx0aScsICdzZWxlY3QtZHJvcGRvd24tLW9wZW5lZCddLFxuICAgICAgXCJsYW5ndWFnZVwiOiB7XG4gICAgICAgIFwibm9SZXN1bHRzXCI6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICByZXR1cm4gJ9Cd0LjRh9C10LPQviDQvdC1INC90LDQudC00LXQvdC+JztcbiAgICAgICAgfSxcbiAgICAgICAgc2VhcmNoaW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gXCLQl9Cw0LPRgNGD0LfQutCwLi4uXCI7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvL3NlYXJjaElucHV0UGxhY2Vob2xkZXI6ICdNeSBjdXN0b20gcGxhY2Vob2xkZXIuLi4nXG4gICAgfSkub24oXCJzZWxlY3QyOmNsb3NpbmdcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pLm9uKFwic2VsZWN0MjpjbG9zZWRcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBsaXN0LnNlbGVjdDIoXCJvcGVuXCIpO1xuICAgIH0pO1xuXG4gICAgJCgnLmpzLXNlbGVjdC1jb21iby1vcGVuJykuc2VsZWN0Mignb3BlbicpO1xuICAgICQoJy5zZWxlY3QtZHJvcGRvd24tbXVsdGkgaW5wdXQnKS5vbignaW5wdXQnLCBjaGVja0lucHV0KTtcblxuXG5cblxuXG4gICAgJCgnLmpzLXNlbGVjdC1jb21iby1zZWFyY2hpbmcnKS5zZWxlY3QyKHtcbiAgICAgIC8vbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5XG4gICAgICBwbGFjZWhvbGRlcjogXCLQktCy0LXQtNC40YLQtSDQuNC70Lgg0LLRi9Cx0LXRgNC40YLQtSDQstCw0YDQuNCw0L3RglwiLFxuICAgICAgZHJvcGRvd25Dc3NDbGFzczogWydzZWxlY3QtZHJvcGRvd24nLCAnc2VsZWN0LWRyb3Bkb3duLS1vcGVuZWQnLCAnc2VsZWN0LWRyb3Bkb3duLS1zZWFyY2hpbmcnXSxcbiAgICAgIFwibGFuZ3VhZ2VcIjoge1xuICAgICAgICBcIm5vUmVzdWx0c1wiOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgcmV0dXJuICfQndC40YfQtdCz0L4g0L3QtSDQvdCw0LnQtNC10L3Qvic7XG4gICAgICAgIH0sXG4gICAgICAgIHNlYXJjaGluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIFwi0JfQsNCz0YDRg9C30LrQsC4uLlwiO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgYWpheDoge1xuICAgICAgICBkZWxheTogNTAwMDAwMDAwLFxuICAgICAgICB1cmw6ICdodHRwczovL2FudGlicmVlei5naXRodWIuaW8vc2VsZWN0LWRhdGEvc2VsZWN0LWRhdGEuanNvbicsXG4gICAgICB9XG4gICAgICAvL3NlYXJjaElucHV0UGxhY2Vob2xkZXI6ICdNeSBjdXN0b20gcGxhY2Vob2xkZXIuLi4nXG4gICAgfSkub24oXCJzZWxlY3QyOmNsb3NpbmdcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pLm9uKFwic2VsZWN0MjpjbG9zZWRcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBsaXN0LnNlbGVjdDIoXCJvcGVuXCIpO1xuICAgIH0pO1xuXG4gICAgdmFyIGV2ZW50ID0gbmV3IEV2ZW50KCdpbnB1dCcsIHtcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgIH0pO1xuXG4gICAgJCgnLmpzLXNlbGVjdC1jb21iby1zZWFyY2hpbmcnKS5zZWxlY3QyKCdvcGVuJyk7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICQoJy5zZWxlY3QtZHJvcGRvd24tLXNlYXJjaGluZyBpbnB1dCcpWzBdLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgIH0sIDUwMCk7XG5cblxuXG5cbiAgICAkKCcuanMtc2VsZWN0LWNvbWJvLW5vdC1mb3VuZCcpLnNlbGVjdDIoe1xuICAgICAgLy9taW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHlcbiAgICAgIGRyb3Bkb3duQ3NzQ2xhc3M6IFsnc2VsZWN0LWRyb3Bkb3duJywgJ3NlbGVjdC1kcm9wZG93bi0tb3BlbmVkJywgJ3NlbGVjdC1kcm9wZG93bi0tbm90LWZvdW5kJ10sXG4gICAgICBcImxhbmd1YWdlXCI6IHtcbiAgICAgICAgXCJub1Jlc3VsdHNcIjogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHJldHVybiAn0J3QuNGH0LXQs9C+INC90LUg0L3QsNC50LTQtdC90L4nO1xuICAgICAgICB9LFxuICAgICAgICBzZWFyY2hpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBcItCX0LDQs9GA0YPQt9C60LAuLi5cIjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy9zZWFyY2hJbnB1dFBsYWNlaG9sZGVyOiAnTXkgY3VzdG9tIHBsYWNlaG9sZGVyLi4uJ1xuICAgIH0pLm9uKFwic2VsZWN0MjpjbG9zaW5nXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KS5vbihcInNlbGVjdDI6Y2xvc2VkXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgbGlzdC5zZWxlY3QyKFwib3BlblwiKTtcbiAgICB9KTtcblxuICAgICQoJy5qcy1zZWxlY3QtY29tYm8tbm90LWZvdW5kJykuc2VsZWN0Mignb3BlbicpO1xuICAgICQoJy5zZWxlY3QtZHJvcGRvd24tLW5vdC1mb3VuZCBpbnB1dCcpLnZhbCgn0YTRi9Cy0LDQv9CwJyk7XG4gICAgJCgnLnNlbGVjdC1kcm9wZG93bi0tbm90LWZvdW5kIGlucHV0JylbMF0uZGlzcGF0Y2hFdmVudChldmVudCk7XG5cblxuXG4gICAgJCgnLmpzLXNlbGVjdC1zaW5nbGUnKS5zZWxlY3QyKHtcbiAgICAgIHBsYWNlaG9sZGVyOiBcItCS0YvQsdC10YDQuNGC0LUg0LLQsNGA0LjQsNC90YJcIixcbiAgICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcbiAgICAgIGRyb3Bkb3duQ3NzQ2xhc3M6IFsnc2VsZWN0LWRyb3Bkb3duJywnc2VsZWN0LWRyb3Bkb3duLS1zaW5nbGUnXVxuICAgIH0pXG5cbiAgICB2YXIgbGlzdCA9ICQoXCIuanMtc2VsZWN0LXNpbmdsZS1vcGVuXCIpLnNlbGVjdDIoe1xuICAgICAgcGxhY2Vob2xkZXI6IFwi0JLRi9Cx0LXRgNC40YLQtSDQstCw0YDQuNCw0L3RglwiLFxuICAgICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5LFxuICAgICAgZHJvcGRvd25Dc3NDbGFzczogW1xuICAgICAgICAnc2VsZWN0LWRyb3Bkb3duJyxcbiAgICAgICAgJ3NlbGVjdC1kcm9wZG93bi0tc2luZ2xlJyxcbiAgICAgICAgJ3NlbGVjdC1kcm9wZG93bi0tb3BlbmVkJ1xuICAgICAgXSxcbiAgICAgIGNsb3NlT25TZWxlY3Q6IGZhbHNlXG4gICAgfSkub24oXCJzZWxlY3QyOmNsb3NpbmdcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSkub24oXCJzZWxlY3QyOmNsb3NlZFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGxpc3Quc2VsZWN0MihcIm9wZW5cIik7XG4gICAgfSk7XG5cbiAgICBsaXN0LnNlbGVjdDIoJ29wZW4nKTtcblxuXG4gIH0pO1xuXG5cblxuXG4gIC8vICQoJyN5b3VyLXNlbGVjdC1pZCcpLm9uZSgnc2VsZWN0MjpvcGVuJywgZnVuY3Rpb24oZSkge1xuICAvLyAgICQoJ2lucHV0LnNlbGVjdDItc2VhcmNoX19maWVsZCcpLnByb3AoJ3BsYWNlaG9sZGVyJywgJ2VudGVyIHVzZXJuYW1lIG9yIGNpdHknKTtcbiAgLy8gfSk7XG59KSgpO1xuIl19
